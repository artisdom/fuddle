2010-3-11 10:03 
-------------------------------------------------

adb shell am instrument -w -e class \
com.android.contacts.tests
ContactsLaunchPerformance

#define RAND48_SEED_0   (0x330e)
#define RAND48_SEED_1   (0xabcd)
#define RAND48_SEED_2   (0x1234)

unsigned short __rand48_Seed[3] = {
        RAND48_SEED_0,
        RAND48_SEED_1,
        RAND48_SEED_2
};
long
lrand48(void)
{
	__dorand48(__rand48_seed);
	return ((long) __rand48_seed[2] << 15) + ((long) __rand48_seed[1] >> 1);
}
static __inline__ int rand(void) {
    return (int)lrand48();
}


2010-3-10 10:08 
-------------------------------------------------

libasfparser libasfparser_reg libm2v_node


adb push libasfparser_reg.so  /system/lib
adb push libasfparser.so    /system/lib
adb push libm2v_node.so   /system/lib
adb push my_omx_core.cfg   /system/etc





eee_701/system/lib/libm2v_node.so
eee_701/system/lib/libasfparser_reg.so  
eee_701/system/lib/libasfparser.so

sudo cp default.prop init* /media/disk-2 -v
sudo cp boot/vmlinuz /media/disk-2/boot/
sudo cp boot/grub/menu.lst /media/disk-2/boot/grub/


FIXED: no sound ?
sudo cp system/etc/asound.conf /media/disk-2/system/etc
sudo cp system/etc/init.usb.sh /media/disk-2/system/etc



FIXED: can't load keyboard layout ?
# cd /system/usr/keychars
# ls
AT_Translated_Set_2_keyboard.kcm.bin
qwerty2.kcm.bin
qwerty.kcm.bin
# chmod 777 *
chmod 777 /system/usr/keychars/*

cp -rv .repo bionic    dalvik       frameworks  Makefile         packages  vendor \
bootable  development  hardware    mkmk_android.sh  prebuilt \
build     external     kernel                    system ~/myroid-dell

\\fileserver\Builds\Components\VRPresent\Checked\Android\DELL-MINI9\20100310 
 
\\fileserver\Builds\Components\VRPresent\Checked\Android\ACER\20100310 



sudo cp -rv boot   default.prop  init.eee_701.rc   proc                  sys \
dev           init.goldfish.rc  sbin                  system \
 init.rc \
   init          lib               sqlite_stmt_journals ~/disk-2

cd /media/disk-2 \
&& sudo rm -rf anr  app-private   data   lost+found     system \
app  dalvik-cache  local  misc        property

sudo rm -rf system init    lib      sbin  

cd root
sudo cp -rv   init    lib      sbin  /media/disk-2
cd ..
sudo cp -rv   system /media/disk-2


2010-3-9 10:03 
-------------------------------------------------
ftp://CidanaXiAnUI:cidanaui@xian@221.133.237.51/dell_mini9_android/

TODO:
android-x86 on inspron 910
video shift
no sound
# pm sh: /system/bin/pm: /bin/sh: No such file or directory
/system read only
system.img --> dir ?
mmm point to arm target ?

D/CIDANA_SDK( 3326): [AudioRender] Run Done!
I/NotificationService( 2306): enqueueToast pkg=com.cidana.jplayer callback=android.app.ITransientNotification$Stub$Proxy@985eebe0 duration=0
E/ALSALib ( 2292): external/alsa-lib/src/pcm/pcm.c:2201:(snd_pcm_open_noupdate) Unknown PCM AndroidPlayback_Speaker_normal
E/ALSALib ( 2292): external/alsa-lib/src/pcm/pcm.c:2201:(snd_pcm_open_noupdate) Unknown PCM AndroidPlayback_Speaker
E/ALSALib ( 2292): external/alsa-lib/src/pcm/pcm.c:2201:(snd_pcm_open_noupdate) Unknown PCM AndroidPlayback
I/AudioHardwareALSA( 2292): Initialized ALSA PLAYBACK device default

android-x86\kernel\arch\x86\configs\android-x86_defconfig

init.rc 
asound.conf
----------------------------


make usb_img TARGET_PRODUCT=eeepc
repo init -u git://git.android-x86.org/platform/manifest.git -b android-x86-1.6
repo init -u git://git.android-x86.org/platform/manifest.git -b donut-x86

git clone 
donut-x86

sudo mkdir -p /flash/android/data
cp -v ~/menu.lst /flash/boot/grub
cp -v kernel initrd.img ramdisk.img system.img /flash/android


mount -o remount rw /system

FIXED:W/PackageManager( 2306): Install failed: .apk has native code but none for arch x86
build/core/definitions.mk:$(hide) mkdir -p $(dir $@)lib/armeabi  ->x86

BoardConfig.mk:TARGET_CPU_ABI

make TARGET_PRODUCT=eeepc libcidanavrp libcidana_media_jni_pmp CI_Android_pmp
make TARGET_PRODUCT=eeepc clean-CI_Android_pmp  CI_Android_pmp
make TARGET_PRODUCT=eeepc CI_Android_pmp

./mkmk_android.sh libcidana_media_jni_pmp
./mkmk_android.sh clean-CI_Android \
&& \
./mkmk_android.sh  CI_Android


FIXED: can't browse /data
chmod 777 /data


2010-3-8 11:03 
-------------------------------------------------
x86-android-sdcard$ cat default.prop 
#
# ADDITIONAL_DEFAULT_PROPERTIES
#
ro.secure=0
ro.allow.mock.location=1
ro.debuggable=1
persist.service.adb.enable=1

x86-android-sdcard$ grep 'persist.service.adb.enable' init.rc 
# adbd is controlled by the persist.service.adb.enable system property
on property:persist.service.adb.enable=1
on property:persist.service.adb.enable=0


-masm=intel
.intel_syntax noprefix

http://groups.google.com/group/android-porting/browse_thread/thread/5cd2f0a9749f1733
/dev/pmem


kernel/drivers/misc/pmem.c

arch/x86/boot/bzImage

CONFIG_ANDROID_PMEM=y
  x Symbol: FB_EARLYSUSPEND [=y]                                                                                                
  x
  x Prompt: Sysfs interface             
FIXED:/sys/power/wait_for_fb_(sleep/wake)

/default.prop
debug.egl.hw=0
FIXED:libhgl.so

./mkmk_android.sh libsurfaceflinger

2010-3-5 10:02 
-------------------------------------------------
TODO:
dell mini 10 android bootup/code/opencore


action
data (both URI and data type)
category

# disable zygote let system in
service zygote /system/bin/app_process -Xzygote /system/bin --zygote --start-system-server
    socket zygote stream 666
    onrestart write /sys/android_power/request_state wake
    onrestart write /sys/power/state on
    disabled
    oneshot

libhgl.so

/data/system/batterystats.bin


setprop ro.sys.fs.power_supply.ac /ACAD
setprop ro.sys.fs.power_supply.bat /BAT1

symlink /sys/class/power_supply/ACAD /sys/class/power_supply/AC
symlink /sys/class/power_supply/BAT1 /sys/class/power_supply/BAT0


2010-3-4 10:11 
-------------------------------------------------
TODO:
file association (intent ?)
surface/gpu system

build/core/product_config.mk:261: WARNING: adding test OTA key
============================================
TARGET_PRODUCT=eee_701
TARGET_BUILD_VARIANT=eng
TARGET_SIMULATOR=
TARGET_BUILD_TYPE=release
TARGET_ARCH=x86
HOST_ARCH=x86
HOST_OS=linux
HOST_BUILD_TYPE=release
BUILD_ID=
============================================

ttp://blog.sina.com.cn/u/1493290891

 mmm CI_Android_Demo_Stream/jni/cidana_videorender \
 && mmm CI_Android_Demo_Stream/jni/cidana_media_jni/ \
 && mmm CI_Android_Demo_Stream \
 && adu \
 && adb install out/target/product/eee_701/system/app/CI_Android_pmp.apk

adb pull /data/app/com.cidana.jplayer.apk .
repo forall -c git checkout android-1.0


build/core/package.mk

error LOCAL_MODULE_TAGS
aidl.cpp
#include <malloc.h>
#include <string.h>
#include <string>


2010-3-3 10:01 
-------------------------------------------------


cp external/opencore/oscl/oscl/config/linux/osclconfig.h out/target/product/eee_701/obj/include/libpv/


2010-3-2 10:03 
-------------------------------------------------
sudo tune2fs -l /dev/sda1 
export ADBHOST=192.168.0.74

	const int buffersec = 100;
	m_dwBlockDurationMsec = (DWORD)((LONGLONG)m_dwFramesPerBlock*m_ABI.dwSamplesPerFrame*buffersec/m_ABI.dwSamplesPerSec);
	m_dwBlocksInBuffer = buffersec/m_dwBlockDurationMsec;  // 1000 ms total buffer size


1000 1st seek
500 2rd seek


2010-3-1 10:04 
-------------------------------------------------
can't access 192.168.0.54 ?

start windows service, server and workstation

grant all on *.* to 'root'@'%'  identifiied by 'root'

use mysql;
update user set host = '%' where user = 'root';
select host, user from user;

sudo vi /etc/mysql/my.cnf
bind-address = 127.0.0.1

build genrevision
copy D:\mangos\mangos-mangos-26c6c45\src\shared\SystemConfig.h.in D:\mangos\mangos-mangos-26c6c45\src\shared\SystemConfig.h
D:\mangos\mangos-mangos-26c6c45\win\VC80\genrevision__Win32_Debug_NoPCH\genrevision.exe
copy D:\mangos\mangos-mangos-26c6c45\win\VC80\genrevision__Win32_Debug_NoPCH\revision.h D:\mangos\mangos-mangos-26c6c45\dep\include
build mangos
output here D:\mangos\mangos-mangos-26c6c45\bin\win32_debug_nopch

put scriptdev2 to D:\mangos\mangos-mangos-26c6c45\src\bindings\scriptdev2
build scriptdev2
output here D:\mangos\mangos-mangos-26c6c45\bin\win32_debug


2010-2-26 10:27 
-------------------------------------------------
TODO:
opencore node for android-1.6
setup android env for people

E/        (   31): OsclLibraryList::Populate '/system/etc/my_omx_core.cfg' IN
E/        (   31): Libraries found = 0
E/        (   31): OsclLibraryList::Populate '/system/etc/pvplayer.cfg' IN
E/        (   31): Libraries found = 1
E/        (   31): OsclLibraryList::Populate '/system/etc/my_omx_core.cfg' IN
E/        (   31): Libraries found = 2
E/        (   31): OsclLib::loadlibrary: Error opening library (libmpeg2parser_reg.so): Cannot load library: find_library[1156]:    31 'libmpeg2parser_reg.so' failed to load previously
E/        (   31): OsclLib::loadlibrary: Error opening library (libm2v_node.so): Cannot load library: find_library[1156]:    31 'libm2v_node.so' failed to load previously
E/        (   31): OsclLibraryList::Populate '/system/etc/my_omx_core.cfg' IN
E/        (   31): Libraries found = 1
E/        (   31): OsclLib::loadlibrary: Error opening library (libmpeg2parser_reg.so): Cannot load library: find_library[1156]:    31 'libmpeg2parser_reg.so' failed to load previously
E/        (   31): OsclLibraryList::Populate '/system/etc/pvplayer.cfg' IN
E/        (   31): Libraries found = 3
E/        (   31): OsclLibraryList::Populate '/system/etc/pvplayer.cfg' IN
E/        (   31): Libraries found = 1

Gross domestic product

~$ cd eclair/external/opencore/
opencore$ git log -1
commit 5109388c810790f08bdf188b16a60c9020254296
Author: Jean-Baptiste Queru <jbq@google.com>
Date:   Thu Nov 12 18:45:32 2009 -0800

    eclair snapshot

opencore$ cd /30g/cupcake/external/opencore/
opencore$ git log -1
commit 6b31782f62c033186ad890719195f3c04e0a5f25
Author: Ravi K Yenduri <yenduri@pv.com>
Date:   Tue Mar 31 10:27:25 2009 -0700

    Enable OpenCORE on master - part 2

repo init -b donut
repo init -u git://android.git.kernel.org/platform/manifest.git -b donut

repo init -u git://android.git.kernel.org/platform/manifest.git -b android-1.6_r1
repo init -u git://android.git.kernel.org/platform/manifest.git -b android-1.5

repo forall -c git checkout android-1.6_r1
repo forall -c git checkout android-1.0
android-latest$ du -sh *
1.3M	bootable
1.4M	hardware
4.0K	Makefile
5.4M	vendor
6.1M	build
12M	bionic
16M	system

63M	development
65M	packages
81M	dalvik
165M	frameworks
559M	external

576M	prebuilt
1.5G	.repo

switch jdk (not working)
sudo update-alternatives --config java 
sudo update-alternatives --config javac 

android-latest$ repo sync vendor/htc/dream-open/
vendor/htc/dream-open/: discarding 1 commits



2010-2-25 05:16 
-------------------------------------------------
adb remount
adb push libmpeg2parser.so /system/lib
adb push libmpeg2parser_reg.so /system/lib
adb push libm2v_node.so /system/lib
adb push libcimpg_demux.so /system/lib
adb push my_omx_core.cfg /system/etc

cp libmpeg2parser.so libmpeg2parser_reg.so libm2v_node.so libcimpg_demux.so

loadso /system/lib/libmpeg2parser.so
loadso /system/lib/libmpeg2parser_reg.so
loadso /system/lib/libm2v_node.so
loadso /system/lib/libcimpg_demux.so

adb shell ls /system/lib/libm*


2010-2-10 10:01 
-------------------------------------------------


2010-2-9 03:19 
-------------------------------------------------
libgnustep-base-dev
libfoundation1.0-dev


2010-2-5 10:05 
-------------------------------------------------
Advanced Programmable Interrupt Controller (APIC)
oprofile
http://www.ibm.com/developerworks/cn/linux/l-oprof/index.html


opcontrol --setup --ctr0-event=CPU_CLK_UNHALTED --ctr0-count=600000 --vmlinux=/boot/vmlinuz-2.6.24-19-generic

Traceview
dmtracedump

gprof
1.CFLAGS= -lm -gstabs -g -pg  $(DEFINES)
2.make
3.exec --> gmon.out
4.gprof/kprof


2010-2-4 09:59 
-------------------------------------------------
PC
----------------------------------------gdb ok----------------------------------------
set solib-absolute-prefix /home/cidana/hostshare/doc/jni/jniexamples/chap6/InstanceMethodCall/
set solib-search-path /home/cidana/hostshare/doc/jni/jniexamples/chap6/InstanceMethodCall/

file /home/cidana/hostshare/doc/jni/jniexamples/chap6/InstanceMethodCall/libInstanceMethodCall.so 
A program is being debugged already.
Are you sure you want to change the file? (y or n) y
Reading symbols from /mnt/hgfs/hostshare/doc/jni/jniexamples/chap6/InstanceMethodCall/libInstanceMethodCall.so...done.
----------------------------------------gdb ok----------------------------------------

----------------------------------------gdbserver can list file, but can't break----------------------------------------
(gdb) b 87
Breakpoint 1 at 0x875: file InstanceMethodCall.c, line 87.
(gdb) continue 
Continuing.
Warning:
Cannot insert breakpoint 1.
Error accessing memory address 0x875: Input/output error.
----------------------------------------gdbserver can list file, but can't break----------------------------------------


EMU
gdb don't have one

----------------------------------------gdbserver can't even list file----------------------------------------
gdbserver localhost:1234 --attach 


adb forward tcp:1234 tcp:1234
/home/cidana/android-ndk-1.6_r1/build/prebuilt/linux-x86/arm-eabi-4.2.1/bin/arm-eabi-gdb /home/cidana/arm/mydroid/generic/symbols/system/bin/app_process
set solib-absolute-prefix /home/cidana/arm/mydroid/generic/symbols/
set solib-search-path /home/cidana/arm/mydroid/generic/symbols/system/lib
target remote :1234


mydroid$ gdbserver :1234 --attach 29358
Attached; pid = 29358
Listening on port 1234
Remote debugging from host 127.0.0.1

target remote :1234

<?>
after loaded a lot of libraries
Current language:  auto; currently asm
(gdb) list
145	    mov     r3, r2
146	    mov     r2, r1
147	    mov     r1, #FUTEX_WAIT
148	    ldr     r7, =__NR_futex
149	    swi     #0
150	    ldmia   sp!, {r4, r7}
151	    bx      lr
152	    .fnend
153	
154	__futex_wake:
(gdb) set language
The currently understood settings are:

local or auto    Automatic setting based on source file
ada              Use the Ada language
c                Use the C language
c++              Use the C++ language
asm              Use the Asm language
minimal          Use the Minimal language
fortran          Use the Fortran language
objective-c      Use the Objective-c language
java             Use the Java language
modula-2         Use the Modula-2 language
pascal           Use the Pascal language
scheme           Use the Scheme language
(gdb) set language c++
Warning: the current language does not match this frame.
(gdb) info threads
  7 Thread 1945  __ioctl () at bionic/libc/arch-arm/syscalls/__ioctl.S:15
  6 Thread 1944  __ioctl () at bionic/libc/arch-arm/syscalls/__ioctl.S:15
  5 Thread 1943  __ioctl () at bionic/libc/arch-arm/syscalls/__ioctl.S:15
  4 Thread 1942  select () at bionic/libc/arch-arm/syscalls/select.S:17
  3 Thread 1941  __rt_sigtimedwait ()
    at bionic/libc/arch-arm/syscalls/__rt_sigtimedwait.S:15
  2 Thread 1940  __futex_wait ()
    at bionic/libc/arch-arm/bionic/atomics_arm.S:150
  1 Thread 1939  __futex_wait ()
    at bionic/libc/arch-arm/bionic/atomics_arm.S:150

mydroid$ arm-eabi-gdb -x gdbclient.cmds 

mydroid$ cat gdbclient.cmds 
set solib-absolute-prefix /home/cidana/arm/mydroid/out/target/product/generic/symbols
set solib-search-path /home/cidana/arm/mydroid/out/target/product/generic/symbols/system/lib
target remote :1234

----------------------------------------gdbserver can't even list file----------------------------------------

2010-2-3 09:59 
-------------------------------------------------


2010-2-2 09:58 
-------------------------------------------------
javac -classpath /home/cidana/android-sdk-linux/platforms/android-1.5/android.jar playerSDK.java -d .
javah -jni cidana.media.playerSDK

javap -s -p cidana.media.playerSDK

Player.cpp (d:\hostshare\cmmb):        ((LP_UI_PLAYER_CALLBACK_ARRAY)m_pFunctionList)->AppMessageNotify(AM_INITIALIZE_NOTIFY, (void*)nRetCode, (void*)bRealInit);
Player.cpp (d:\hostshare\cmmb):        ((LP_UI_PLAYER_CALLBACK_ARRAY)m_pFunctionList)->AppMessageNotify(AM_PLAYLIVING_NOTIFY, (void*)nRetCode, (void*)nChannelId);
Player.cpp (d:\hostshare\cmmb):        ((LP_UI_PLAYER_CALLBACK_ARRAY)m_pFunctionList)->AppMessageNotify(AM_NOTIFY_UPDATE_CH_LIST, NULL, NULL);


Player.cpp (d:\hostshare\cmmb):		((LP_UI_PLAYER_CALLBACK_ARRAY)m_pFunctionList)->AppMessageNotify(AM_WRITE_ERROR, (void*)dwErr, (void*)&WriteError);
Player.cpp (d:\hostshare\cmmb):                        ((LP_UI_PLAYER_CALLBACK_ARRAY)m_pFunctionList)->AppMessageNotify(AM_ERROR_CA_CHANNEL, (void *)&nErrorValue, NULL);
Player.cpp (d:\hostshare\cmmb):                        ((LP_UI_PLAYER_CALLBACK_ARRAY)m_pFunctionList)->AppMessageNotify(AM_ERROR_CA_CHANNEL, (void *)&nErrorValue, NULL);
Player.cpp (d:\hostshare\cmmb):                    ((LP_UI_PLAYER_CALLBACK_ARRAY)m_pFunctionList)->AppMessageNotify(AM_RESTORE_CA_CHANNEL, NULL, NULL);
Player.cpp (d:\hostshare\cmmb):		if(((LP_UI_PLAYER_CALLBACK_ARRAY)m_pFunctionList)->AppMessageNotify)
Player.cpp (d:\hostshare\cmmb):                ((LP_UI_PLAYER_CALLBACK_ARRAY)m_pFunctionList)->AppMessageNotify(AM_NOTIFY_SIGNAL_CHANGE, (int*)pCurrStatus, NULL);




Player.cpp (d:\hostshare\cmmb):			lRet = ((LP_UI_PLAYER_CALLBACK_ARRAY)m_pFunctionList)->AppMessageNotify(AM_NOTIFY_STATUS_CHANGED, &info, NULL);
Player.cpp (d:\hostshare\cmmb):		((LP_UI_PLAYER_CALLBACK_ARRAY)m_pFunctionList)->AppMessageNotify(AM_UB_EVENT, (void*)pEvent_data, (void*)nData_len);
Player.cpp (d:\hostshare\cmmb):        ((LP_UI_PLAYER_CALLBACK_ARRAY)m_pFunctionList)->AppMessageNotify(AM_XPE_NOTIFY, pDataBuf, (void*)&lDataLen);



2010-2-1 10:04 
-------------------------------------------------
leallian
gavin_wwf

mydroid$ find out/  -name 'libcidana_media_jni_cmmb.so' |xargs ls -l
-rwxr-xr-x 1 cidana cidana 5128788 2010-02-01 12:23 out/target/product/generic/obj/lib/libcidana_media_jni_cmmb.so
-rwxr-xr-x 1 cidana cidana 5128788 2010-02-01 12:23 out/target/product/generic/obj/SHARED_LIBRARIES/libcidana_media_jni_cmmb_intermediates/LINKED/libcidana_media_jni_cmmb.so
-rwxr-xr-x 1 cidana cidana 5128788 2010-02-01 12:23 out/target/product/generic/symbols/system/lib/libcidana_media_jni_cmmb.so
-rwxr--r-- 1 cidana cidana 5119303 2010-01-06 17:23 out/target/product/generic/system/app/jni/libcidana_media_jni_cmmb.so
-rwxr-xr-x 1 cidana cidana 5128788 2010-02-01 12:23 out/target/product/generic/system/lib/libcidana_media_jni_cmmb.so


2010-1-29 10:01 
-------------------------------------------------
sed -i 's/cidana_media_jni/cidana_media_jni_pmp/' src/cidana/media/MediaPlayer.java
grep -n cidana_media_jni src/cidana/media/MediaPlayer.java


sed -i 's/cidana_media_jni/cidana_media_jni_cmmb/' src/cidana/media/MediaPlayer.java


alias vr='mmm cidana/gfxAndroidOMX/'
alias jni='mmm cidana/media_jni/'
alias app='mmm cidana/CI_Android_Demo/'
alias rapp='adb install -r out/target/product/eee_701/system/app/CI_Android_pmp.apk'

alias ads='adb shell'
alias adk='adb kill-server'
alias add='adb devices'
alias adu='adb uninstall com.cidana.jplayer'
alias sadd='sudo /home/cidana/android-sdk-linux/tools/adb devices'

export ADBHOST=192.168.0.84

gdbserver :5039 /data/bin/ort

set solib-absolute-prefix /30g/Android_Source-v37/Android-1.5/out/target/product/eee_701/symbols/
set solib-search-path /30g/Android_Source-v37/Android-1.5/out/target/product/eee_701/symbols/system/lib

target remote :5039


2010-1-28 09:55 
-------------------------------------------------
gimmie-0.2.8$ agi python-gtk2-dev libgnome-menu-dev python2.5-dev -y
Apps > Metacity > General > Compositing Manager

2010-1-27 10:04 
-------------------------------------------------
byd cmmb
yuhua cmmb

2010-1-26 10:03 
-------------------------------------------------

adb shell gdbserver :5039 --attach 264 &

set solib-absolute-prefix out/target/product/generic/symbols
set solib-search-path out/target/product/generic/symbols/system/lib

xunlei
leyu
emule
movieplayer

bank/alipay/gtja
dazhihui
qq-voice
chinese input method


2010-1-25 10:05 
-------------------------------------------------
release insydesw pmp demo

2010-1-22 09:59 
-------------------------------------------------
acer hardware render
-ftree-vectorize


2010-1-21 11:45 
-------------------------------------------------
build/core/version_defaults.mk


ifeq "" "$(PLATFORM_VERSION_CODENAME)"
  # This is the current development code-name, if the build is not a final
  # release build.  If this is a final release build, it is simply "REL".
#   PLATFORM_VERSION_CODENAME := Eclair
  PLATFORM_VERSION_CODENAME := REL
endif

showmount -e 192.168.0.30


2010-1-20 10:01 
-------------------------------------------------
TODO:

indesw acer 
- replace image
- how to product xxx.img
- replace opencore

opencore
- shared lib

CPPFLAGS += -fno-rtti -fomit-frame-pointer -fno-exceptions

build indesw image
make -j
ln: creating symbolic link `out/target/product/eee_701/system/bin/pppd': No such file or directory
<SOLVE> mkdir -p out/target/product/eee_701/system/bin



insyde/Firefox/src/com/android/firefox/EventListener.java:48: method does not override a method from its superclass
    @Override
     ^
insyde/Firefox/src/com/android/firefox/EventListener.java:65: method does not override a method from its superclass
    @Override
     ^
insyde/Firefox/src/com/android/firefox/EventListener.java:133: method does not override a method from its superclass
    @Override
     ^
3 errors
make: *** [out/target/common/obj/APPS/Firefox_intermediates/classes-full-debug.jar] Error 41

Android-1.5$ java -version
java version "1.5.0_19"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_19-b02)
Java HotSpot(TM) Client VM (build 1.5.0_19-b02, mixed mode, sharing)


tar zcvf bionic-headers.tar.gz \
bionic/libc/arch-x86/include \
bionic/libc/arch-arm/include \
bionic/libc/include \
bionic/libc/kernel/common \
bionic/libc/kernel/arch-arm \
bionic/libc/kernel/arch-x86 \
bionic/libm/include



2010-1-19 10:11 
-------------------------------------------------


2010-1-18 10:05 
-------------------------------------------------
dragontech cmmb sdk update



2010-1-15 09:41 
-------------------------------------------------
commit opencore to svn
add setVideoDst to jni
TODO:
perfermance evaluation

2010-1-14 10:00
-------------------------------------------------
merge opencore

use crt one to update t20 firmware, and install zhuorui's usb driver
TODO:
test pmp on insydesw

2010-1-13 10:00 
-------------------------------------------------


merge opencore fileformat


2010-1-12 01:39 
-------------------------------------------------

external/opencore
framework/base

out to dragontech, browser integration


2010-1-11 11:10
-------------------------------------------------

unzip SmsSample.zip to $HOME/SmsSample

If your directory layout like this
$HOME/android src path/
$HOME/SmsSample

cd $HOME/android src path/
source build/envsetup.sh
mmm ../SmsSample

And there will a command line application named ss (you can modify it in Android.mk)
adb push ss /data/bin
adb push libnative.so /data/bin

cd /data/bin
LD_LIBRARY_PATH=. ./ss




TODO:
release insydesw/acer x86 pmp sdk
merge xi'an opencore mepg demux
implement opencore rmdemux
stick on siano hostlib unstable/transport error problem
-update t20 with new firmware
support dragontech cmmb integration
-see if video surface can dynamic change when video is still playing




/data/smsmdtv/native_load_log.txt
/data/smsmdtv/native_log.txt

mount -o remount rw /system

LD_LIBRARY_PATH=. ./ss

/data/tal/tt
/data/tal/tuners/libTalSiano.so
/system/lib/libnative.so



elad hi

Sorry for late response, recently we can record some data from tuner.
But there are many transport error and count errors. 
If there are 30k packets there will be 10k of them have errors.
I have put test application and record result on our ftp server.

ftp://partner.siano@ftp.cidana.com/siano_tuner_record_result/

SmsSample.zip - is siano sample code with some modification
out.zip - is which we record


david hi

I have see some trival problem with T20 device.
Adb connection are not stable, sometimes it just disconnect with host too often.
and sometimes it can't bootup, LCD moniter has no display.

Do you have some idea about this.
BTY: I'm running ubuntu 8.04 on vmware, LCD moniter(4:3) for display.





2010-1-8 10:00
-------------------------------------------------
dragon tech sample code done

unzip cidanaSamplePlayer.zip to $HOME/cidanaSamplePlayer

If your directory layout like this
$HOME/android src path/
$HOME/cidanaSamplePlayer

cd $HOME/android src path/
source build/envsetup.sh
mmm ../cidanaSamplePlayer

And adb install this apk to T20 board.
There will be a application named "cidanaSamplePlayer" apear.

Launch it then press the play button to play,  exit button to close .

place CMMB_Demo.mfs to your /sdcard (you can modify file path in java code)



2010-1-7 10:05 
-------------------------------------------------

sdk - android version(config, Makefile.rules)
cp sdk/.a ci/jni
sdk_jni - android version, clip_size, 
vr - android version, render_type(nvidia, isurface)
mmm ci

TODO:
cmmb sample code
dvbt demo on G2
acer x86 pmp sdk/image burn
rmdemux
tuner
omx decoder-render

		if(mSurface.isValid())
		{
		            Log.d(TAG, "mSurface Valid");
		}
		else
		{
		            Log.e(TAG, "mSurface not Valid");
		}
2010-1-6 10:00 
-------------------------------------------------
dvbt interlace

omx render add keep aspect ratio

android create project -t 1 -k com.cidana -a SamplePlayer -n SamplePlayer -p SamplePlayer

android create project -t 1 -k com.cidana.jplayer -a MediaPlayerActivity -n SamplePlayer -p SamplePlayer


2010-1-5 09:59 
-------------------------------------------------

omxRenderTest$ ./omxRenderTest
Init the Omx core
Omx core is initialized 
GENERAL TEST test_OMX_ComponentNameEnum
component  0 is OMX.PV.mpeg4dec
component  1 is OMX.PV.h263dec
component  2 is OMX.PV.avcdec
component  3 is OMX.PV.wmvdec
component  4 is OMX.PV.rvdec
component  5 is OMX.PV.aacdec
component  6 is OMX.PV.amrdec
component  7 is OMX.PV.mp3dec
component  8 is OMX.PV.wmadec
component  9 is OMX.PV.radec
component 10 is OMX.PV.amrencnb
component 11 is OMX.PV.mpeg4enc
component 12 is OMX.PV.h263enc
component 13 is OMX.PV.avcenc
component 14 is OMX.PV.aacenc
GENERAL TEST test_OMX_ComponentNameEnum result 8000100e


TODO:

independency shared library, load from *.cfg
how to generate a uuid to rm
input *.rm file and find file recoganizer/parser


cmmb-1.5/1.6-isurface for dragontech
dvbt-2.0-omx for nvidia



2010-1-4 10:05 
-------------------------------------------------
cxx_personality

<SOLVE> -fno-exceptions

2009-12-31 10:03 
-------------------------------------------------

svn checkout svn://svn.mplayerhq.hu/mplayer/trunk mplayer



2009-12-30 10:00 
-------------------------------------------------
bellagio rm plugin,

autoreconf -i -f

- github
sdk_pmp/trunk
CI_Android_Demo_pmp
gfxAndroid

../pvplayer_engine_test ~/hostshare/media_pmp_sample/split/176x144xMPEG4_aac_001.mp4 -test 0 0 -logerr
test ok


../pvplayer_engine_test test.mp4 -test 1 1 -logerr
use this video file \\192.168.0.30\cidana\30g\opencore\engines\player\test\data\test.mp4

output
test_player_openplaystop_test_mp4_audio.dat can listen by using cooledit
test_player_openplaystop_test_mp4_video.dat can view by using yuvviewer 176x144




engine$ ../pvplayer_engine_test -source 176x144xMPEG4_aac_001.mp4 -test 1 1 -logerr
test ok
video output ok
audio output ok



-source spltrailer1.rmvb -test 1 1 -logerr
x-pvmf/mux/rm
video/MP4


#ifdef ANDROID
#define PV_DYNAMIC_LOADING_CONFIG_FILE_PATH "/system/etc"
#else
#define PV_DYNAMIC_LOADING_CONFIG_FILE_PATH "./"
#endif



2009-12-29 10:01 
-------------------------------------------------
omxparser 
-d will display a/v
-c will has no sound

rm -rf out/target/product/generic/obj/SHARED_LIBRARIES/libcidana*
rm out/target/product/generic/system/lib/libcidana*
rm -r out/target/product/generic/obj/STATIC_LIBRARIES/cidana*



	//	DEBUG(DEB_LEV_ERR,"-----------error in this line %d error code = %x\n", __LINE__, err);


2009-12-28 10:04 
-------------------------------------------------
access samba by using \\ip\username
~$ git config --global core.excludesfile ~/.gitignore
~$ echo '*.swp' >> .gitignore

can't find volume component ?
<SOLVE>
omxregister-bellagio -v /usr/local/lib/bellagio/ /usr/local/lib/extern_omxcomp/lib/

src/omxparsertest -vo outfileVideo.yuv -ao outfileAudio.pcm ~/hostshare/media_pmp_sample/009.3gp
src/omxparsertest -d  ~/hostshare/media_pmp_sample/009.3gp 


2009-12-25 10:02 
-------------------------------------------------


2009-12-24 10:07 
-------------------------------------------------
LOCAL_LDFLAGS += -lnvddk_2d
LOCAL_LDFLAGS += -lnvddk_2d_v2
LOCAL_LDFLAGS += -lnvddk_audiomixer_impl
LOCAL_LDFLAGS += -lnvddk_audiomixer
LOCAL_LDFLAGS += -lnvddk_disp
LOCAL_LDFLAGS += -lnvdispatch_helper
LOCAL_LDFLAGS += -lnvdispmgr_d
LOCAL_LDFLAGS += -lnvdispmgr_impl_d
LOCAL_LDFLAGS += -lnvidia_graphics_jni
LOCAL_LDFLAGS += -lnvmm_audio
LOCAL_LDFLAGS += -lnvmm_contentpipe
LOCAL_LDFLAGS += -lnvmm_image
LOCAL_LDFLAGS += -lnvmm_manager_impl
LOCAL_LDFLAGS += -lnvmm_manager
LOCAL_LDFLAGS += -lnvmm_misc
LOCAL_LDFLAGS += -lnvmm_parser
LOCAL_LDFLAGS += -lnvmm_service
LOCAL_LDFLAGS += -lnvmm
LOCAL_LDFLAGS += -lnvmm_tracklist
LOCAL_LDFLAGS += -lnvmm_utils
LOCAL_LDFLAGS += -lnvmm_videorenderer
LOCAL_LDFLAGS += -lnvmm_video
LOCAL_LDFLAGS += -lnvmm_vp6_video
LOCAL_LDFLAGS += -lnvmm_writer
LOCAL_LDFLAGS += -lnvodm_disp
LOCAL_LDFLAGS += -lnvodm_dtvtuner
LOCAL_LDFLAGS += -lnvodm_hdmi
LOCAL_LDFLAGS += -lnvodm_imager
LOCAL_LDFLAGS += -lnvodm_query
LOCAL_LDFLAGS += -lnvomxilclient
LOCAL_LDFLAGS += -lnvomx
LOCAL_LDFLAGS += -lnvos
LOCAL_LDFLAGS += -lnvrm_graphics_impl
LOCAL_LDFLAGS += -lnvrm_graphics
LOCAL_LDFLAGS += -lnvrm
LOCAL_LDFLAGS += -lnvsm
LOCAL_LDFLAGS += -lnvwinsys
LOCAL_LDFLAGS += -lnvwsi

# ./ort   
------------------------------------
GENERAL TEST OMX_ERRORTYPE test_OMX_ComponentNameEnum()
component 0 is OMX.Nvidia.raw.read
component 1 is OMX.Nvidia.audio.read
component 2 is OMX.Nvidia.video.read
component 3 is OMX.Nvidia.image.read
component 4 is OMX.Nvidia.video.read.large
component 5 is OMX.Nvidia.video.scheduler
component 6 is OMX.Nvidia.clock.component
component 7 is OMX.Nvidia.raw.write
component 8 is OMX.Nvidia.audio.write
component 9 is OMX.Nvidia.video.write
component 10 is OMX.Nvidia.image.write
component 11 is OMX.Nvidia.imagesequence.write
component 12 is OMX.Nvidia.vidhdr.write
component 13 is OMX.Nvidia.vidhdr.read
component 14 is OMX.Nvidia.mp4.write
component 15 is OMX.Nvidia.mp4.decode
component 16 is OMX.Nvidia.mp4ext.decode
component 17 is OMX.Nvidia.h263.decode
component 18 is OMX.Nvidia.sorenson.decode
component 19 is OMX.Nvidia.mpeg2v.decode
component 20 is OMX.Nvidia.vp6.decode
component 21 is OMX.Nvidia.h264.decode
component 22 is OMX.Nvidia.h264ext.decode
component 23 is OMX.Nvidia.vc1.decode
component 24 is OMX.Nvidia.aac.decoder
component 25 is OMX.Nvidia.adts.decoder
component 26 is OMX.Nvidia.eaacp.decoder
component 27 is OMX.Nvidia.bsac.decoder
component 28 is OMX.Nvidia.mp3.decoder
component 29 is OMX.Nvidia.wav.decoder
component 30 is OMX.Nvidia.wma.decoder
component 31 is OMX.Nvidia.wmapro.decoder
component 32 is OMX.Nvidia.wmalossless.decoder
component 33 is OMX.Nvidia.vorbis.decoder
component 34 is OMX.Nvidia.amr.decoder
component 35 is OMX.Nvidia.amrwb.decoder
component 36 is OMX.Nvidia.jpeg.encoder
component 37 is OMX.Nvidia.jpeg.decoder
component 38 is OMX.Nvidia.mjpeg.decoder
component 39 is OMX.Nvidia.theora.decoder
component 40 is OMX.Nvidia.std.iv_renderer.overlay.rgb565
component 41 is OMX.Nvidia.render.overlay.argb8888
component 42 is OMX.Nvidia.std.iv_renderer.overlay.yuv420
component 43 is OMX.Nvidia.render.hdmi.overlay.yuv420
component 44 is OMX.Nvidia.render.tvout.overlay.yuv420
component 45 is OMX.Nvidia.render.secondary.overlay.yuv420
component 46 is OMX.Nvidia.video.renderer
component 47 is OMX.Nvidia.ts.read
component 48 is OMX.Nvidia.bitstream.read
component 49 is OMX.Nvidia.audio.render
component 50 is OMX.Nvidia.amr.encoder
component 51 is OMX.Nvidia.amrwb.encoder
component 52 is OMX.Nvidia.aac.encoder
component 53 is OMX.Nvidia.mp4.encoder
component 54 is OMX.Nvidia.h264.encoder
component 55 is OMX.Nvidia.h263.encoder
component 56 is OMX.Nvidia.ilbc.encoder
component 57 is OMX.Nvidia.camera
component 58 is OMX.Nvidia.audio.capturer
component 59 is OMX.Nvidia.asf.read
component 60 is OMX.Nvidia.mp4.read
component 61 is OMX.Nvidia.avi.read
component 62 is OMX.Nvidia.mp3.read
component 63 is OMX.Nvidia.ogg.read
component 64 is OMX.Nvidia.wav.read
component 65 is OMX.Nvidia.aac.read
component 66 is OMX.Nvidia.amr.read
component 67 is OMX.Nvidia.awb.read
component 68 is OMX.Nvidia.reader
component 69 is OMX.Nvidia.mp2.decoder
component 70 is OMX.Nvidia.video.extractor
GENERAL TEST OMX_ERRORTYPE test_OMX_ComponentNameEnum() result 8000100e
------------------------------------
GENERAL TEST OMX_ERRORTYPE test_OMX_RoleEnum(char*)
The number of roles for the component OMX.Nvidia.video.renderer is: 1
The role 1 for the component:  iv_renderer.yuv.overlay 
GENERAL TEST OMX_ERRORTYPE test_OMX_RoleEnum(char*) result 0
------------------------------------
GENERAL TEST OMX_ERRORTYPE test_OMX_ComponentEnumByRole(char*)
Getting number of components per role for video_src
Number of components per role for video_src is 0
 The components are:
GENERAL TEST OMX_ERRORTYPE test_OMX_ComponentEnumByRole(char*) result OMX_ErrorNone
------------------------------------




2009-12-23 10:06 
-------------------------------------------------
opencore/android
generates libandroidpv.a


ftp://partner.nvidia:nvidiamobile1@ftp.cidana.com/nvidia/smshostlib-hw-dvbt.zip

Username: partner.nvidia             

Password: nvidiamobile1


etc$ sudo dhclient eth2
sudo ifconfig eth2 192.168.0.90 netmask 255.255.255.0 broadcast  192.168.0.255
sudo route add -net 192.168.0.0 netmast 255.255.255.0 gw 192.168.0.2 dev eth2


/home/cidana/eclair/external/opencore/oscl/oscl/osclbase/src/oscl_opaque_type.h:47: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Oscl_Opaque_Type_Alloc'
<SOLVE> don't compile cpp as c







void PVMediaOutputNodePort::SendMediaData()
        PvmiMediaXferHeader mediaxferhdr;
        mediaxferhdr.seq_num = mediaData->getSeqNum();
        mediaxferhdr.timestamp = mediaData->getTimestamp();
        mediaxferhdr.duration = duration;
        mediaxferhdr.flags = flags;
        mediaxferhdr.stream_id = mediaData->getStreamID();
        mediaxferhdr.private_data_length = privatedatalength;
        mediaxferhdr.private_data_ptr = privatedataptr;
        err = WriteDataToMIO(cmdId, mediaxferhdr, frag);
int32 PVMediaOutputNodePort::WriteDataToMIO(int32 &aCmdId, PvmiMediaXferHeader &aMediaxferhdr, OsclRefCounterMemFrag &aFrag)
PVMFCommandId AndroidSurfaceOutput::writeAsync(uint8 aFormatType, int32 aFormatIndex, uint8* aData, uint32 aDataLen,





2009-12-22 10:55 
-------------------------------------------------

donut opencore
pvmf_node_interface.cpp:(.text._ZN14PVMFAsyncEventD1Ev[PVMFAsyncEvent::~PVMFAsyncEvent()]+0x17): undefined reference to `vtable for PVMFAsyncEvent'



./pvplayer_engine_test ~/hostshare/media_pmp_sample/176x144xMPEG4_aac.mp4 -t 1 1 -output of -logerr



1. Install the vsftpd with the package manager.

  

     apt-get install vsftpd 

 

2. Configure the conf file. 

 

    Open /etc/vsftpd.conf. And add the following lines,

 

    ###Enable anonymous read

    anonymous_enable=YES

    anon_root=/
    anon_world_readable_only=YES

 

    #anon_mkdir_write_enable=YES
    #anon_upload_enable=YES

    ###Enable local user read and write
    local_enable=YES
    write_enable=YES

 

3. Restart the server. 

 

    /etc/init.d/vsftpd restart


dellmini opencore is base on this commit

6b31782f62c033186ad890719195f3c04e0a5f25

-c/-n   {CodecType/ComponentName}
        CodecType could be avc, aac, mpeg4, h263, wmv, rv, amr, mp3, wma, ra



void PVMERegistryPopulator::RegisterAllRecognizers(PVPlayerRecognizerRegistryInterface* aRegistry, OsclAny*& aContext)
OSCL_EXPORT_REF PVMFRecognizerPluginInterface* PVMP4FFRecognizerFactory::CreateRecognizerPlugin()
PVMFStatus PVMP4FFRecognizerPlugin::Recognize(PVMFDataStreamFactory& aSourceDataStreamFactory,
OSCL_EXPORT_REF bool MP4FileRecognizer::IsMP4File(OSCL_wString& filename,


void PVMERegistryPopulator::RegisterAllNodes(PVPlayerNodeRegistryInterface* aRegistry, OsclAny*& aContext)
bool PVMFMP4FFParserNode::ParseMP4File(PVMFNodeCommand& aCmd, PVMFStatus& aStatus)
    iMP4FileHandle = IMpeg4File::readMP4File(iFilename,



CPM
ContentPolicyManager


mime
pvmf_format_type.h



linux$ ./test_pvauthorengine -help
Version: CORE_8.000.1.1 generated on 20091108

PVAuthorEngine Unit Test

Printing leak info option. Default is OFF:
  -leakinfo
   If there is a memory leak, prints out the memory leak information
   after all specified test cases have finished running.

Test cases to run option. Default is ALL:
  -test x x
   Specify a range of test cases to run. To run one test case, use the
   same index for x and y.

[test range from: 1001 to: 999]

CMD LINE ARGS FOR COMPRESSED TESTS [test range from: 0 to: 105]

Source specification option for audio.:
  -audio sourcename
   Specify the source filename or URL to use for test cases which
   allow user-specified source name. The unit test determines the
   source format type using extension or URL header.

Source specification option for video.:
  -video sourcename
   Specify the source filename or URL to use for test cases which
   allow user-specified source name. The unit test determines the
   source format type using extension or URL header.

Output specification option.
  -output outputname
   Specify the output filename to use for test cases which
   allow user-specified source name. 

Authoring Time specification option for Author.:
  -duration time_in_seconds
   Specify the time argument to use for test cases which
   allow user-specified source name.

CMD LINE ARGS FOR UNCOMPRESSED TESTS(with AVI/WAV inputs)[test range from 200 to 308]

Source specification option.:
  -source sourcename
   Specify the source filename or URL to use for test cases which
   allow user-specified source name. The unit test determines the
   source format type using extension or URL header.

Output specification option.
  -output outputname
   Specify the output filename to use for test cases which
   allow user-specified source name. 

Video Encoder Type option. Default is M4V:
  -encV encodertype
  specifies the encoder to be used for authoring
  0:M4V
  1:H263
  2:H264
  e.g -encV 0 

Audio Encoder Type option. Default is AMRNb:
  -encA encodertype
  specifies the encoder to be used for authoring
  0:AMRNb
  1:AMRWb
  2:AAC_ADIF
 3:AAC_ADTS
 4:AAC MPEG4
  e.g -encA 0 

AAC Audio Encoder Profile Type option. Default is AAC LC:
  -aactype 
  specifies the aac encoder profile type to be used for authoring
  0:AAC LC
  1:AAC+
  2:eAAC+
  e.g -aactype 0 

Authoring Time specification option for Author.:
  -duration time_in_seconds
   Specify the time argument to use for test cases which
   allow user-specified source name.


XML test results file option.  Default is to not write a summary.
  -xmloutput file
   Specify a source filename to output a test results summary to.

NO CMD LINE ARGS WERE REQUIRED TO RUN COMPRESSED ERROR HANDLING TESTS [test range from:400 to 403]

NO CMD LINE ARGS WERE REQUIRED TO RUN UNCOMPRESSED ERROR HANDLING TESTS [test range from:500 to 570]


Memory Stats:
  peakNumAllocs 50
  peakNumBytes 15667
  totalNumAllocs 110
  totalNumBytes 18674
  numAllocFails 0



2009-12-21 10:05 
-------------------------------------------------
SmsHostApiDeviceInit_Req
SmsHostApiGetVersion_Req
SmsHostApiAddPidFilter_Req
1 devices exist. Using first device in the list SmsDeviceCalling SmsHostApiTune_Req(pAsyncData->DevHandle, CurFreq, DVBT_USER_SCAN_BANDWIDTH) .
device mode = 0 


**********************************************************************************************************
Calling SmsHostApiDeviceInit_Req( DeviceData.DeviceName, SMSHOSTLIB_DEVMD_DVBT, 12000000L, pAsyncData, &pAsyncData->DevHandle)
#Callbacks:        1; #Bytes:     3948
**********************************************************************************************************



**********************************************************************************************************
Calling SmsHostApiGetVersion_Req(pAsyncData->DevHandle)
**********************************************************************************************************



2009-12-18 10:04 
-------------------------------------------------
opencore unittest run fail ?
<SOLVE> cp pvplayer.cfg to bin/linux


linux$ ./test_omx_client 

Arguments insufficient

Usage: Input_file {options}
Option{} 
-output {console out}: Output file for console messages - Default is Stderr
-o      {fileout}: Output file to be generated 
-i      {input_file2}: 2nd input file for dynamic reconfig, etc.
-r      {ref_file}:   Reference file for output verification
-c/-n   {CodecType/ComponentName}
        CodecType could be avc, aac, mpeg4, h263, wmv, rv, amr, mp3, wma, ra
-t x y  {A range of test cases to run}
         To run one test case use same index for x and y - Default is ALL
-l      log to file

./test_omx_client /30g/donut/external/opencore-2.07/engines/player/mytest/data/test_cbr.mp3 -c mp3 -n mp3 -t 0 0 -output outputfile -logerror

./test_omx_client /30g/donut/external/opencore-2.07/engines/player/mytest/data/test_cbr.mp3 -c mp3 -n mp3 -output outputfile -t 11 11

<OUTPUT>this mp3 file output will be 44100hz, mono pcm

pvplayer_engine_test

linux$ ./pvplayer_engine_mytest -help
Version: CORE_8.000.1.1 generated on 20091108

Test Program for pvPlayer engine class.
Printing leak info option. Default is OFF:
  -leakinfo
   If there is a memory leak, prints out the memory leak information
   after all specified test cases have finished running.

Source specification option. Default is 'test.mp4':
  -source sourcename
   Specify the source filename or URL to use for test cases which
   allow user-specified source name. The unit test determines the
   source format type using extension or URL header.

List specification option:
  -list 100:104,108,110,115:117
   Specify a range of test cases using from A to B like A:B
   for a single test case C use coma ,C
   -list A:B,C

Test cases to run option. Default is ALL:
  -test x y
   Specify a range of test cases to run. To run one test case, use the
   same index for x and y.
  -test L
   Run local playback test cases only.
  -test D
   Run download playback test cases only.
  -test S
   Run streaming playback test cases only.

Compressed video and audio output option. Default is OFF for both:
  -compV AND/OR -compA
   For test cases and sinks that support compressed media output (media
   I/O node test cases), the output data files would have compressed
   bitstreams. This also means the player engine would not use a decoder
   node to decode the bitstream from the source node.

Packet Source plug-in option. Default is OFF for both:
  -fi
  For file input
  -bcs
  For broadcast socket

Log configuration file options:
  -logconfigfile ==> Use cfg file to configure logger. Ignores all other log options.

Log level options. Default is debug level:
  -logerr
   Log at error level
  -logwarn
   Log at warning level

Log node options. Default is player engine only:
  -logall                   ==> Log everything (log appender at root node)
  -logdatapath              ==> Log datapath only
  -logclock                 ==> Log clock only
  -logoscl                  ==> Log OSCL only
  -logperf                  ==> Log scheduler performance
  -logperfmin               ==> Log scheduler performance (minimal)
  -logdatapathsrc           ==> Log source node datapath only
  -logdatapathdec           ==> Log decoder node datapath only

Log to file options.
  -logfile                  ==> Send log output to file

   proxy enabled ON or OFF, default is OFF
  -proxy
   For test cases where proxy support is reqd
   Downloadrate for external download simulator testcase in Kbps - Default 32Kbps
  -downloadrate
   Applicable only to external download simulator testcases
XML test results file option.  Default is to not write a summary.
  -xmloutput file
   Specify a source filename to output a test results summary to.

Memory Stats:
  peakNumAllocs 11
  peakNumBytes 861
  totalNumAllocs 22
  totalNumBytes 980
  numAllocFails 0
  ERROR: Memory Leaks! numAllocs 4, numBytes 278



#include <ui/ISurface.h>
#include <binder/MemoryHeapBase.h>


header files which we need
ui/Surface.h
ui/ISurface.h
utils/Log.h
binder/IMemory.h
binder/MemoryBase.h
binder/MemoryHeapBase.h


libraries which we need
libcutils
libutils
libui
libbinder



-Wfatal-errors
make first error stop

<6>[42949435.980000] smsusb_probe: smsusb_probe 0
<6>[42949435.980000] smsusb_probe: endpoint 0 81 02 512
<6>[42949435.980000] smsusb_probe: endpoint 1 02 02 512
<6>[42949435.980000] smsusb_init_device: smsusb_init_device: in_ep = 81, out_ep = 02
<6>[42949436.020000] smscore_register_device: allocated 50 buffers
<6>[42949436.020000] smscore_register_device: device db19ba00 created
<6>[42949436.020000] smsusb_init_device: smsusb_start_streaming(...).
<6>[42949436.050000] smschar_hotplug: entering 1
<6>[42949436.050000] 
<6>[42949436.050000] smschar_hotplug: create device 0
<6>[42949436.060000] smschar_setup_cdev: exiting bf00aa9c 0, rc 0
<6>[42949436.060000] smschar_hotplug: create device 1
<6>[42949436.070000] smschar_setup_cdev: exiting bf00ab08 1, rc 0
<6>[42949436.080000] smschar_hotplug: create device 2
<6>[42949436.080000] smschar_setup_cdev: exiting bf00ab74 2, rc 0
<6>[42949436.080000] smschar_hotplug: create device 3
<6>[42949436.080000] smschar_setup_cdev: exiting bf00abe0 3, rc 0
<6>[42949436.080000] smschar_hotplug: create device 4
<6>[42949436.100000] smschar_setup_cdev: exiting bf00ac4c 4, rc 0
<6>[42949436.110000] smschar_hotplug: create device 5
<6>[42949436.110000] smschar_setup_cdev: exiting bf00acb8 5, rc 0
<6>[42949436.110000] smschar_hotplug: create device 6
<6>[42949436.110000] smschar_setup_cdev: exiting bf00ad24 6, rc 0
<6>[42949436.130000] smschar_hotplug: create device 7
<6>[42949436.130000] smschar_setup_cdev: exiting bf00ad90 7, rc 0
<6>[42949436.130000] smschar_hotplug: create device 8
<6>[42949436.130000] smschar_setup_cdev: exiting bf00adfc 8, rc 0
<6>[42949436.150000] smschar_hotplug: create device 9
<6>[42949436.150000] smschar_setup_cdev: exiting bf00ae68 9, rc 0
<6>[42949436.150000] smschar_hotplug: create device 10
<6>[42949436.170000] smschar_setup_cdev: exiting bf00aed4 10, rc 0
<6>[42949436.170000] smschar_hotplug: create device 11
<6>[42949436.170000] smschar_setup_cdev: exiting bf00af40 11, rc 0
<6>[42949436.170000] smschar_hotplug: create device 12
<6>[42949436.170000] smschar_setup_cdev: exiting bf00afac 12, rc 0
<6>[42949436.170000] smschar_hotplug: create device 13
<6>[42949436.170000] smschar_setup_cdev: exiting bf00b018 13, rc 0
<6>[42949436.200000] smschar_hotplug: create device 14
<6>[42949436.200000] smschar_setup_cdev: exiting bf00b084 14, rc 0
<6>[42949436.210000] smschar_hotplug: create device 15
<6>[42949436.210000] smschar_setup_cdev: exiting bf00b0f0 15, rc 0
<6>[42949436.220000] smschar_hotplug: create device 16
<6>[42949436.230000] smschar_setup_cdev: exiting bf00b15c 16, rc 0
<6>[42949436.230000] smschar_hotplug: exiting, rc 0
<6>[42949436.230000] 
<6>[42949436.230000] smscore_init_ir: IR port has not been detected
<6>[42949436.230000] smscore_start_device: device db19ba00 started, rc 0
<6>[42949436.250000] smsusb_init_device: device db2c5800 created
<6>[42949436.260000] smsusb_probe: rc 0
<6>[42949456.960000] smschar_open: entering index 0
<6>[42949456.960000] 
<7>[42949456.960000] smscore_register_client: Register new client bf00aa9c DT=0 ID=150
<6>[42949456.960000] smscore_unregister_client: bf00aa9c
<6>[42949456.960000] smschar_release: exiting
<6>[42949456.960000] 

D/        (  997): [TunerUtility::FindFileName] find file /data/tal/tuners/libTalSiano.so.
D/        (  997): SmsHostApiLibInit return 0x80000049
D/        ( 1008): [TunerUtility::FindFileName] find file /data/tal/tuners/libTalSiano.so.
D/        ( 1008): [SianoCtrlCallback] receive siano message 14003 error code 0x0.
D/        ( 1008): SmsHostApiGetDevicesList return DeviceName SmsDevice mode -1
D/        ( 1029): [TunerUtility::FindFileName] find file /data/tal/tuners/libTalSiano.so.




2009-12-17 10:12 
-------------------------------------------------


test_load_so$ /home/cidana/siano/x86/smshostlib/Platforms/Linux/smsctrllib/libsmscontrol.so 
Illegal instruction


# ./test_load libsmscontrol.so
load libsmscontrol.so 
dlopen error :Cannot load library: reloc_library[1259]:  1048 cannot locate 'strcpy'...



Software Liscense Agreement

2009-12-16 10:04 
-------------------------------------------------
ctrl+F12 switch emulator to landscape mode

E/SurfaceFlinger(   59): LayerBuffer::BufferSource::postBuffer() invalid buffer (offset=0, size=307200, heap-size=155648

320*240=76800

*2 = 153600


I/ActivityManager(  820): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.android.smsmdtvjclient/.SmsMdtvJClient }
I/System.out( 1026): goDVBT!
I/System.out( 1026): SmsMdtv.init called
W/InputManagerService(  820): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@43b9f6f0 (uid=10000 pid=878)
I/System.out( 1026): no entry for device index 0 !!! 14003
I/System.out( 1026): SmsMdtv.setDbgLogMask called
I/System.out( 1026): dev 0 :SmsDevice
I/System.out( 1026): deviceInitReq
I/System.out( 1026): SmsMdtv.deviceInitReq called
I/ActivityManager(  820): Displayed activity com.android.smsmdtvjclient/.SmsMdtvJClient: 537 ms (total 537 ms)
I/System.out( 1026): returned devHandle=0
I/System.out( 1026): client handleInitDeviceRes res=0 handle=0
I/System.out( 1026): SmsMdtv.getVersionReq called
I/System.out( 1026): client handleGetVersionRes res=0 Version=DVB 02.00.12 DLU 01.00.04
I/System.out( 1026): SMS Host Library Version: 5.1.06 Dec  4 2009 08:20:06
I/System.out( 1026): dvbtTuneReq
I/System.out( 1026): SmsMdtv.dvbttune called
I/System.out( 1026): client handleTuneRes res=0 context=Thread[Thread-10,5,main]
I/System.out( 1026): dvbtAddPIDReq
I/System.out( 1026): SmsMdtv.addpid called
I/System.out( 1026): client handleAddPIDFilterRes res=0
I/System.out( 1026): SmsMdtv.getStatisticsExReq called
I/System.out( 1026): client handleDVBTStatisticsRes res=0
I/System.out( 1026): rfLocked =true
I/System.out( 1026): isDemodLocked =false
I/System.out( 1026): isExternalLnaOn =false
I/System.out( 1026): snr =0
I/System.out( 1026): rssi =-57
I/System.out( 1026): inBandPwr =-98
I/System.out( 1026): carrierOffset =0
I/System.out( 1026): ber =0
I/System.out( 1026): frequency =0
I/System.out( 1026): modemState =2
I/System.out( 1026): SmsMdtv.getReceptionQualityReq called


eclair$ cat /home/cidana/.android/adb_usb.ini 
0x955


TODO:
display problem
- debug in android source (need nvidia code), postBuffer

tuner integrate
- know what is what

opencore rmvb plugin
- know what is what
- testcase can't be run

simple ui dtv addon
- add interface for jni wrap

cmmb demo pack for dragontech
- need android version number

export LD_LIBRARY_PATH=/30g/donut/external/opencore-2.07/build_config/opencore_dynamic/build/installed_lib/linux

./pvplayer_engine_test -test 51 51 -source ../../../engines/player/test/data/test_m4v_amr.mp4 -logall


2009-12-15 10:53 
-------------------------------------------------
bin/linux/pvplayer_engine_test -test 51 51 -source ../../../engines/player/test/data/test_m4v_amr.mp4 -logall




lynn

There is a risk about simple ui which provided by xi'an team.
Since ui have used some android internal class, so these code must compile with android source.
If we cooperate with our clients and they don't provide they android source code (modified).
We will not managed to build the application.
You may create a jira item about this to let them know.



2009-12-14 10:07 
-------------------------------------------------
33830208-874

TODO:
dtv demo display problem on T20
siano tuner driver on T20
test cortex codec on T20
rmvb opencore integration
dvbt whole system run on linux



plug siano 1150 to vmware
[387951.208588] usb 2-1: new high speed USB device using ehci_hcd and address 34
[387951.490698] usb 2-1: configuration #1 chosen from 1 choice
[387952.502868] smscore_set_device_mode: error -2 loading firmware: sms1xxx-nova-b-dvbt-01.fw, trying again with default firmware
[387952.517759] smscore_set_device_mode: error -2 loading firmware: dvb_nova_12mhz_b0.inp
[387952.517800] smsusb_init_device: line: 378: smscore_start_device(...) failed
[387952.518181] smsusb_onresponse: line: 71: error, urb status -2, 0 bytes
[387952.518364] smsusb_onresponse: line: 71: error, urb status -2, 0 bytes
[387952.518398] smsusb_onresponse: line: 71: error, urb status -2, 0 bytes
[387952.518428] smsusb_onresponse: line: 71: error, urb status -2, 0 bytes
[387952.518458] smsusb_onresponse: line: 71: error, urb status -2, 0 bytes
[387952.518487] smsusb_onresponse: line: 71: error, urb status -2, 0 bytes
[387952.518517] smsusb_onresponse: line: 71: error, urb status -2, 0 bytes
[387952.518570] smsusb_onresponse: line: 71: error, urb status -2, 0 bytes
[387952.518614] smsusb_onresponse: line: 71: error, urb status -2, 0 bytes
[387952.518644] smsusb_onresponse: line: 71: error, urb status -2, 0 bytes
[387952.519030] smsusb: probe of 2-1:1.0 failed with error -2
[387952.519288] usbcore: registered new interface driver smsusb



D:\hostshare\android_opencore\opencore-2.02-donut-merged\fileformats\mp4\parser
D:\hostshare\android_opencore\opencore-2.02-donut-merged\nodes\pvmp4ffcomposernode
D:\hostshare\android_opencore\opencore-2.02-donut-merged\pvmi\recognizer\plugins\pvmp4ffrecognizer
D:\hostshare\android_opencore\opencore-2.02-donut-merged\modules\linux_mp4



D:\hostshare\android_opencore\opencore-2.02-donut-merged\fileformats\mp3\parser
D:\hostshare\android_opencore\opencore-2.02-donut-merged\nodes\pvmp3ffparsernode
D:\hostshare\android_opencore\opencore-2.02-donut-merged\pvmi\recognizer\plugins\pvmp3ffrecognizer

pvme_node_registry_populator.cpp
RegisterAllNodes
RegisterAllRecognizers

BUILD_RM_FF_PARSER_NODE
BUILD_RM_FF_REC


donut$ ls generic/system/lib/libomx*
generic/system/lib/libomx_aacdec_ali_sharedlibrary.so
generic/system/lib/libomx_aacdec_sharedlibrary.so
generic/system/lib/libomx_amrdec_sharedlibrary.so
generic/system/lib/libomx_amrenc_sharedlibrary.so
generic/system/lib/libomx_avcdec_sharedlibrary.so
generic/system/lib/libomx_cidana_avcdec_sharedlibrary.so
generic/system/lib/libomx_cidana_m4vdec_sharedlibrary.so
generic/system/lib/libomx_m4vdec_sharedlibrary.so
generic/system/lib/libomx_m4venc_sharedlibrary.so
generic/system/lib/libomx_mp3dec_ali_sharedlibrary.so
generic/system/lib/libomx_mp3dec_sharedlibrary.so
generic/system/lib/libomx_sharedlibrary.so


D:\hostshare\android_opencore\opencore-2.02-donut-merged\codecs_v2\audio\mp3\dec
D:\hostshare\android_opencore\opencore-2.02-donut-merged\codecs_v2\omx\omx_mp3


add undefined
<SOLVE> include add.h

git reset HEAD .

opencore_dynamic$ pwd
/30g/donut/external/opencore-2.02-donut-orig/build_config/opencore_dynamic
opencore_dynamic$ export LD_LIBRARY_PATH+=$PWD/build/installed_lib/linux/
opencore_dynamic$ ./build/bin/linux/pvme_test 

/30g/donut/external/opencore-2.02-donut-orig/build_config/opencore_dynamic/build/bin/linux


export LD_LIBRARY_PATH+=/30g/donut/external/opencore-2.07/build_config/opencore_dynamic/build/installed_lib/linux/

pvme, metadata engine

git branch -a


2009-12-11 10:02 
-------------------------------------------------

<6>[ 2553.020000] usb 1-1.5: new high speed USB device using tegra-ehci and address 6
<6>[ 2553.160000] usb 1-1.5: New USB device found, idVendor=187f, idProduct=0201
<6>[ 2553.160000] usb 1-1.5: New USB device strings: Mfr=1, Product=2, SerialNumber=0
<6>[ 2553.180000] usb 1-1.5: Product: Test EEPROM Product String
<6>[ 2553.180000] usb 1-1.5: Manufacturer: Test EEPROM Manufacturer String
<6>[ 2553.180000] usb 1-1.5: configuration #1 chosen from 1 choice

fisher
yuwf78

2009-12-10 10:05 
-------------------------------------------------
\\192.168.0.86\cidana\eclair\frameworks\base\core\java\com\android\internal\policy

Killed pm xxxx

aac
mp3

h264
m4v


USE_DYNAMIC_LOAD_OMX_COMPONENTS


int PlayerDriver::playerThread()
	OSCL_EXPORT_REF OMX_ERRORTYPE OMX_MasterInit()
		OSCL_DLL_ENTRY_POINT_DEFAULT _OMX_Init
			Mpeg4Register
				CidanaMpeg4Register

2009-12-9 10:02 
-------------------------------------------------
dvbt _AUDIO_ONLY

emulator -sysdir /home/cidana/android-sdk-linux/platforms/android-2.0/images -system /home/cidana/android-sdk-linux/platforms/android-2.0/images/system.img -ramdisk /home/cidana/android-sdk-linux/platforms/android-2.0/images/ramdisk.img -sdcard ~/sdcard.img -skin WVGA800

TODO:
opencore

eclair$ rm out/target/common/obj/APPS/CI_Android_dvbt_intermediates/* -r

undefined reference to `CI_Player_GetClipInfo'

git clone git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git


W/PlayerDriver(   31): Using generic video MIO
D/AudioSink(   31): bufferCount (4) is too small and increased to 12
W/MediaPlayer(  261): info/warning (1, 44)
I/MediaPlayer(  261): Info (1,44)
D/vp.VideoView(  261): video size=128x96
D/dalvikvm(   53): GC freed 7786 objects / 374440 bytes in 290ms
E/gralloc (   53): invalid gralloc handle (at 0x0)
I/ARMAssembler(   53): generated scanline__00000077:03010104_00000005_00000000 [ 28 ipp] (47 ins) at [0x40ebd0:0x40ec8c] in 5349031 ns




untar nc15.tar.gz

If your directory layout like this
$HOME/android src path/
$HOME/nc15

cd $HOME/android src path/
source build/envsetup.sh
mmm ../nc15

And adb install this apk to T20 board.
There will be a application named "HeiSa" apear.

Launch it then press the button named "rgb",  please let me know whether it crash in your place.
If not you will see a color change within a block.


rarHOME




cd $HOME/android src path/
source build/envsetup.sh
mmm ../nc15

consoleapk
$HOME/android src path/out/target/product/generic/system/app/nc15.apk ,

adb install out/target/product/generic/system/app/nc15.apk

iconapprgb

adb logcat crash


2009-12-8 10:01 
-------------------------------------------------
android create project -t 1 -k com.example.android.apis.graphics -a BitmapPixels -n BitmapPixels -p BitmapPixels


TODO:
codec -mfpu neon
opencore plugin
dvbt on 2.0
video render

jarsigner -verbose -verify generic/system/app/CI_Android_pmp.apk

\\192.168.0.86\cidana\cupcake\frameworks\base\media\jni
\\192.168.0.86\cidana\eclair\frameworks\base\media\jni

./adb kill-server
./adb devices
just need adb fork-server run by root


elad hi

Thanks for the useful information, now I get error message like this.

@target machine nVidia Tegra II
# cat /proc/version
Linux version 2.6.29-00117-g3a218ab-dirty (@CENT64-C04-33-1) (gcc version 4.4.0 (GCC) ) #1 SMP Mon Nov 23 19:23:08 UTC 2009

# lsmod
ar6000 221056 0 - Live 0xbf00f000
g_android 33208 2 - Live 0xbf000000

# insmod ./smsmdtv.ko
insmod: init_module './smsmdtv.ko' failed (Exec format error)

@linux host machine
v4l$ file smsmdtv.ko 
smsmdtv.ko: ELF 32-bit LSB relocatable, ARM, version 1, not stripped

I don't if this is caused by kernel header's difference. 

-----------------------------------
Let's put this problem to a faster way.
Since we are tring to make a DTV demo base on cidana's SW, nVidia's HW, and siano's tuner.
And wish this demo will be able to be present in 2010 CES January 7-10 .

Resources what we have is like this

nVidia, 
android 2.0 source code (I don't know if you modified some code)
linux kernel source code (I don't know if you modified some code)

siano, 
tuner kernel module source code

cidana,
T20 board
android 2.0 binary
kernel binary
siano kernel module binary

But we can't get siano's tuner driver load to kernel.
I don't know if siano and nVidia can cooperate on this issue, this may help accelerate our progress.

2009-12-7 10:03 
-------------------------------------------------
isurface prototype
android_media_MediaPlayer.cpp


T20, test-overlays fixed
# test-overlays
isurface = 0xac98
buffer = 0xb0367bab
address = 0x0


# insmod ./smsmdtv.ko
insmod: init_module './smsmdtv.ko' failed (Exec format error)

# cat /proc/version
Linux version 2.6.29-00117-g3a218ab-dirty (@CENT64-C04-33-1) (gcc version 4.4.0 (GCC) ) #1 SMP Mon Nov 23 19:23:08 UTC 2009

libc liblog libutils libcutils libui libdl libmedia libandroid_runtime aapt core ext framework

libdrm1 libvorbisidec
mmm external/opencore/
mmm external/cimpg_demux
mmm ~/cidana/mycomponent/

out/target/product/generic/obj/lib/crtbegin_dynamic.o
out/target/product/generic/obj/lib/crtend_android.o

framework_res (1.6 don't have this)
libbinder
rzhuo@nvidia.com

This trick works, now I can get adb connection established.

I don't know if you can support more on our cooperation on T20 platform.

If not please let lynn know about this.

Because of our target is get cidana's DTV(DVBT/ISDBT) player running on nVidia Tegra II.

So the next problem will be I can't get our DTV player (apk) installed in T20.

When I adb install xxx.apk, here comes a error

elad, hi

This is how I compile the siano kernel module.

download linux kernel from
http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.29.6.tar.bz2

~$ tar jxvf linux-2.6.29.6.tar.bz2 -C /home/cidana/kernel

~$ sudo mkdir /lib/modules/2.6.29-6
~$ sudo ln -s /home/cidana/kernel/linux-2.6.29.6 /lib/modules/2.6.29-6/build
~$ ls -l /lib/modules/2.6.29-6/
total 0
lrwxrwxrwx 1 root root 34 2009-12-07 11:30 build -> /home/cidana/kernel/linux-2.6.29.6

linux-2.6.29.6$ pwd
/home/cidana/kernel/linux-2.6.29.6
linux-2.6.29.6$ make menuconfig
#
# configuration written to .config
#
linux-2.6.29.6$ export PATH=/home/cidana/eclair/prebuilt/linux-x86/toolchain/arm-eabi-4.4.0/bin:$PATH
linux-2.6.29.6$ make ARCH=arm CROSS_COMPILE=arm-eabi-

v4l$ pwd
/home/cidana/siano/build_for_android/smshostlib/Platforms/Linux/kernel/v4l
v4l$ vi .version
v4l$ cat .version 
VERSION=2
PATCHLEVEL:=6
SUBLEVEL:=29
KERNELRELEASE:=2.6.29-6
v4l$ chmod +x scripts/*.pl
v4l$ make menuconfig
#
# configuration written to .config
#
deselect SDIO
v4l$ export PATH=/home/cidana/eclair/prebuilt/linux-x86/toolchain/arm-eabi-4.4.0/bin:$PATH
v4l$ make ARCH=arm CROSS_COMPILE=arm-eabi-
  LD [M]  /home/cidana/siano/build_for_android/smshostlib/Platforms/Linux/kernel/v4l/smsmdtv.o
  Building modules, stage 2.
  MODPOST 1 modules
  CC      /home/cidana/siano/build_for_android/smshostlib/Platforms/Linux/kernel/v4l/smsmdtv.mod.o
  LD [M]  /home/cidana/siano/build_for_android/smshostlib/Platforms/Linux/kernel/v4l/smsmdtv.ko
compile done


The reason I deselect SDIO is I greped around but can't find there symbols .
  CC [M]  /home/cidana/siano/build_for_android/smshostlib/Platforms/Linux/kernel/v4l/smssdio.o
/home/cidana/siano/build_for_android/smshostlib/Platforms/Linux/kernel/v4l/smssdio.c:52: error: 'SDIO_VENDOR_ID_SIANO' undeclared here (not in a function)
/home/cidana/siano/build_for_android/smshostlib/Platforms/Linux/kernel/v4l/smssdio.c:52: error: 'SDIO_DEVICE_ID_SIANO_STELLAR' undeclared here (not in a function)
/home/cidana/siano/build_for_android/smshostlib/Platforms/Linux/kernel/v4l/smssdio.c:54: error: 'SDIO_DEVICE_ID_SIANO_NOVA_A0' undeclared here (not in a function)
/home/cidana/siano/build_for_android/smshostlib/Platforms/Linux/kernel/v4l/smssdio.c:56: error: 'SDIO_DEVICE_ID_SIANO_NOVA_B0' undeclared here (not in a function)
/home/cidana/siano/build_for_android/smshostlib/Platforms/Linux/kernel/v4l/smssdio.c:58: error: 'SDIO_DEVICE_ID_SIANO_VEGA_A0' undeclared here (not in a function)
/home/cidana/siano/build_for_android/smshostlib/Platforms/Linux/kernel/v4l/smssdio.c:60: error: 'SDIO_DEVICE_ID_SIANO_VENICE' undeclared here (not in a function)




2009-12-4 10:44 
-------------------------------------------------
dalvik debug monitor
ddms


test1$ android create project -t 1 -k com.test -a Test1 -n test1 -p test1

test1$ adb install -r bin/test1-unsigned.apk 
69 KB/s (3400 bytes in 0.047s)
	pkg: /data/local/tmp/test1-unsigned.apk
Failure [INSTALL_PARSE_FAILED_NO_CERTIFICATES]

makesuper.sh

~% FILE=prog.tar.gz 
~% echo ${FILE%%.*} 
prog 
~% echo ${FILE%.*} 
prog.tar 
~% echo ${FILE#*.} 
tar.gz 
~% echo ${FILE##*.} 
gz 

$(basename $1)

ant install

agi nginx

/etc/init.d/nginx start
/etc/nginx/nginx.conf

enable file list
http{
	autoindex on;
}

/etc/init.d/nginx restart


threse is a problem parsing the package

http://192.168.0.86/

2009-12-3 09:56 
-------------------------------------------------

chown root.root com.cidana.jplayer.apk
chown system.system com.cidana.jplayer.apk

chown root.root com.home.apk

app_25   219   30    104008 19696 ffffffff afe0d9e4 S com.home

chmod 6 setuid, setgid
chmod 1 sticky

setuid/setgid don't have no effect on surfaceflinger access deny problem.
invoke ps you still got app_25 displayed as uid.


stephane, hi

I'm tring to get our DTV/PMP player work on Harmony board (which is running android 2.0).

Thanks for sending documents.

And I would like to let you know the problems which we have met here.

1. adb connection problem, and we can't debug our applications without this.

via usb port (type Mini-B)
I have tried on different computer and both windows and linux. 
adb could not detect the T20 device.
we are using android usb driver rev. 2

via WIFI 
export ADBHOST=xxx.xxx.xxx.xxx (which is T20's ip address)
I can got response from ping command, and T20 can access internet browse some webpage.
adb could not detect the T20 device too.

2. harmony_Eclair_Nov25.zip ?
You mentioned these stuff in README_FIRST_KT.TXT.
Where can I get this file, if you have weblink. Send it to me pls.

here is our problem with nVidia Tegra II


opencore
catch up the newest code
git checkout v2.06

make installclean


Lunch menu... pick a combo:
     1. generic-eng
     2. simulator
     3. aosp_emulator_us-eng
     4. aosp_emulator_eu-eng
     5. aosp_dream_us-userdebug
     6. aosp_dream_eu-userdebug
     7. aosp_dream_us-eng
     8. aosp_dream_eu-eng
     9. aosp_sapphire_us-userdebug
     10. aosp_sapphire_eu-userdebug
     11. aosp_sapphire_us-eng
     12. aosp_sapphire_eu-eng

make: *** No rule to make target `out/target/product/generic/obj/lib/libsgl.so', 
needed by `out/target/product/generic/obj/SHARED_LIBRARIES/libopencore_player_intermediates/LINKED/libopencore_player.so'.  Stop.

skia core lib rename 
eclair --> libskia
cupcake --> libsgl

rollback to eclair v2.02 (but libskia link changed)
git checkout korg/eclair


lunch -> 12 
lunch 12 
lunch aosp_sapphire_eu-eng 
choosecombo -> select the appropriate options 
make PRODUCT-aosp_sapphire_eu-eng 


2009-12-2 09:57 
-------------------------------------------------
system/core/include/arch/linux-arm/AndroidConfig.h
#define HAVE_ANDROID_OS 1

/home/cidana/eclair/prebuilt/linux-x86/toolchain/arm-eabi-4.4.0/bin
eclair use 4.4.0 gcc
kernel 2.6.29

chmod +x make_kconfig.pl make_makefile.pl make_myconfig.pl
export PATH=/home/cidana/eclair/prebuilt/linux-x86/toolchain/arm-eabi-4.4.0/bin:$PATH
make ARCH=arm CROSS_COMPILE=arm-eabi-

/home/cidana/siano/build_for_android/smshostlib/Platforms/Linux/kernel


                 from /home/cidana/siano/arm/smshostlib/Platforms/Linux/kernel/v4l/smscoreapi.c:24:
include/asm/processor_32.h: At top level:
include/asm/processor_32.h:608: error: conflicting types for 'cpuid'
include/asm/msr.h:248: error: previous definition of 'cpuid' was here
include/asm/msr.h:303: error: previous definition of 'cpuid_edx' was here


# insmod smsmdtv.ko default_mode=0 debug=3
insmod: init_module 'smsmdtv.ko' failed (Function not implemented)

TODO:
on released emulator
ndk projects
can't access surfaceflinger, because of permission check changed to by signment

on source built emulator
surfaceflinger crash when opencore player start playback



2009-12-1 10:03 
-------------------------------------------------

dotnet, jay mp4 playback abnomal in audio ?
<SOLVE>
remove special treate in audiotrack.cpp for 24kHz and 32kHz audio

android 2.0
audio playback is ok
isurface access will crash the system

set ADBHOST=192.168.0.84

:h filename-modixxxxxx
:!echo %:p
/30g/eclair/frameworks/base/core/java/android/content/pm/PackageParser.java 

TODO:
st demo xserver with framebuffer display
test apk on released emulator


out/host/linux-x86/framework/dumpkey.jar

java -jar out/host/linux-x86/framework/dumpkey.jar /home/cidana/30g/eclair/build/target/product/security/media.x509.pem 

2009-11-30 10:02
-------------------------------------------------

build/core/package.mk:39: *** android-cidana/CI_Android_Demo_pmp: Package modules may not define LOCAL_MODULE.  Stop.

out/target/common/obj/APPS/CI_Android_pmp_intermediates



This list is roughly based on the order in time, and may missed something

0. make android run on x86 (this may need a lot of effort)

1. java ui
dellmini demo (opencore api based)
dellmini demo (sdk jni wrapping based)
yuhua demo (blue skined ui)
simple ui demo (according to lynn's spec)

2. cidana sdk jni wrapping
cmmb sdk wrapping

3. isurface display solution demo code
nc15/jni

4. opencore plugin
audio
- aac
- mp3
video
- h.264
- mpeg4

/home/cidana/cupcake/prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1

ln -s  /home/cidana/crt0.o

st gtk

export DISPLAY=:0 
export TSLIB_TSDEVICE=/dev/event1 

mount /dev/mmcblk1p1 /mnt


gtk version
pkg-config --modversion gtk+-x11-2.0
pkg-config --modversion gtk+-2.0

TODO:
wma file playback crash
make audio track format correspoding with abi.formats ?


D/        ( 1021): [<<<<<<<<<<<CAudioTrack] audio track created
E/AudioFlinger(  554): not enough memory for AudioTrack size=1474624
D/MemoryDealer(  554):   AudioTrack (0x75280, size=1048576)
D/MemoryDealer(  554):     0: 000753a8 | 0x00000000 | 0x00100000 | F 
D/MemoryDealer(  554):   size allocated: 0 (0 KB)
E/AudioTrack( 1021): AudioFlinger could not create track, status: -12
D/        ( 1021): [<<<<<<<<<<<CAudioTrack] mAudioTrack set error

audio file can't play ? enable ELE_DEMUX in sdk_build/config 



mp3
D/        ( 1081): [<<<<<<<<<<<CAudioTrack] m_ABI dwFormatTag 0
D/        ( 1081): [<<<<<<<<<<<CAudioTrack] m_ABI dwChannels 2
D/        ( 1081): [<<<<<<<<<<<CAudioTrack] m_ABI dwBitsPerSample 16
D/        ( 1081): [<<<<<<<<<<<CAudioTrack] m_ABI dwSamplesPerFrame 1024
D/        ( 1081): [<<<<<<<<<<<CAudioTrack] !!!!!! m_dwFrameSize 4096
D/        ( 1081): [<<<<<<<<<<<CAudioTrack] m_ABI dwSamplesPerSec 44100
D/        ( 1081): [<<<<<<<<<<<CAudioTrack] !!!!!! m_dwFramesPerBlock 4
D/        ( 1081): [<<<<<<<<<<<CAudioTrack] m_dwBlocksInBuffer 10, m_BlockSize 16384, m_dwFrameSize 4096
D/        ( 1081): [<<<<<<<<<<<CAudioTrack] audioBufferSize 167936

dotnet
D/        ( 1181): [<<<<<<<<<<<CAudioTrack] m_ABI dwFormatTag 353
D/        ( 1181): [<<<<<<<<<<<CAudioTrack] m_ABI dwChannels 2
D/        ( 1181): [<<<<<<<<<<<CAudioTrack] m_ABI dwBitsPerSample 16
D/        ( 1181): [<<<<<<<<<<<CAudioTrack] m_ABI dwSamplesPerFrame 1024
D/        ( 1181): [<<<<<<<<<<<CAudioTrack] !!!!!! m_dwFrameSize 4096
D/        ( 1181): [<<<<<<<<<<<CAudioTrack] m_ABI dwSamplesPerSec 32000
D/        ( 1181): [<<<<<<<<<<<CAudioTrack] !!!!!! m_dwFramesPerBlock 3
D/        ( 1181): [<<<<<<<<<<<CAudioTrack] m_dwBlocksInBuffer 10, m_BlockSize 12288, m_dwFrameSize 4096




2009-11-27 10:02 
-------------------------------------------------
all version tar


2009-11-25 10:04 
-------------------------------------------------
permission
audiotrack

TODO:
google io flv audio abnormal

make libc libstdc++ libm


aapt


android-cidana/CI_Android_Demo_pmp/jni/gfxAndroid/3rdparty/linux/libwin32/inc/iviUnknwn.h:61: error: 'struct IUnknown' has virtual functions and accessible non-virtual destructor
android-cidana/CI_Android_Demo_pmp/jni/gfxAndroid/3rdparty/linux/libwin32/inc/iviUnknwn.h:98: error: 'struct IClassFactory' has virtual functions and accessible non-virtual destructor
make: *** [out/target/product/generic/obj/SHARED_LIBRARIES/libcidanavrp_intermediates/src/LibGfxPresent/dp.o] Error 1

eclair
build/core/config.mk:90:TARGET_ERROR_FLAGS := -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point
<SOLVE>
remove this -Werror=non-virtual-dtor

crt0.o copied

INSTALL_FAILED_OLDER_SDK
build/core/version_defaults.mk


make && cp sdk/cidana_sdk.a /home/cidana/android-cidana/CI_Android_Demo_pmp/jni/cidana_media_jni/

mmm android-cidana/CI_Android_Demo_pmp/ && adb install -r out/target/product/generic/system/app/CI_Android_pmp.apk

export ANDROID_PRODUCT_OUT=$PWD/out/target/product/generic/
ANDROID_PRODUCT_OUT=$PWD/out/target/product/generic/ ./out/host/linux-x86/bin/emulator &

W/PackageManager(   55): Unknown permission android.permission.media in package com.cidana.jplayer

		status = m_isurface->registerBuffers(buffers);

may have problem

2009-11-24 10:14
-------------------------------------------------
mechanism

keytool -genkey -alias anddev.keystore -keyalg RSA -validity 20000 -keystore keys/anddev.keystore 
jarsigner -verbose -keystore keys/anddev.keystore -signedjar AndOpenStreetMap_signed.apk AndOpenStreetMap.apk anddev.keystore 

keytool -genkey -alias cidana.keystore -keyalg RSA -validity 20000 -keystore keys/cidana.keystore
jarsigner -verbose -keystore /home/cidana/keytool/keys/cidana.keystore -signedjar pmp-debug_signed.apk bin/pmp-debug.apk /home/cidana/keytool/keys/cidana.keystore 

signed with cidana.pem(made by makekey.sh ~/keytool/), will not display on emulator

adb shell pm list permissions -s



2009-11-23
-------------------------------------------------
pack lib sample
/home/cidana/arm/mydroid/development/samples/SimpleJNI

1. siano tuner driver, live demo (liang jing has sent a mail titled "android on PXA95x")
	They have not sent any code/doc for now, as I know. 
	(may need to ask liang jing/fisher for detail)

2. nVidia T20 project
	isdbt, dvbt local file playback demo are ready (only for android 1.5/1.6)
	(may need to ask lynn for detail)

3. ST demo on Accordo III
	They may need linux demo later but I don't know the exactly time.
	As Dicky said this demo will integrate cmmb/pmp together, 
	which has cmmb local file playback function and pmp media playback function.
	(may need to ask ricky for detail)

4. figure out why our demo can't run on android 2.0 (prepare for T20 which is based on android 2.0)
	I'm download source code but the network is really lag.

	current issue:
	* pmp sdk, audio playback has memory allocate problem
	* simple ui display abnormal (ui shift to upper screen) on android 1.6 (I will ask xi'an ui team why)


2009-11-20
-------------------------------------------------
libcorecg
libsgl
libskiagl

crt0.o use 
/home/cidana/legacy/mydroid/prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/


this lib libcorecg is not necessary
don't touch the code

~$ grep MemoryHeapBase 16_rootfs/ -r
Binary file 16_rootfs/system/lib/libutils.so matches
Binary file 16_rootfs/system/lib/libcameraservice.so matches
Binary file 16_rootfs/system/lib/libmediaplayerservice.so matches
Binary file 16_rootfs/system/lib/libandroid_runtime.so matches
Binary file 16_rootfs/system/lib/libopencore_player.so matches
Binary file 16_rootfs/system/lib/libsurfaceflinger.so matches

~$ grep MemoryHeapBase 20_rootfs/ -r
Binary file 20_rootfs/system/lib/libcameraservice.so matches
Binary file 20_rootfs/system/lib/libbinder.so matches
Binary file 20_rootfs/system/lib/libmediaplayerservice.so matches
Binary file 20_rootfs/system/lib/libstagefright_omx.so matches
Binary file 20_rootfs/system/lib/libandroid_runtime.so matches
Binary file 20_rootfs/system/lib/libopencore_player.so matches
Binary file 20_rootfs/system/lib/libsurfaceflinger.so matches



~$ adb shell ls /system/lib | sort
browsertestplugin.so
hw
libagl.so
libandroid_runtime.so
libandroid_servers.so
libaudioflinger.so
libcameraservice.so
libc_debug.so
libcerttool_jni.so
libcorecg.so
libcrypto.so
libc.so
libctest.so
libcutils.so
libdl.so
libdrm1_jni.so
libdrm1.so
libdvm.so
libEGL.so
libemoji.so
libexif.so
libexpat.so
libFFTEm.so
libGLESv1_CM.so
libgtalk_jni.so
libhardware_legacy.so
libhardware.so
libicudata.so
libicui18n.so
libicuuc.so
libjni_latinime.so
libjni_pinyinime.so
liblog.so
libmedia_jni.so
libmediaplayerservice.so
libmedia.so
libm.so
libnativehelper.so
libnetutils.so
libomx_aacdec_sharedlibrary.so
libomx_amrdec_sharedlibrary.so
libomx_amrenc_sharedlibrary.so
libomx_avcdec_sharedlibrary.so
libomx_m4vdec_sharedlibrary.so
libomx_m4venc_sharedlibrary.so
libomx_mp3dec_sharedlibrary.so
libomx_sharedlibrary.so
libomx_wmadec_sharedlibrary.so
libomx_wmvdec_sharedlibrary.so
libopencore_author.so
libopencore_common.so
libopencore_downloadreg.so
libopencore_download.so
libopencore_mp4localreg.so
libopencore_mp4local.so
libopencore_net_support.so
libopencore_player.so
libopencore_rtspreg.so
libopencore_rtsp.so
libpagemap.so
libpixelflinger.so
libpvasfcommon.so
libpvasflocalpbreg.so
libpvasflocalpb.so
libreference-cdma-sms.so
libreference-ril.so
libril.so
libsgl.so
libskiagl.so
libsonivox.so
libsoundpool.so
libsqlite.so
libsrec_jni.so
libssl.so
libstdc++.so
libsurfaceflinger.so
libsystem_server.so
libsysutils.so
libthread_db.so
libttspico.so
libttssynthproxy.so
libui.so
libutils.so
libvorbisidec.so
libwbxml_jni.so
libwbxml.so
libwebcore.so
libwnndict.so
libWnnEngDic.so
libWnnJpnDic.so
libwpa_client.so
libxml2wbxml.so
libz.so

#define dperr(...) fprintf(stderr, ##__VA_ARGS)
#define dp(fmt, arg...) printf(fmt, ##arg)


__BASE_FILE__ 
__cplusplus c++
__DATE__ 
__FILE__ 
__func__ __FUNCTION____FUNCTION__GNU
__TIME__ 
__LINE__
 __VERSION__ gcc
 



2009-11-19
-------------------------------------------------

E/AudioTrack(  833): AudioFlinger could not create track, status: -12
D/        (  833): mAudioTrack set error


cupcake$ tapas 


crash problem:
	audio create vr
	audio track can't malloc

dotnetpromo_v8_384k.wmv, audio abnormal



isdbt:
	PlaybackEngine.cpp:2265
		Unknown event type



2009-11-18
-------------------------------------------------
1010

c-a c-S
c-a c-i
c-a c-c
c-a c-X

android-2.0 don't have libcorecg.so


root     1     0     296   204   c0093b98 0000c93c S /init
root     2     0     0     0     c004bb50 00000000 S kthreadd
root     3     2     0     0     c003d428 00000000 S ksoftirqd/0
root     4     2     0     0     c00487a4 00000000 S events/0
root     5     2     0     0     c00487a4 00000000 S khelper
root     6     2     0     0     c00487a4 00000000 S suspend
root     7     2     0     0     c00487a4 00000000 S kblockd/0
root     8     2     0     0     c00487a4 00000000 S cqueue
root     9     2     0     0     c0174bf4 00000000 S kseriod
root     10    2     0     0     c00487a4 00000000 S kmmcd
root     13    2     0     0     c0071d74 00000000 D kswapd0
root     14    2     0     0     c00487a4 00000000 S aio/0
root     21    2     0     0     c01723f4 00000000 S mtdblockd
root     22    2     0     0     c00487a4 00000000 S hid_compat
root     23    2     0     0     c0187478 00000000 S mmcqd
root     24    2     0     0     c00487a4 00000000 S rpciod/0
root     25    1     728   236   c014c8dc afe0c7bc S /system/bin/sh
system   26    1     796   244   c0193774 afe0ca5c S /system/bin/servicemanager
root     27    1     832   340   c0093b98 afe0cb84 S /system/bin/vold
root     28    1     668   292   c019f514 afe0d3ec S /system/bin/debuggerd
radio    29    1     5428  496   ffffffff afe0d0cc S /system/bin/rild
root     30    1     79980 12076 c0093b98 afe0cb84 S zygote
media    31    1     22184 3112  ffffffff afe0ca5c S /system/bin/mediaserver
root     32    1     784   284   c02023c8 afe0c7bc S /system/bin/installd
keystore 33    1     1616  380   c019f514 afe0d3ec S /system/bin/keystore
root     34    1     728   240   c003b100 afe0d68c S /system/bin/sh
root     35    1     1032  528   c00b1308 afe0d7dc S /system/bin/qemud
root     37    1     4472  260   ffffffff 0000eca4 S /sbin/adbd
root     44    34    780   280   c02023c8 afe0c7bc S /system/bin/qemu-props
system   59    30    145876 19308 ffffffff afe0ca5c S system_server
app_1    112   30    107848 12780 ffffffff afe0d9e4 S com.android.inputmethod.pinyin
radio    114   30    119836 13576 ffffffff afe0d9e4 S com.android.phone
app_1    137   30    121864 16328 ffffffff afe0d9e4 S android.process.acore
app_14   156   30    100884 11712 ffffffff afe0d9e4 S com.android.alarmclock
app_0    168   30    111488 11796 ffffffff afe0d9e4 S com.android.mms
app_9    189   30    107024 13200 ffffffff afe0d9e4 S android.process.media
app_21   211   30    103976 12228 ffffffff afe0d9e4 S com.android.email
app_9    230   30    126192 14160 ffffffff afe0d9e4 S com.android.camera
root     255   2     0     0     c0068318 00000000 S pdflush
root     261   37    728   324   c003b100 afe0d68c S /system/bin/sh
root     262   2     0     0     c0068318 00000000 S pdflush


* you may need there stuff
android-sdk (we are using v1.5, v1.6)
http://androidappdocs.appspot.com/sdk/index.html

android-ndk (we are using v1.6 jni example included)
http://androidappdocs.appspot.com/sdk/ndk/1.6_r1/index.html

android source code github (not necessary, just FYI)
http://android.git.kernel.org/


* steps you need to do
compile your code by using android prebuilt toolchain 4.2.1
	(our case: android-ndk-1.6_r1/build/prebuilt/linux-x86/arm-eabi-4.2.1/bin)

write jni code which will be called by java app
write java app
	(have a look at android-ndk-1.6_r1/apps/hello-jni)

test your code
	(run android-sdk-linux/tools/emulator to test your code)

* got problem ? check it out, there web links
http://androidappdocs.appspot.com/guide/index.html
http://groups.google.com/groups/search?q=android&qt_s=Search+Groups



2009-11-17 
-------------------------------------------------
logcat is visible to sdk and vr now.

cd /home/cidana/android-ndk-1.6_r1/apps/
mkdir isdbt
cd isdbt
android create project -t 1 -k com.cidana.jplayer -a MediaPlayerActivity -n isdbt -p project
cp ../pmp/Application.mk
modify APP_MODULE to xxx
modify AndroidManifest.xml, add surfaceflinger access permission

mkdir jni
cp -r isdbt_cidana_media_jni/ /home/cidana/android-ndk-1.6_r1/apps/isdbt/project/jni/

cidana/media/java	media_jni
com/cidana/jplayer/java		.MFS


/home/cidana/android-ndk-1.6_r1/apps/pmp/project


sdk path
/home/cidana/hostshare/sdk_pmp/System.CidanaSDK_android/trunk/build/android_arm
/home/cidana/hostshare/sdk_isdbt/trunk_of_isdbt/build/android_arm
/home/cidana/hostshare/sdk_cmmb/SDK/Embedded/embedded_sdk/release/TDMB_PMP_SDK/build_android_arm/sdk_linux
/home/cidana/hostshare/sdk_dvbt/CI_Playback_SDK_android/Embedded/embedded_sdk/release/SDK/build_android_arm/sdk_linux



D:\hostshare\sdk_pmp\System.CidanaSDK_android\trunk
D:\hostshare\sdk_isdbt\trunk_of_isdbt
D:\hostshare\sdk_cmmb\SDK\Embedded\embedded_sdk\release\TDMB_PMP_SDK\build_android_arm\sdk_linux
D:\hostshare\sdk_dvbt\CI_Playback_SDK_android\Embedded\embedded_sdk\release\SDK\build_android_arm\sdk_linux

TODO:
	investigate AudioTrack stop problem



pmp , switch crash
cmmb, enddraw crash


2009-11-16
-------------------------------------------------
android ndk host-setup.sh

Line 119 reads: 
    if [ "$result" == "Pass" ] ; then 

I believe it should read: 
    if [ "$result" = "Pass" ] ; then 

BUILD_TINY_ANDROID
include $(BUILD_STATIC_LIBRARY)
/home/cidana/arm/mydroid/frameworks/base/libs/ui/Android.mk
/home/cidana/arm/mydroid/frameworks/base/media/libmedia/Android.mk
/home/cidana/arm/mydroid/system/core/libpixelflinger/Android.mk


mm clean will clean everything
ophone don't have ISurface::BufferHeap


TODO: 
add timed log to vr
fix vr close crash problem
test other sdk with ndk

2009-11-13
-------------------------------------------------
sign apk build by ndk ant\
/home/cidana/android-ndk-1.6_r1/apps/pmp/project/bin/pmp-debug.apk \
/home/cidana/android-ndk-1.6_r1/apps/pmp/project/bin/super.apk
*/

keytool
jarsigner
.keystore
.key?

signapk.jar
.x509.pem
.pk8

zipalign 

<USE THIS ONE>
java -jar out/host/linux-x86/framework/signapk.jar \
build/target/product/security/platform.x509.pem \
build/target/product/security/platform.pk8 \
/home/cidana/android-ndk-1.6_r1/apps/pmp/project/bin/pmp-debug.apk \
/home/cidana/android-ndk-1.6_r1/apps/pmp/project/bin/super.apk

out/target/product/generic/obj/APPS/HelloAndroid_intermediates/package.apk.unsigned \
out/target/product/generic/obj/APPS/HelloAndroid_intermediates/package.apk.signed



/*
java -jar out/host/linux-x86/framework/signapk.jar \
build/target/product/security/testkey.x509.pem \
build/target/product/security/testkey.pk8 \
/home/cidana/android-ndk-1.6_r1/apps/pmp/project/bin/pmp-debug.apk \
/home/cidana/android-ndk-1.6_r1/apps/pmp/project/bin/super.apk
*/

<USE THIS ONE>
java -jar out/host/linux-x86/framework/signapk.jar \
build/target/product/security/platform.x509.pem \
build/target/product/security/platform.pk8 \
/home/cidana/android-ndk-1.6_r1/apps/pmp/project/bin/pmp-debug.apk \
/home/cidana/android-ndk-1.6_r1/apps/pmp/project/bin/super.apk

out/target/product/generic/obj/APPS/HelloAndroid_intermediates/package.apk.unsigned \
out/target/product/generic/obj/APPS/HelloAndroid_intermediates/package.apk.signed



/home/cidana/arm/mydroid/build/target/product/security

TODO:
link cidana jni lib with ophone dumped rootfs /system/lib

blank screen
no display, maybe demux can't find

ophone rootfs
drwxr-xr-x root     root              2000-01-02 02:34 Linux
lrwxrwxrwx root     root              2000-01-02 02:34 bin -> /opl/telephony/bin
lrwxrwxrwx root     root              2000-01-02 02:34 usr -> /opl/telephony/usr
lrwxrwxrwx root     root              2000-01-02 02:34 lib -> /opl/telephony/lib
drwxrwxrwt root     root              2000-01-02 08:09 tmp
drwxrwxrwt root     root              2000-01-02 02:35 sqlite_stmt_journals
drwxrwx--- system   cache             2009-11-08 08:30 cache
drwxr-xr-x root     root              2009-08-03 12:25 opl
lrwxrwxrwx root     root              2000-01-02 02:34 System -> /system
drwxrwxrwx system   system            2000-01-01 08:00 local
drwxrwxrwx system   system            1970-01-01 08:00 sdcard
drwxr-xr-x root     root              1970-01-01 08:00 d
lrwxrwxrwx root     root              2000-01-02 02:34 etc -> /system/etc
drwxr-xr-x root     root              1970-01-01 08:00 sys
dr-xr-xr-x root     root              1970-01-01 08:00 proc
drwxr-xr-x root     root              2009-07-27 17:39 system
-rwxr-x--- root     root        10805 1970-01-01 08:00 init.rc
-rw-r--r-- root     root           93 1970-01-01 08:00 default.prop
drwxr-x--- root     root              1970-01-01 08:00 sbin
drwxrwx--x system   system            2009-11-08 08:30 data
-rwxr-x--- root     root       119204 1970-01-01 08:00 init
-rwxr-x--- root     root         2171 1970-01-01 08:00 init.goldfish.rc
drwx------ root     root              1970-01-01 08:00 root
drwxr-xr-x root     root              2000-01-02 02:34 dev

Linux opl local d sbin data root


ophone_rootfs$ adb shell cat /proc/cpuinfo
Processor	: XScale-V3 based processor rev 8 (v5l)
BogoMIPS	: 155.87
Features	: swp half thumb fastmult edsp iwmmxt 
CPU implementer	: 0x69
CPU architecture: 5TE
CPU variant	: 0x0
CPU part	: 0x683
CPU revision	: 8
Cache type	: undefined 5
Cache clean	: undefined 5
Cache lockdown	: undefined 5
Cache format	: Harvard
I size		: 32768
I assoc		: 4
I line length	: 32
I sets		: 256
D size		: 32768
D assoc		: 4
D line length	: 32
D sets		: 256

Hardware	: Jadespring
Revision	: 0002
Serial		: 0000000000000000

ophone_rootfs$ adb shell cat /proc/devices
Character devices:
  1 mem
  4 /dev/vc/0
  4 tty
  4 ttyS
  5 /dev/tty
  5 /dev/console
  5 /dev/ptmx
  7 vcs
 10 misc
 13 input
 14 sound
 29 fb
 81 video4linux
 89 i2c
 90 mtd
 96 fxmfg_gsensor
 99 innodev
116 alsa
128 ptm
136 pts
190 Fxmfg_mtv
216 rfcomm
237 hwmap
247 cidatatty
248 cctdatadev
253 sensors
254 rtc

Block devices:
 31 mtdblock
179 mmc



2009-11-12
-------------------------------------------------
sudo ifconfig usb0 192.168.100.1
export ADBHOST=192.168.100.2
adb kill-server

ophone sdk version #2

default android 1.5 sdk version #3

adb push via usb is very slow

D/dalvikvm( 2910): Trying to load lib /system/lib/libcidana_media_jni_pmp.so 0x434add08
I/dalvikvm( 2910): Unable to dlopen(/system/lib/libcidana_media_jni_pmp.so): Cannot find library
W/dalvikvm( 2910): Exception Ljava/lang/UnsatisfiedLinkError; thrown during Lcidana/media/MediaPlayer;.<clinit>
<SOLVE>
libhardware, libhardware_legcy cause load

/home/cidana/arm/mydroid/generic/system/lib/libui.so: undefined reference to `acquire_wake_lock'
/home/cidana/arm/mydroid/generic/system/lib/libui.so: undefined reference to `hw_get_module'
/home/cidana/arm/mydroid/generic/system/lib/libui.so: undefined reference to `release_wake_lock'
/home/cidana/arm/mydroid/generic/system/lib/libpixelflinger.so: undefined reference to `qemu_add_mapping'

0x434edd08



2009-11-11
-------------------------------------------------
android list
emulator -avd avd1
adb shell mount -o remount rw /system
adb install -r out/target/product/generic/obj/APPS/CI_Android_pmp_intermediates/package.apk
adb push generic/system/lib/libcidana_media_jni_pmp.so /system/lib
adb push generic/system/lib/libcidanavrp.so /system/lib


mydroid$ adb install -r out/target/product/generic/obj/APPS/CI_Android_pmp_intermediates/package.apk
1434 KB/s (190828 bytes in 0.129s)
	pkg: /data/local/tmp/package.apk
Failure [INSTALL_PARSE_FAILED_INCONSISTENT_CERTIFICATES]

<SOLVE>, uninstall apk from setting page, then install the package again.
because of same package has been installed with differcent signment.

D/dalvikvm(  751): Trying to load lib /system/lib/libcidana_media_jni_pmp.so 0x43597fc8
I/dalvikvm(  751): Unable to dlopen(/system/lib/libcidana_media_jni_pmp.so): Cannot find library
W/dalvikvm(  751): Exception Ljava/lang/UnsatisfiedLinkError; thrown during Lcidana/media/MediaPlayer;.<clinit>
D/AndroidRuntime(  751): Shutting down VM
W/dalvikvm(  751): threadid=3: thread exiting with uncaught exception (group=0x4000fe70)
E/AndroidRuntime(  751): Uncaught handler: thread main exiting due to uncaught exception
E/AndroidRuntime(  751): java.lang.ExceptionInInitializerError

tmp$ android create project --target 1 --name ugly_ui --path ugly_ui --activity MediaPlayerActivity --package com.cidana.jplayer
Created project directory: ugly_ui
Created directory /home/cidana/tmp/ugly_ui/src/com/cidana/jplayer
Added file ugly_ui/src/com/cidana/jplayer/MediaPlayerActivity.java
Created directory /home/cidana/tmp/ugly_ui/res
Created directory /home/cidana/tmp/ugly_ui/bin
Created directory /home/cidana/tmp/ugly_ui/libs
Created directory /home/cidana/tmp/ugly_ui/res/values
Added file ugly_ui/res/values/strings.xml
Created directory /home/cidana/tmp/ugly_ui/res/layout
Added file ugly_ui/res/layout/main.xml
Added file ugly_ui/AndroidManifest.xml
Added file ugly_ui/build.xml



2009-11-10
-------------------------------------------------
bml


nascape
git clone git://git.webvm.net/npsimple
agi xulrunner-dev libwebkit-1.0-1
INCS = -I/usr/include/xulrunner-1.9.0.15/stable -I/usr/include/nspr

mkdir .mozilla/plugins
ln -s /home/cidana/tmp/npsimple/npsimple.so

click call foo()
<log>
npsimple$ npsimple: getvalue - scriptable object
npsimple: getvalue - scriptable object
npsimple: hasProperty
npsimple: hasMethod
npsimple: hasProperty
npsimple: hasMethod
npsimple: hasProperty
npsimple: hasMethod
npsimple: invoke
npsimple: invokeDefault

emulator -avd avd15 -sdcard arm/mydroid/generic/sdcard.img

Don't forget the command "man touch", 
or the obligatory "unzip; strip; touch; finger; mount; fsck; more; yes; unmount; sleep"

for cmd in sed grep cat find telnet init exit ; do echo -n $cmd= ; grep -c "^$cmd " ~/.bash_history; done

2009-11-9
-------------------------------------------------
make verbose V=1

android ndk, pack .so file to lib/armeabi/libxxx.so

libcidana_media_jni_pmp compile ok in ndk.

CI_android_demo can't be compiled by eclipse


2009-11-6
-------------------------------------------------
connection refused by the server OPTIONS request failed
local svn-server can't connected, auto detect dns server, don't use your manually set one.

http://mirror.lupaworld.com/ubuntu/releases/hardy/ubuntu-8.04.3-desktop-i386.iso.zsync

http://www.52rd.com/Blog/Archive_Thread.asp?SID=17459

pthread_exit

pthread_cleanup_push(pthread_mutex_unlock, (void *) &mut);
pthread_mutex_lock(&mut);
/* do some work */
pthread_mutex_unlock(&mut);
pthread_cleanup_pop(0);


{ int oldtype;
 pthread_setcanceltype(PTHREAD_CANCEL_DEFERRED, &oldtype);
 pthread_cleanup_push(routine, arg);
 ...
 pthread_cleanup_pop(execute);
 pthread_setcanceltype(oldtype, NULL);
 }

void pthread_exit(void *retval) 
int pthread_join(pthread_t th, void **thread_return)
int pthread_detach(pthread_t th)

http://hi.baidu.com/l1l1888/blog/item/68e8f400d823bf86e850cdc0.html

pthread_once_t once = PTHREAD_ONCE_INIT;

void once_run(void)
{
        cout<<"once_run in thread "<<(unsigned int )pthread_self()<<endl;
}

void * child1(void * arg)
{
        pthread_t tid =pthread_self();
        cout<<"thread "<<(unsigned int )tid<<" enter"<<endl;
        pthread_once(&once,once_run);
        cout<<"thread "<<tid<<" return"<<endl;
}


void * child2(void * arg)
{
        pthread_t tid =pthread_self();
        cout<<"thread "<<(unsigned int )tid<<" enter"<<endl;
        pthread_once(&once,once_run);
        cout<<"thread "<<tid<<" return"<<endl;
}

int main(void)
{
        pthread_t tid1,tid2;
        cout<<"hello"<<endl;
        pthread_create(&tid1,NULL,child1,NULL);
        pthread_create(&tid2,NULL,child2,NULL);
        sleep(10);
        cout<<"main thread exit"<<endl;
        return 0;

}

http://hi.baidu.com/zdtracy/blog/item/7ddc601cd7c9a58287d6b6bf.html
pthread_kill

http://www.ibm.com/developerworks/cn/linux/thread/posix_threadapi/part1/
pthread_cancel
pthread_testcancel

http://www.ibm.com/developerworks/cn/linux/thread/posix_threadapi/part2/
pthread_key_create  
pthread_key_delete 
pthread_getspecific  
pthread_setspecific 

http://www.ibm.com/developerworks/cn/linux/thread/posix_threadapi/part3/
int pthread_mutex_lock(pthread_mutex_t *mutex)
int pthread_mutex_unlock(pthread_mutex_t *mutex)
int pthread_mutex_trylock(pthread_mutex_t *mutex)

int pthread_cond_wait(pthread_cond_t *cond, pthread_mutex_t *mutex)
int pthread_cond_timedwait(pthread_cond_t *cond, pthread_mutex_t *mutex, const struct timespec *abstime)

sem_wait()""
sem_post()POSIXAPI

int sem_post(sem_t * sem)
int sem_wait(sem_t * sem)
int sem_trywait(sem_t * sem)
int sem_getvalue(sem_t * sem, int * sval)


2009-11-5
-------------------------------------------------
VR
ndk, jni, apk + so
pmp, test audio work fine ?, wmv crash ?, swtich media crash ?
dvbt, need another EPG lib and TAL lib

freescale i.mx51 android
https://www.freescale.com/cgi/go/212959795

2009-11-4
-------------------------------------------------
Here are the PMP formats we needs support for PMP demo in Android. 

File Format : 
mp4, 
wmv, 
wma, 
mp3, 
3gp, 
aac, 
avi, 
xVid, 
Divx, 
rm, 
rmvb

Codecs: 
MPEG4 decoder, 
H.264 decoder, 
WMV decoder,
MP3 decoder, 
HE-AAC V2 decoder (AAC-LC and AAC-SBR), 
WMA decoder, 
Real Video, 
Real Audio

TODO:
ask leal for presentation
bug fix, switch to next media crash 

/home/cidana/arm/mydroid/

/home/cidana/arm/mydroid/bionic/libc/arch-arm/include
/home/cidana/arm/mydroid/bionic/libc/include
/home/cidana/arm/mydroid/bionic/libc/kernel/common
/home/cidana/arm/mydroid/bionic/libc/kernel/arch-arm
/home/cidana/arm/mydroid/bionic/libm/include


bionic/libc/arch-x86/include
bionic/libc/arch-arm/include
bionic/libc/include
bionic/libc/kernel/common
bionic/libc/kernel/arch-arm
bionic/libc/kernel/arch-x86
bionic/libm/include

undefined stderr ?  use gcc not g++ compile the c source code

2009-11-3
-------------------------------------------------
cmmb done, gfx_bridge need modify ?

2009-11-2
-------------------------------------------------
isdbt done

app crash ?

clean-pmp_CI_Android

make clean-CI_Android_pmp clean-libcidanavrp clean-libcidana_media_jni_pmp
make clean-CI_Android_isdbt clean-libcidanavrp clean-libcidana_media_jni_isdbt
make clean-CI_Android_cmmb clean-libcidanavrp clean-libcidana_media_jni_cmmb
make clean-CI_Android_dvbt clean-libcidanavrp clean-libcidana_media_jni_dvbt

TODO:

cmmb again with vr


2009-10-30
-------------------------------------------------
gvim pmp_CI_Android_Demo/src/cidana/media/MediaPlayer.java \
cmmb_CI_Android_Demo/src/cidana/media/MediaPlayer.java \
dvbt_CI_Android_Demo/src/cidana/media/MediaPlayer.java \
isdbt_CI_Android_Demo/src/cidana/media/MediaPlayer.java

gvim pmp_cidana_media_jni/cidana_media_Mediaplayer.cpp \
cmmb_cidana_media_jni/cidana_media_Mediaplayer.cpp \
dvbt_cidana_media_jni/cidana_media_Mediaplayer.cpp \
isdbt_cidana_media_jni/cidana_media_Mediaplayer.cpp

crash with link problem, try clean java code and build again

REMEMBER:
cmmb_sdk --> new

pmp
cmmb
simple_ui backup works, but may have /sdcard/log.txt there

dvbt dlopen, Open error
isdbt H264 decode return wired

TODO:
try ndk ?
use surface flinger, andemo test sdk first. then port them to isurface and vr.
if dvbt still not work with vr, try static link with it


2009-10-29
-------------------------------------------------
dlopen

generic/obj/STATIC_LIBRARIES/libdl_intermediates/libdl.a
out/target/product/generic/obj/APPS/CI_Android_dvbt_intermediates/package.apk
out/target/product/generic/obj/APPS/CI_Android_pmp_intermediates/package.apk
out/target/product/generic/obj/APPS/CI_Android_isdbt_intermediates/package.apk
link android vr present to dl,  just add libdl to link line of Android.mk

src
makefile
extern lib

vr headers
vr android

jni
java ui

TODO: 
dvbt vr problem
isdbt continue


2009-10-27
-------------------------------------------------
resource consume

CPPFLAGS += -fno-rtti -fomit-frame-pointer -fno-exceptions 

D:\hostshare\sdk_dvbt\DVBT_LINUX\linux_ui\output\dvbt\General

TODO: integrate isurface

modify alsa m_volume static
ret = CI_Player_SetConfig(ciplayer.pplayer, CI_CFG_AUDIO_VOLUME2, &volume);

android make sdcard
mksdcard 1024M mysdcard

2009-10-26
-------------------------------------------------
kernel$ find drivers/ -name cartesio* 
drivers/input/keyboard/cartesio-keypad.c
drivers/input/touchscreen/cartesio_ts.c
drivers/mtd/nand/cartesio_nand.c
drivers/net/can/ccan/cartesio_can.c

mknod /dev/input/event0 c 13 64

IRQ 19/MSP: IRQF_DISABLED is not guaranteed on shared IRQs

framebuffer audio icon
Animated GIF Banner Maker	png->gif
Total Video Converter	gif->avi

TODO:
android solution

# fbset -depth 32
# cat logo2.raw  > /dev/fb0

2009-10-23
-------------------------------------------------
libpam

dvbt phase 1
cmmb rip rabish

TODO:
mpg2 vdec
mpg2 demux
surface


2009-10-15
-------------------------------------------------
65125945
~$ inotifywait -m -r /sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1
Setting up watches.  Beware: since -r was given, this may take a while!
Watches established.
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/usb_endpoint/ DELETE_SELF 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/usb_endpoint/ IGNORED 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/host20/ DELETE_SELF 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/host20/ IGNORED 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/usb_endpoint/ DELETE_SELF 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/usb_endpoint/ IGNORED

/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/ OPEN idVendor
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/ ACCESS idVendor
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/ CLOSE_NOWRITE,CLOSE idVendor
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/ OPEN dev
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/ ACCESS dev
...
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/usb_endpoint/usbdev2.19_ep81/ IGNORED 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/usb_endpoint/usbdev2.19_ep02/ DELETE_SELF 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/usb_endpoint/usbdev2.19_ep02/ IGNORED 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/host20/target20:0:0/ DELETE_SELF 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/host20/target20:0:0/ IGNORED

/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/ DELETE_SELF 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/ IGNORED 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/usb_endpoint/usbdev2.19_ep00/ DELETE_SELF 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/usb_endpoint/usbdev2.19_ep00/ IGNORED 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/ DELETE_SELF 
/sys/devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/ IGNORED 

fdisk /dev/sdb, partitation 1, don't set boot
mke2fs /dev/sdb1
mount sdb1
grub-install
cp backup files
fdisk set boot
The file /flash/boot/grub/stage1 not read correctly.

202.96.209.133

backup_andr_sd$ sudo grub-install --recheck /dev/sdb
Probing devices to guess BIOS drives. This may take a long time.
Searching for GRUB installation directory ... found: /boot/grub
Installing GRUB to /dev/sdb as (hd1)...
Installation finished. No error reported.
This is the contents of the device map /boot/grub/device.map.
Check if this is correct or not. If any of the lines is incorrect,
fix it and re-run the script `grub-install'.

(fd0)	/dev/fd0
(hd0)	/dev/sda
(hd1)	/dev/sdb

console=0

sudo cp -r cache  d  data  default.prop  dev  etc  init  init.eee_701.rc  init.goldfish.rc  init.rc  lib  proc  sbin  sdcard  sqlite_stmt_journals  sys  system  yylog /flash

out/target/product/generic/system/lib/libcidana_media_jni_cmmb.so
out/target/product/generic/system/app/CI_Android_cmmb.apk

out/target/product/generic/system/lib/libcidanavrp.so
out/target/product/generic/system/lib/libcidana_media_jni_pmp.so
out/target/product/generic/system/app/CI_Android_pmp.apk

adb install -r 


i.mx 51
sudo dd if=mx51_TO2_babbage_redboot-no-padding.bin of=/dev/sdb bs=1K seek=1
sudo dd if=zImage of=/dev/sdb bs=1M seek=1 
sudo fdisk /dev/sdb
u --> sector
n --> new, start from 20480 sector (10M)
sudo mkfs.vfat /dev/sdb1 
sudo mkfs.ext3 /dev/sdb2 

mount -t ext3 /dev/sdb2 /flash
tar xzvf android_fs.tar.gz -C /flash
cd android_fs
mv * ..

connect usb from OTG cable, adb is ready now
on vmware

W/dalvikvm(  741): Exception Ljava/lang/UnsatisfiedLinkError; thrown during Lcidana/media/MediaPlayer;.<clinit>
recheck your so files, make sure they are there

20
11
16
13
12

cmmb/pmp porting (android)
cgmobile demo support (android)
java ui integrate support (android)
vrpresent integrate (android/linux)
st2062 demo support (linux)


2009-10-14
-------------------------------------------------
array, stacks, sets, queues, dequeues, FIFO queues


87/936
agi ruby1.9 libruby1.9 libreadline-ruby1.9 irb1.9


inotify not work on /sys (sysfs)
use udev instead

git://git.kernel.org/pub/scm/linux/hotplug/udev.git

udevmonitor will print the received events for:
UDEV the event which udev sends out after rule processing
UEVENT the kernel uevent

UEVENT[1255506296.388938] add      /devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1 (usb)
UEVENT[1255506296.389046] add      /devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/usb_endpoint/usbdev2.11_ep00 (usb_endpoint)
UDEV  [1255506296.429018] add      /devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1 (usb)
UEVENT[1255506296.433970] add      /devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0 (usb)
UDEV  [1255506296.451092] add      /devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/usb_endpoint/usbdev2.11_ep00 (usb_endpoint)
UEVENT[1255506296.453200] add      /class/scsi_host/host12 (scsi_host)
UEVENT[1255506296.465282] add      /devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/usb_endpoint/usbdev2.11_ep81 (usb_endpoint)
UEVENT[1255506296.465333] add      /devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/usb_endpoint/usbdev2.11_ep02 (usb_endpoint)
UDEV  [1255506296.534205] add      /devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0 (usb)
UDEV  [1255506296.538458] add      /class/scsi_host/host12 (scsi_host)
UDEV  [1255506296.580083] add      /devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/usb_endpoint/usbdev2.11_ep81 (usb_endpoint)
UDEV  [1255506296.588632] add      /devices/pci0000:00/0000:00:11.0/0000:02:03.0/usb2/2-1/2-1:1.0/usb_endpoint/usbdev2.11_ep02 (usb_endpoint)

ST don't have this
/var/log/messages
has usb sdb1 plugin event

/proc/sys/kernel/hotplug

/etc/udev/
/etc/hotplug/

TODO:
system polling ?

2009-10-13
-------------------------------------------------
google jam

EZ-Sokoban solve by using ruby

read input file contents
build model
solve model
output

init Matrix

take one step
stack into
back stack

update Matrix
steps counter


2009-10-10
-------------------------------------------------
ST kernel 2.6.28

mmc1: host does not support reading read-only switch. assuming write-enable.
mmc1: new SD card at address 0002
mmcblk0: mmc1:0002 00000 1.88 GiB 
 mmcblk0: p1

mmc1: card 0002 removed

/sys/bus/mmc/devices/
# ls mmc1\:0002/
block      date       hwrev      oemid      serial     uevent
cid        driver     manfid     power      subsystem
csd        fwrev      name       scr        type

# cat hwrev 
0x1
# cat oemid 
0x534d
# cat serial 
0xb180f0ed
# cat uevent 
DRIVER=mmcblk
MMC_TYPE=SD
MMC_NAME=00000
# cat cid 
1b534d303030303010b180f0ed0086d0
# cat manfid 
0x00001b
# cat csd 
007fff325f5a83c3f6dbdfff9680003e
# cat fwrev 
0x0
# cat name 
00000
# cat scr 
0225000000000000
# cat type 
SD

2009-10-9
-------------------------------------------------
usage: repo COMMAND [ARGS]

The most commonly used repo commands are:

  abandon   Permanently abandon a development branch
  branches  View current topic branches
  checkout  Checkout a branch for development
  diff      Show changes between commit and working tree
  download  Download and checkout a change
  grep      Print lines matching a pattern
  init      Initialize repo in the current directory
  prune     Prune (delete) already merged topics
  stage     Stage file(s) for commit
  start     Start a new branch for development
  status    Show the working tree status
  sync      Update working tree to the latest revision
  upload    Upload changes for code review

See 'repo help <command>' for more information on a specific command.
See 'repo help --all' for a complete list of recognized commands.

repo --trace branches

repo init -b donut

donut$ du -sh .repo/
932M	.repo/

donut$ du -sh *
12M	bionic
1.3M	bootable
6.1M	build
81M	dalvik
63M	development
553M	external
165M	frameworks
1.4M	hardware
4.0K	Makefile
65M	packages
576M	prebuilt
16M	system
3.0M	vendor


donut$ . build/envsetup.sh 
including vendor/aosp/vendorsetup.sh
donut$ which lunch
donut$ lunch 1

donut$ du -sh out/
3.0G	out/


merge opencore node from xi'an on donut

opencore\Android.mk

opencore\build_config\opencore_dynamic
opencore\codecs_v2\audio
opencore\codecs_v2\omx
cpopencore.sh

opencore\codecs_v2\omx\omx_common\include\pv_omxcore.h
line:178, add some ex UUID

opencore\codecs_v2\omx\omx_common\src\pv_omxregistry.cpp
donut one is same as dellmini one

libaac_dec_ali.a

2009-9-29
-------------------------------------------------
adb shell mount -o remount rw /system
adb shell mkdir /system/tmp

ui stop hanging 

[AudioRender] Stop, ret = 0
[CAudioTrack] Close
[CAudioTrack] Stop
[CAudioTrack] Close end 
[VideoRender] Try to Stop
[VideoRender] Stop, ret = 0
[CBDemux] Try to Stop

basethread.cpp
	WaitThenTerminate


cmmb sdk switch program(mfs files) problem:

sdk without vr, works fine, if there were no video displayed, try use cmmb headers(type.h) recompile jni

sdk with vr, no good

==========
TODO:
cmmb 
investigate switch mfs files problem

pmp 
investigate switch video files problem if has this issue
investigate switch media files audiotrack can't stop and cause crash problem
support each format

\\fileserver\Builds\Components\MPEG4Vdec\Manual\MPEG4.H263.DIVX3Vdec_gcc_android_eabi421_2009_09_30_000000
.3gp, .mp4, .flv, .wav, .avi

general
download cupcake [done]
merge/test opencore plugins from xi'an [they are wrong about tag cupcake]
need sd card and reader

devices:

android
Dell mini 9"
Yuhua X2 phone
Freescale i.MX51
Marvell PXA310
TI OMAP 35xx

linux
ST 2062
==============

AVI_DMX			= Y
3GP_DMX			= N
//ASF_DMX			= N
WAV_DMX			= N
//ELE_DMX			= Y
//RAW_DMX			= N
//DMB_DMX			= N
FLV_DMX			= N
//REAL_DMX		= N
CMMB_DMX			= N
//DVBT_DMX		= N
//DVBH_DMX		= N
//ISDBT_DMX		= N
//MPEG_DMX		= N

MP3_ADEC			= Y
AAC_ADEC			= Y
WMA_ADEC			= N
//AMR_ADEC		= N
//BSAC_ADEC		= N
//IMA_ADEC		= N
//MIDI_ADEC		= N
//DRA_ADEC		= N
PCM_ADEC			= N
//REAL_ADEC		= N
//AC3_ADEC		= N
//OGG_ADEC		= N
//FLAC_ADEC		= N

MPG2_VDEC			= N
MPG4_VDEC			= N
H264_VDEC			= Y
//WMV_VDEC		= N
//REAL_VDEC		= N
FLV_VDEC			= N
//MP2V_VDEC		= N
//MJPEG_VDEC		= N



tar zcf includes.tar.gz bionic/libc/arch-arm/include bionic/libc/include bionic/libc/kernel/common bionic/libc/kernel/arch-arm bionic/libc/include/sys bionic/libm/include

\\fileserver\Public\Employees\JJ.Dai\Mpeg4\MPEG4Vdec_gcc_android_eabi421_2009_09_29_000000

MovieFile.cpp  \
Mp4Box.cpp  \
mp4demux.cpp  \
Mp4Riff.cpp \
Mp4Audio.cpp \
Mp4Com.cpp  \
Mp4File.cpp   \
Mp4Navigator.cpp  \
Mp4Ve.cpp

compile mp4mux.cpp error
StszBoxMem

2009-9-25
-------------------------------------------------
repo init -u git://android.git.kernel.org/platform/manifest.git -b cupcake
repo init -u git://android.git.kernel.org/platform/manifest.git -b eclair
repo sync
repo init -u git://android.git.kernel.org/platform/manifest.git -b android-1.5
repo sync external/opencore


2009-9-24
-------------------------------------------------
yuhua phone , simple ui apk from cuilong, cmmb jni
E/ALSALib (   36): external/alsa-lib/src/pcm/pcm.c:7050:(snd_pcm_recover) underrun occured


~$ ls /etc/udev/rules.d/51-android.rules -l
-rwxr-xr-x 1 root root 55 2009-08-24 10:44 /etc/udev/rules.d/51-android.rules


dmesg
[84525.293007] Time: acpi_pm clocksource has been installed.
[174030.910328] usb 1-1: new full speed USB device using uhci_hcd and address 3
[174031.435420] usb 1-1: not running at top speed; connect to a high speed hub
[174031.499567] usb 1-1: configuration #1 chosen from 1 choice
[174031.703119] scsi4 : SCSI emulation for USB Mass Storage devices
[174031.721251] usb-storage: device found at 3
[174031.721254] usb-storage: waiting for device to settle before scanning
[174038.717915] usb-storage: device scan complete
[174039.776283] scsi 4:0:0:0: Direct-Access     <NULL>   <NULL>           0000 PQ: 0 ANSI: 2
[174039.815276] sd 4:0:0:0: [sdb] Attached SCSI removable disk
[174039.815735] sd 4:0:0:0: Attached scsi generic sg2 type 0

sudo adb devices


sudo /home/cidana/android-sdk-linux_x86-1.5_r1/tools/adb

modify \\192.168.0.86\cidana\arm\mydroid\development\emulator\skins\HVGA\layout
to make emulator display a little smaller


vtable for __cxxabiv1::__class_type_info


2009-9-23
-------------------------------------------------
config 
	ANPATH
	toolchain prefix

/mnt/hgfs/hostshare/System.CidanaSDK/trunk/build/android_arm/ExternalDependency/libwin32/windows.h:185: error: '_llseek' has not been declared
<SOLVE>
Makefile.rules
	DEFINES += -D__linux__

add source code
{sdk}/src/libutility/AndroidAudioTrack

modify sdk_lib/libutility/Makefile
remove alsa , add AndroidAudioTrack.o

../../../../src/LibUtility/AndroidAudioTrack.h:10:30: error: media/AudioTrack.h: No such file or directory
<SOLVE> add there lines to sdk_lib/libutility/Makefile
INCLUDEDIRS += -I${ANPATH}/hardware/libhardware_legacy/include
INCLUDEDIRS += -I${ANPATH}/system/core/include
INCLUDEDIRS += -I${ANPATH}/frameworks/base/include
INCLUDEDIRS += -I${ANPATH}/frameworks/base/libs
INCLUDEDIRS += -I${ANPATH}/bionic/libstdc++/include
INCLUDEDIRS += -I${ANPATH}/hardware/libhardware/include
INCLUDEDIRS += -I${ANPATH}/external/skia/include
INCLUDEDIRS += -I${ANPATH}/external/alsa-lib/include
INCLUDEDIRS += -I${ANPATH}/hardware


../../../../src/LibUtility/AndroidAudioTrack.cpp: In function 'IEmcAudioContext* CreateAudioContext()':
../../../../src/LibUtility/AndroidAudioTrack.cpp:623: error: cannot allocate an object of abstract type 'CAudioTrack'
../../../../src/LibUtility/AndroidAudioTrack.h:26: note:   because the following virtual functions are pure within 'CAudioTrack':
../../../../src/LibEMC/emccore.h:415: note: 	virtual HRESULT IEmcMediaComponent::FastForward()

<SOLVE>
add 	STDMETHODIMP FastForward(); declare to AndroidAudioTrack.h
add 	STDMETHODIMP FastForward(); define to AndroidAudioTrack.cpp

compile app error
<SOLVE>
comment a line in Makefile
MAKE -C demos


cidana_media_jni: Makefile rewriten
	cmmb new headers

pmp jni write needed, done

libwin32 code merge, android_arm make file 


add isurface step

CI_SDK_Typedef.h
#ifdef ANDROID	
	CI_CFG_ANDROID_ISURFACE,
#endif	

CI_SDK_Playback.cpp
#ifdef ANDROID
	case CI_CFG_ANDROID_ISURFACE:
		{
			if(pPlaybackSDK->m_pGraphicsContext)
			{	
				DP("pPlaybackSDK->m_pGraphicsContext->Set CI_CFG_ANDROID_ISURFACE %p\n", pValue);		
				ret = pPlaybackSDK->m_pGraphicsContext->Set(EMC_PROPSET_GFXCTXT, EMC_PROPID_GFXCTXT_ANDROIDISURFACE,0,0, pValue, 0);
			}
			else
			{
				DP("pPlaybackSDK->m_pGraphicsContext->Set pPlaybackSDK->m_pGraphicsContext == NULL \n");
				ret = E_FAIL;
			}
		}
		break;
#endif
PlaybackEngine.cpp


GxBridge_Overlay.cpp
#ifdef ANDROID	
	case EMC_PROPID_GFXCTXT_ANDROIDISURFACE:
		{
			DP("CGxBridge_Overlay::Set CI_CFG_ANDROID_ISURFACE\n");		
			if(NULL != pPropData)
			{
				DP("CGxBridge_Overlay::Set CI_CFG_ANDROID_ISURFACE not null %p\n", pPropData);
				int ret;
				ret = m_pPresent->Set(EMC_PROPSET_GFXCTXT, MC_PROPID_VP_ANDROID_ISURFACE, 0, 0, pPropData, 0);
				DP("CGxBridge_Overlay ret %x\n", ret);
				//isurface = *(sp<ISurface> *)(pPropData);
				//DP(">>>> isurface=%p \n", isurface.get());	
				return S_OK;
			}
			else
			{
				DP("CGxBridge_Overlay::Set CI_CFG_ANDROID_ISURFACE null\n");
				return E_POINTER;
			}
			return S_OK;
		}
#endif	


Playercore.h

#ifdef ANDROID
	EMC_PROPID_VIDRND_ANDROIDISURFACE,
#endif	

modify java filter

adb install out/target/product/generic/obj/APPS/CI_Android_intermediates/package.apk

miss comment the play command in jni module, damn it.

2009-9-21
-------------------------------------------------
libwin32

gcc -E -dM -c
to figure out where __linux__ is defined


E/copybit (   65): copyBits failed (Invalid argument)
E/SurfaceFlinger(   65): copybit failed (Unknown error: -22)


export unsigned apk from eclipse
jarsigner still got problem with surface flinger

2009-9-17
-------------------------------------------------
cidana_shanghai,    cidana2008
www.marvell.com/extranet

https://www.marvell.com/extranet/dms/documents.do?groupID=4&subGroupID=23932

usb
eth
sound
serial

tray everything make all app slow, damn it


2009-9-16
-------------------------------------------------
serial port connect to J110 (on board), usb/rs232 converter at COM4

# cat cpuinfo
Processor       : ARM926EJ-S rev 5 (v5l)
BogoMIPS        : 162.20
Features        : swp half thumb fastmult edsp java
CPU implementer : 0x41
CPU architecture: 5TEJ
CPU variant     : 0x0
CPU part        : 0x926
CPU revision    : 5

Hardware        : ST Cartesio STA2062, EVB2062
Revision        : 0000
Serial          : 0000000000000000


static int times=1;
if(times){
	DP("[VideoRender][%4d] Call IMcVideoPresenter::Present() FAILED!! ErrorCode=0x%08x.\n", __LINE__, res);
	--times;
}


2009-9-15
-------------------------------------------------

./configure --host=/usr/local/x-tools/arm-stm-linux-gnueabi/bin/arm-stm-linux-gnueabi- --prefix=`pwd`/out


has problem with clock_gettime?
comment HAVE_CLOCK_GETTIME line in include/config.h, set it to zero will not resolve your problem.



2009-9-11
-------------------------------------------------
adb uninstall com.cidana.jplayer

(maxthon only) portable/backup fill form data, bookmark, configuration
(firefox only) keyboard way to surfing
easy to download flv ...
easy to use proxy

2009-9-8
-------------------------------------------------
display ok, restart java app hanging fixed


2009-9-7
-------------------------------------------------
heap alloc ?
lock fail
no present




2009-9-4
-------------------------------------------------

OBJS = $(OBJ_DIR)/GfxAndroid.o \
	$(OBJ_DIR)/AlphaBlending.o \
    $(OBJ_DIR)/LibVideoMixer.o \
    $(OBJ_DIR)/GfxVideoWindow.o \
    $(OBJ_DIR)/GfxPrepare.o \
    $(OBJ_DIR)/GfxPresentOvl.o

gfxAndroid_allstuff build done
cmmb sdk headers updated
merge code to trunk ?

2009-9-3
-------------------------------------------------

mydroid$ adb shell cat /sdcard/log.txt
log file created
[PlaybackEngine] ------------Close-----------s
[PlaybackEngine] ------------Close-----------
CGxBridge_Overlay::Open() 
CGxBridge_Overlay::OpenDisplay() 
[GB_OL][  229] m_lVideoRenderMode = 0, sInit.dwSurfType = 0x00000018
[PlaybackEngine] ------------Open-----------
[DemuxCMMB] CMMB Demux Opened.


mydroid$ adb shell cat /sdcard/logvrp.txt
log file created

aggregation composition


2009-9-2
-------------------------------------------------
define ARCH as ARM will compile a lot of ASM stuff, and they are trying to 
link with ipp xxx. /opt/...

just use native one do not define as ARM

bool CBitStreamBase::verify_header(void) /*const*/
HRESULT CCBDemuxCMMB::SetPlaybackPos(DWORD dwPos)

#ifdef ANDROID
#undef _BIG_ENDIAN
#endif


CI_CFG_ANDROID_ISURFACE,

sync headers to avoid wired problem





2009-9-1
-------------------------------------------------
TODO:
use ubuntu as a template

HybridAnalysis
	ExternalDependency/AudioLibs/AACplusdec/HEAACDecLib.a

dlopen
target thumb C: libdl <= bionic/libdl/libdl.c
target StaticLib: libdl (out/target/product/eee_701/obj/STATIC_LIBRARIES/libdl_intermediates/libdl.a)
mydroid$ cp out/target/product/eee_701/obj/STATIC_LIBRARIES/libdl_intermediates/libdl.a /home/cidana/hostshare
mydroid$ echo `pwd`/out/target/product/eee_701/obj/STATIC_LIBRARIES/libdl_intermediates/libdl.a
/home/cidana/dellmini/mydroid/out/target/product/eee_701/obj/STATIC_LIBRARIES/libdl_intermediates/libdl.a



undefined reference to `vtable for __cxxabiv1::__class_type_info'
undefined reference to `vtable for __cxxabiv1::__vmi_class_type_info'
undefined reference to `vtable for __cxxabiv1::__si_class_type_info'
undefined reference to `vtable for __cxxabiv1::__class_type_info'
undefined reference to `__gxx_personality_v0'


linux-kernel-devel fakeroot build-essential build-dep linux-image-$(uname -r)


export PATH=~/arm/mydroid/prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/bin/:$PATH
make ARCH=arm CROSS_COMPILE=arm-eabi-


2009-8-31
-------------------------------------------------
Makefile
	include config
	include Makefile.rules
		include Arch.rules

IPParser.cpp
#include <stdlib.h>

../../../../src/LibPlayer/AudioRender.cpp:1659: error: conflicts with new declaration with 'C' linkage
../../../../src/LibPlayer/AudioRender.cpp: At global scope:
../../../../src/LibPlayer/AudioRender.cpp:1662: error: expected `}' at end of input
../../../../src/LibPlayer/AudioRender.cpp:1662: error: expected `}' at end of input
AudioRender.cpp

../../../../src/LibUtility/AndroidAudioTrack.cpp:622: error: cannot allocate an object of abstract type 'CAudioTrack'
../../../../src/LibUtility/AndroidAudioTrack.h:26: note:   because the following virtual functions are pure within 'CAudioTrack':



2009-8-25
-------------------------------------------------
bug fixed: isurface black screen 
VideoRenderLinux.cpp:381
	must setViewport after closed, because of init in setViewport

android link lib
LOCAL_LDLIBS

gitorcz

2009-8-24
-------------------------------------------------

Babbage Ver B,
with android image running on,
android patch version R4.1 (from imx-android-r4.1.tar.gz)

But we got some problem here.

1. can't establish an adb connection via usb (adb shell)
windows:
can't install usb driver, open device manager there is a yellow question mark
on Android device
android-sdk-windows-1.5_r1\usb_driver\x86

linux(ubuntu):
add /etc/udev/rules.d/51-android.rules


all this base on this environment.
Android --> Setting --> Application --> development --> Usb debug on

2. can't establish an adb connection via network (adb shell)
set ADBHOST=192.168.0.26
adb shell
error: device not found

3. when we play a mp3 file, seem like we only got mono sound now.
cpu usage are the same, surface flinger or isurface.
for file in `adb shell ls /data/app`; do echo "/data/app/${file}" ; done



2009-8-21
-------------------------------------------------
ifconfig eth0 192.168.0.59 netmask 255.255.255.0 up


PM: Syncing filesystems ... done.
Freezing user space processes ... (elapsed 0.00 seconds) done.
Freezing remaining freezable tasks ... (elapsed 0.00 seconds) done.
Suspending console(s) (use no_console_suspend to debug)

<SOLVE>screen sleep press ESC to wake it up


fis load kernel
exec -c "init=/init console=ttymxc0 root=/dev/mmcblk0p2 rootfstype=ext3 rw ip=dhcp mem=448M video=mxcfb:1024x768-16M@60"

setprop net.dns1 192.168.0.250

mmcblk0: error -84 transferring data
end_request: I/O error, dev mmcblk0, sector 1973608


mmcblk0: error -84 transferring data
end_request: I/O error, dev mmcblk0, sector 1973606
EXT3-fs: Can't read superblock on 2nd try.

<SOLVE> SD card down, use new one


Processor       : ARMv7 Processor rev 1 (v7l)
BogoMIPS        : 159.90
Features        : swp half thumb fastmult vfp edsp 
CPU implementer : 0x41
CPU architecture: 7
CPU variant     : 0x2
CPU part        : 0xc08
CPU revision    : 1

Hardware        : Freescale MX51 Babbage Board
Revision        : 51120
Serial          : 0000000000000000


RedBoot> fis list
... Read from 0x1fee0000-0x1feff000 at 0x00040000: .
Name              FLASH addr  Mem addr    Length      Entry point
RedBoot           0x00000000  0x00000000  0x00040000  0x00000000
FIS directory     0x00040000  0x00040000  0x0001F000  0x00000000
RedBoot config    0x0005F000  0x0005F000  0x00001000  0x00000000
kernel            0x00300000  0x00100000  0x00500000  0x00100000

RedBoot> help
Setup/Display clock
Syntax:
   clock [<core clock in MHz> :<DDR clock in MHz>] 

   Examples:
   [clock]         -> Show various clocks
   [clock 665]     -> Core=665  
   [clock 800:133]  -> Core=800  DDR=133 
   [clock :166]   -> Core=no change  DDR=166 

L2 cache
   L2 [ON | OFF]
Manage aliases kept in FLASH memory
   alias name [value]
Set/Query the system console baud rate
   baudrate [-b <rate>]
Manage machine caches
   cache [ON | OFF]
Display/switch console channel
   channel [-1|<channel number>]
Compute a 32bit checksum [POSIX algorithm] for a range of memory
   cksum -b <location> -l <length>
Display (hex dump) a range of memory
   dump -b <location> [-l <length>] [-s] [-1|-2|-4]
Execute an image - with MMU off
   exec [-w timeout] [-b <load addr> [-l <length>]]
        [-r <ramdisk addr> [-s <ramdisk length>]]
        [-c "kernel command line"] [-t <target> ] [<entry_point>]
Manage FLASH images
   fis {cmds}
Manage configuration kept in FLASH memory
   fconfig [-i] [-l] [-n] [-f] [-d] | [-d] nickname [value]
blow some fuses
   fuse_blow <bank> <row> <value>
read some fuses
   fuse_read <bank> <row>
Execute code at a location
   go [-w <timeout>] [-c] [-n] [entry]
Help about help?
   help [<topic>]
Display command history
   history 
Set/change IP addresses
   ip_address [-b] [-l <local_ip_address>[/<mask_len>]] [-h <server_address>]
Load a file
   load [-r] [-v] [-z to swap endianness on 16 bit] [-d] [-h <host>] [-p <TCP port>][-m <varies>] [-c <channel_number>] 
        [-b <base_address>] <file_name>
Compare two blocks of memory
   mcmp -s <location> -d <location> -l <length> [-1|-2|-4]
Copy memory from one address to another
   mcopy -s <location> -d <location> -l <length> [-1|-2|-4]
Fill a block of memory with a pattern
   mfill -b <location> -l <length> -p <pattern> [-1|-2|-4]
Read/Write MMC/SD card
   sdhc <ram-addr> <flash-addr> <len-bytes> <r/w>
Network connectivity test
   ping [-v] [-n <count>] [-l <length>] [-t <timeout>] [-r <rate>]
        [-i <IP_addr>] -h <IP_addr>
Read/Write internal PMIC register
   pmic <reg num> [value to be written]
Reset the system
   reset 
Read/Write/Erase SPI NOR flash
   spiflash <ram-addr> <flash-addr> <len-bytes> <r/w/e>
Display RedBoot version information
   version 
Display (hex dump) a range of memory
   x -b <location> [-l <length>] [-s] [-1|-2|-4]
Enable one flash media for Redboot
   factive [MMC|SPI]
Update Redboot with currently running image
   romupdate 
Run an image at a location with MMU off
   run [<virtual addr>]
Set FEC MAC address in Fuse registers
   set_fecmac [0x##:0x##:0x##:0x##:0x##:0x##]

2009-8-20
-------------------------------------------------
MediaPlayer.java
MediaPlayerActivity.java
cidana_media_Mediaplayer.cpp
CI_SDK_Typedef.h
	ISURFACE
E/SurfaceFlinger(  580): LayerBuffer::BufferSource::postBuffer() invalid buffer (offset=7340133, size=345600, heap-size=90112
I/CI_MediaPlayer_jni(  841): >>>> pPlayer_Isurface=0x191558 (id=1)
>>>> isurface=0x191558 
E/SurfaceFlinger(  580): LayerBuffer::BufferSource::postBuffer() invalid buffer (offset=0, size=345600, heap-size=90112

logfile_close made a crash ?  ??

i.mx 51
http://www.freescale.com/go/208588093
https://www.freescale.com/cgi/go/210001833
Username: ricky.fei@cidana.com
Password: m4Khns 

babbage




dellmini 9
android 1.5
linux kernel 



android 

app_process use uses 32-bits capbilities
xxxx: binder transition failed
acpi preparing to enter system sleep state S5

 "xxxx: binder transition failed" , xxxx,
android 




https://www.freescale.com/cgi/doc/210101820/Android_R3_Release.gz
https://www.freescale.com/cgi/doc/211176674/imx-android-r4.1.tar.gz

2009-8-19
-------------------------------------------------
TI EVB try telnet, but still need adb 

export ADBHOST=192.168.0.72
export ANDROID_PRODUCT_OUT=`pwd`/out/target/product/eee_701


qemu compile error, edit Makefile.android
ifeq ($(HOST_OS)-$(HOST_ARCH),linux-x86)
  MY_CFLAGS += -Wa,--32 -D_GNU_SOURCE
endif


external
	CI_JPlayer
	CI_MPlayer
	cidana_media_jni
	cidanaplayer
	ansuf
	andemo

frameworks\base\media\libmediaplayerservice


arm compile , audio render wired problem, define ANDROID_ARM


2009-8-18
-------------------------------------------------
adb install -r out/target/product/generic/obj/APPS/CI_JPlayer_240_intermediates/package.apk

can't uninstall

c++
cidana_media_jni

java
media.cidana

com.cidana.jplayer


1. 
cidana\media\MediaPlayer.java

2.

- audio latency problem ? --> check out this file.
android_audio_output.cpp

E/SurfaceFlinger(  580): LayerBuffer::BufferSource::postBuffer() invalid buffer (offset=0, size=614400, heap-size=307200

BUF_COUNT = 4,8

320*240=76800

* 4
* 8



2009-8-17
-------------------------------------------------
test yuhua apk --> OK
try TI network --> NG
cgmobile screen rotate, try new video render


adb shell telnet 192.168.0.59

ifconfig eth0 192.168.0.59 netmask 255.255.255.0 up


chroot /omap3evm /system/bin/setprop net.dns1 192.168.0.1

could not set property

? no need to asign a percific ip addr ?

set ADB_HOST=192.168.0.81


PROJ_NAME=JniTest
ACT_NAME=JniTest
PACKAGE_NAME=com.cidana
USR_NAME=cidana
android create project --target 2 --package $PACKAGE_NAME --activity $ACT_NAME --path $PROJ_NAME
keytool -genkey -v -keystore $USR_NAME.keystore -alias $USR_NAME -keyalg RSA -validity 10000
jarsigner -verbose -keystore $HOME/$USR_NAME.keystore $PROJ_NAME-unsigned.apk $USR_NAME

USR_NAME=cidana
keytool -genkey -v -keystore $USR_NAME.keystore -alias $USR_NAME -keyalg RSA -validity 10000

PROJ_NAME=JniTest
USR_NAME=cidana
jarsigner -verbose -keystore $HOME/$USR_NAME.keystore bin/$PROJ_NAME-unsigned.apk $USR_NAME


JHFLAGS=-classpath $HOME/workspace/JniTest/bin


jarsigner -verbose -keystore ~/cidana.keystore bin/CI_CMMB_320.apk cidana



local include path
LOCAL_C_INCLUDES

2009-8-14
-------------------------------------------------
TI android EVB

trun on the switch next to DC power, then power on (there are 3 buttons)


PlaybackEngine.cpp
Open
	m_bShowFirstFrame
	RECT  defaultRect = {0, 40, 240, 180+40};
	vidrnd->Set(EMC_PROPSET_VIDRND, EMC_PROPID_VIDRND_RECTDST, 0, 0, (LPVOID)&defaultRect, (DWORD)sizeof(RECT));
Run
	m_bScreenInit

VideoRenderLinux.cpp
set EMC_PROPID_VIDRND_RECTDST
	r_screen = *reinterpret_cast<RECT *>(pInstanceData);



AndroidVideoDevice.cpp
Open

SetViewport


EGLDisplaySurface.cpp
	mapFrameBuffer()
	open/map real framebuffer device
microedition ?


rotate done ?

2009-8-12
-------------------------------------------------
CPlaybackEngine::Run EMC_PROPID_VIDRND_RECTDST m_rDst NotRectEmpty
CVideoRenderer::Set
CVideoRenderer::Set has not pInstanceData
printrect  r.top 0, r.left 0, r.right 240, r.bottom 180
printrect  r.top 0, r.left 0, r.right 320, r.bottom 240
[INFO]	GetGraphicsProperties
[INFO]	Get
[INFO]	SetViewport
CAndroidVideoDevice::SetViewport 0,0,320,240
w  320, depth 16
[INFO]	GetGraphicsProperties


240x400
320x480

remove gdstrect
VideoRenderLinux.cpp
	clean set EMC_PROPID_VIDRND_ROTATION

vr cleaned

0,0,320,240
0,40,240,220
same behave now

dp.cpp
#define DEBUG_INFO
#define LOG2FILE

CI_SDK_Playback.cpp
void logfile_open(void)
{
	logfile = fopen(LOG_FILENAME, "w");
	printf("log file created\n");
	fprintf(logfile,"log file created\n");
	fflush(logfile);
}

void logfile_close(void)
{
	if(logfile){
		fclose(logfile);
		logfile=NULL;
	}
}


sudo apt-get install nfs-kernel-server nfs-common portmap



sdcard automount
cp development/data/etc/vold.conf generic/system/etc/


2009-8-11
-------------------------------------------------

migrate to CI_ImgPrcOneFrame

move is ok, scale not ok
printrect  r.top 0, r.left 0, r.right 320, r.bottom 240
printrect  r.top 0, r.left 0, r.right 320, r.bottom 240
printrect  r.top 0, r.left 0, r.right 320, r.bottom 240

printrect  r.top 0, r.left 0, r.right 320, r.bottom 240
printrect  r.top 0, r.left 0, r.right 800, r.bottom 600
printrect  r.top 0, r.left 0, r.right 320, r.bottom 240

printrect  r.top 100, r.left 100, r.right 420, r.bottom 340
srcSize_width 320, srcSize_height 240
srcStep[0] = 384 ,srcStep[1] = 176, srcStep[2] = 176
dstSize_width 320, dstSize_height 240
dstStep[0] = 640 

printrect  r.top 0, r.left 0, r.right 320, r.bottom 240
printrect  r.top 0, r.left 0, r.right 320, r.bottom 240
printrect  r.top 0, r.left 0, r.right 320, r.bottom 240
printrect  r.top 0, r.left 0, r.right 320, r.bottom 240
printrect  r.top 0, r.left 0, r.right 800, r.bottom 600
printrect  r.top 0, r.left 0, r.right 320, r.bottom 240
printrect  r.top 0, r.left 0, r.right 640, r.bottom 480
srcSize_width 320, srcSize_height 240
srcStep[0] = 384 ,srcStep[1] = 176, srcStep[2] = 176
dstSize_width 320, dstSize_height 240
dstStep[0] = 640 


scale ok, move not ok


cp out/target/product/generic/symbols/system/lib/libcidana_media_jni.so out/target/product/generic/obj/lib/libcidana_media_jni.so

mount -o rw -t vfat /dev/block/mmcblk0 /sdcard


permission trick does not work on yuhua's phone, but on dellmini and emulator


2009-8-10
-------------------------------------------------
for android_video_device::setViewport

out/target/product/eee_701/obj/STATIC_LIBRARIES/libcidana_playback_sdk_intermediates/libcidana_playback_sdk.a:(.eh_frame+0x12): undefined reference to `__gxx_personality_v0'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libcidana_playback_sdk_intermediates/libcidana_playback_sdk.a:(.eh_frame+0x292): undefined reference to `__gxx_personality_v0'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libcidana_playback_sdk_intermediates/libcidana_playback_sdk.a:(.eh_frame+0x496): undefined reference to `__gxx_personality_v0'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libcidana_playback_sdk_intermediates/libcidana_playback_sdk.a:(.eh_frame+0x879): undefined reference to `__gxx_personality_v0'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libcidana_playback_sdk_intermediates/libcidana_playback_sdk.a:(.eh_frame+0xa39): undefined reference to `__gxx_personality_v0'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libcidana_playback_sdk_intermediates/libcidana_playback_sdk.a:(.eh_frame+0xbc2): more undefined references to `__gxx_personality_v0' follow
/home/cidana/dellmini/mydroid/prebuilt/linux-x86/toolchain/i686-unknown-linux-gnu-4.2.1/bin/../lib/gcc/i686-unknown-linux-gnu/4.2.1/libgcc_eh.a(unwind-dw2-fde-glibc.o): In function `_Unwind_Find_FDE':
/home/dmitriyz/src-lcl/android2/toolchain/android-toolchain/gcc-4.2.1/gcc/unwind-dw2-fde-glibc.c:420: undefined reference to `dl_iterate_phdr'

enable optimize option in cmmb sdk config file

80070492


crash ? 
figure out which vr, ar first


export ADBHOST=192.168.0.90
export ANDROID_PRODUCT_OUT=`pwd`/out/target/product/eee_701

export ANDROID_PRODUCT_OUT=`pwd`/out/target/product/generic



CVideoRenderer::YUVto565
CAndroidVideoDevice::Open
CAndroidVideoDevice::SetViewport

FRAMEBUFFER
2009-8-7
-------------------------------------------------
compile sdk with toolchain
convert to jni lib
make java ui
pack to apk



dellmini
video different size
video set position
need to modify overall permission checking
application take care of the event of incoming call


android arm (emulator)

* test ansuf --> works
* test anat --> works


* toolchainandroid sourcetree/prebuilt 
* androidcupcake?
  audio/video render
  (audioflinger, audiointerface, libaudio, alsa-lib, surfaceflinger)
* appphone()
  (aspect ratio)
* appspec
  (audio render)
...



SIMPLO-KIZ00 4C sample
Date: 2008.W26

CPU Atom N270 1.60Ghz
RAM 1G/800Mhz samsung
SSD 8G Intel DD900000U0L
LCD 8.9"
Battery 2200mAh
Wlan atheros XB63


2.6.31-rc3

root     2069  1     808   392   c026de2d 8000f696 S /system/bin/sh

root     2070  1     3348  188   ffffffff 08051ccc S /sbin/adbd
root     2073  1     912   428   c01713cf 8010fbdc S /system/bin/vold
root     2078  1     868   348   c0391b98 8010f696 S /system/bin/installd

root     2076  1     300868 12596 c01713cf 8010fbdc S zygote

system   2071  1     852   312   c0292807 8010fa46 S /system/bin/servicemanager
media    2077  1     25620 8744  ffffffff 8020fa46 S /system/bin/mediaserver
system   2087  2076  536704 32608 ffffffff 8010fa46 S system_server

radio    2121  2076  450736 15600 ffffffff 80110d9e S com.android.phone
app_2    2126  2076  464764 25644 ffffffff 80110d9e S android.process.acore
app_10   2143  2076  448016 13344 ffffffff 80110d9e S com.android.mms
app_4    2164  2076  443144 16040 ffffffff 80110d9e S com.android.calendar
app_0    2173  2076  445256 15484 ffffffff 80110d9e S android.process.media
app_9    2186  2076  439572 13188 ffffffff 80110d9e S com.android.alarmclock
app_2    2202  2076  442736 13428 ffffffff 80110d9e S com.android.inputmethod.latin



ProcessState.cpp
	open_driver --> /dev/binder

export ADBHOST=192.168.0.90
export ANDROID_PRODUCT_OUT=`pwd`/out/target/product/eee_701


provide our interface , and sample code.
integrate with their ui


2009-8-5
-------------------------------------------------
curl http://android.git.kernel.org/repo >~/bin/repo

build/buildspec.mk.default

go to audio_sink


2009-8-4
-------------------------------------------------


SurfaceFlinger::onTransact

signed with the platform certificate

jarsigner -verify -verbose -certs *.apk


crash problem, again ?

HRESULT CAudioTrack::Flush(DWORD dwFlags)
check released pointer pls
	if(!m_audioBuffer)
		return S_OK;



android_surface_output.cpp

looking for vendor ?

build/target/board/generic/Boardconfig.mk ?



kernel/drivers/misc/binder.c

stroids

2009-8-3
-------------------------------------------------
AndroidRuntime.cpp
redirectStdFds
dup2


2009-7-31
-------------------------------------------------

tested with xi'an demo player (base on android mediaplayer, not the JNI one),

 CAudioRender::Pump() res 80000008
 CAudioRender::Pump() EOF
ending audio renderer thread (dwRet=0)
(0), delta = 38
[VideoDecoderH264]      1
 CVideoRenderer::Pump() EOF

[CAlsaDevice] m_dwBlocksInBuffer 11, m_BlockSize 8192, m_dwFrameSize 4096
[CAlsaDevice] audioBufferSize 94208
[CAlsaDevice] DeviceInit
CAlsaDevice::DeviceInit audioBufferSize 94208
m_nDelayTime 2334000


audiosink and audiotrack have a unchange latency()

AudioTrack->mCblk->framesAvailable

* surface access permission
* after pause and resume , video and audio will a little forward from the resume point.

use m_nDelayTime = mAudioTrack->latency()*1000;
and audioStarted set correct.



2009-7-30
-------------------------------------------------
crash problem is not registered a callback
CI_Player_RegisterPlayerCallback

LOG2FILE

remove debug info from window manager
WindowManagerService.java
    static final boolean DEBUG_INPUT = false;
and comment log.i in function findTargetWindow


TODO:
* current cmmb sdk(this copy works on android) 
  is neither using video render nor audio render
* sdk seg fault problem
* video scaling and position


* surface access permission
* audio is a little fast than video 
-->fixed 	m_nDelayTime = mAudioTrack->latency()*1000;
* mediaplayerdemo is wired about load big video file,
  may sometimes couldn't play

* player should be controled
* currently 
  audio --> AudioTrack
  video --> surface flinger client

* fill all method of cidana player
* getCurrentPosition, clip duration, 
  the slide of player get to the end before the movie ends
* pause, resume
  pause is a little slow.
  after resume movie plays a little while than stop, and there was no sound.
* stop works


dellmini screen size 800x600


V/AudioTrack( 2077): afLatency 372
V/AudioTrack( 2077): mLatency 2334, mFrameCount 94208, mSampleRate 48000

I/AudioHardwareALSA( 2077): Initialized ALSA PLAYBACK device AndroidPlayback
D/AudioHardwareALSA( 2077): Set PLAYBACK PCM format to S16_LE (Signed 16 bit Little Endian)
D/AudioHardwareALSA( 2077): Using 2 channels for PLAYBACK.
D/AudioHardwareALSA( 2077): Set PLAYBACK sample rate to 44100 HZ
D/AudioHardwareALSA( 2077): Buffer size: 16384
D/AudioHardwareALSA( 2077): Latency: 371519

adb install -r out/target/product/eee_701/obj/APPS/CI_MPlayer_intermediates/package.apk

add mfs files
filterMediaFile


don't want to make system image
comment build/core/Makefile:301~1168	by using ifeq (0,1) ... endif


2009-7-29
-------------------------------------------------

alias adl='adb kill-server && adb logcat'

# pwd
/data/mymedia
# ls
1.mp4
1.amr
taylor_swift_fifteen.mp3
harry.mp4
taylor swift - breathe.mp3
nick.mp3
gdbserver_x86
CMMB_Demo.mfs
Program1_0509.mfs
2.mfs



android.media.MediaPlayer
frameworks\base\media\java\android\media\MediaPlayer.java

libmedia_jni
frameworks\base\media\jni\android_media_MediaPlayer.cpp


libmedia
frameworks\base\media\libmedia\IMediaPlayer.cpp
frameworks\base\media\libmedia\mediaplayer.cpp



2009-7-28
-------------------------------------------------

1. crash problem
2. integrate audio track
3. integrate surface


AlsaDevice --> audio track
AndroidAudioDevice --> audio sink



add chmod 0777 /dev/graphics/fb0
init.rc



srcSize_width 320, srcSize_height 240, dstSize_width 320, dstSize_height 240
srcStep 384,176,176, dstStep 1600

set dstStep to twice video width to make display right

if it's half screen , just set dststep double.


W/ServiceManager( 2087): Permission failure: android.permission.ACCESS_SURFACE_FLINGER from uid=10013 pid=2513
E/SurfaceFlinger( 2087): Permission Denial: can't access SurfaceFlinger pid=2513, uid=10013

checkCallingPermission
status_t LayerBuffer::SurfaceBuffer::onTransact(

IServiceManager.cpp
bool checkCallingPermission(const String16& permission)
{
//    return checkCallingPermission(permission, NULL, NULL);
    return true;
}

AndroidManifest.xml
	<uses-permission android:name="android.permission.ACCESS_SURFACE_FLINGER" />
Android.mk
	LOCAL_CERTIFICATE := platform


FireGL and Radeon for X
xrandr
xinerama
Mesa


2009-7-27
-------------------------------------------------
stub code for cidana player

V/MediaPlayerService( 2078): Client(2) constructor
V/MediaPlayerService( 2078): Create new client(2) from pid 2215, url=/data/bin/2.mfs, connId=2
V/MediaPlayerService( 2078): setDataSource(/data/bin/2.mfs)
V/MediaPlayerService( 2078): getPlayerType(const char* url)
V/MediaPlayerService( 2078): player type = 4
V/MediaPlayerService( 2078):  create CidanaPlayer
V/CidanaPlayer( 2078): constructor
V/CidanaPlayer( 2078): onFirstRef
V/MediaPlayerService( 2078):  setDataSource
V/CidanaPlayer( 2078): setDataSource url=/data/bin/2.mfs, fd=-1
V/CidanaPlayer( 2078): setDataSource end
V/MediaPlayerService( 2078): [2] setAudioStreamType(3)
V/MediaPlayerService( 2078): [2] prepareAsync
V/CidanaPlayer( 2078): prepareAsync
V/MediaPlayerService( 2078): [2] notify (0x805a190, 1, 0, 0)
V/MediaPlayerService( 2078): [2] setLooping(0)
V/CidanaPlayer( 2078): setLooping
V/MediaPlayerService( 2078): [2] setVolume(1.000000, 1.000000)
V/AudioSink( 2078): setVolume(1.000000, 1.000000)
V/MediaPlayerService( 2078): [2] start
V/CidanaPlayer( 2078): setLooping
V/CidanaPlayer( 2078): start
V/CidanaPlayer( 2078):   wakeup render thread

yy4jp<C-A>


[PlaybackEngine] ------------Open----------- 0
[PlaybackEngine] ------------Open----------- 2
filename == NULL || filename[0] == 0
[PlaybackEngine] ------------Close-----------
m_pEngine->Open error filename /data/bin/2.mfs


DemuxCMMB.cpp

FillAVInfo

adb kill-server
adb shell chmod 777 /dev/graphics/fb0


2009-7-24
-------------------------------------------------
set ADBHOST=192.168.0.90

8000000	32000064

Floating point exception

sudo apt-get install git-core gnupg sun-java5-jdk flex bison gperf libsdl1.2-dev \
libesd0-dev libwxgtk2.6-dev build-essential zip curl libncurses5-dev zlib1g-dev

adb install out/target/product/eee_701/obj/APPS/MediaPlayerDemo_intermediates/package.apk


adb push eee_701/system/lib/libcidanaplayer.so /system/lib/libcidanaplayer.so
adb push eee_701/system/lib/libmediaplayerservice.so /system/lib/libmediaplayerservice.so
adb push eee_701/system/lib/libmedia.so /system/lib/libmedia.so

mv /system/lib/libmediaplayerservice.so /data/backup/
mv /system/lib/libmedia.so /data/backup/





CI_SDK_Playback.cpp
908
	case CI_CFG_ANDROID_AUDIOSINK:
		{
			pPlaybackSDK->m_pAudioContext->Set(EMC_PROPSET_AUDRND, EMC_PROPID_AUDRND_ANDROID_AUDIOSINK,0,0, pValue, 0);
		}
		break;		
CI_SDK_Typedef.h

AndroidAudioDevice.cpp
AndroidAudioDevice.h



2009-7-23
-------------------------------------------------
vorbis works
cidanaplayer with random sound ok
java app, play video/audio

MediaPlayerService.cpp
	FILE_EXTS, add mfs filetype



cmmb sdk
1. disable android sound
2. add android_audio_device for audio_generic
3. andemo -> sound is not continue

definitions.mk

to avoid soslim strip your execute, just define this before your build_exec
LOCAL_STRIP_MODULE = false

AudioOutput is private
modify them to public, audio output has no sound, write 2 times, 8 times no data



const sp<IAudioFlinger>& AudioSystem::get_audio_flinger()

try audio track



2009-7-22
-------------------------------------------------


hardware/alsa_sound
framework/base/libs/audioflinger
external/cidanaplayer
framework/base/media/libmediaplayerservice
framework/base/include/media
package/apps/MediaPlayerDemo




MediaPlayer::setDataSource(int fd, int64_t offset, int64_t length)
	MediaPlayerService::create(pid_t pid, const sp<IMediaPlayerClient>& client, int fd, int64_t offset, int64_t length)
		MediaPlayerService::Client::setDataSource(int fd, int64_t offset, int64_t length)
	MediaPlayer::setDataSource(const sp<IMediaPlayer>& player)

2009-7-21
-------------------------------------------------
-sdcard /home/cidana/mydroid/256M.img

adb shell mount -o remount rw /system
adb uninstall com.cidana.jplayer
adb push libcidana_media_jni.so /system/lib
adb install com.cidana.jplayer

adb shell rm /system/lib/libcidana_media_jni.so
adb shell rm /system/lib/libcidanavrp.so

2009-7-20
-------------------------------------------------
android create avd -n avd15 -t 2 -s HVGA-L
export ANDROID_PRODUCT_OUT=$HOME/mydroid/out/target/product/eee_701
export ANDROID_PRODUCT_OUT=$HOME/mydroid/out/target/product/generic
unset ANDROID_PRODUCT_OUT
OUT_DIR

out/host/linux-x86/bin/emulator

mydroid$ . build/envsetup.sh 
mydroid$ lunch 1

============================================
TARGET_PRODUCT=generic
TARGET_BUILD_VARIANT=eng
TARGET_SIMULATOR=false
TARGET_BUILD_TYPE=release
TARGET_ARCH=arm
HOST_ARCH=x86
HOST_OS=linux
HOST_BUILD_TYPE=release
BUILD_ID=
============================================

./out/host/<your-machine-type>/bin/emulator
mmm packages/apps/Email
$ adb remount
$ adb sync
ONE_SHOT_MAKEFILE="frameworks/base/Android.mk" make framework

ONE_SHOT_MAKEFILE="external/anlibaudio/Android.mk" make la


AudioFlinger -> /dev/eac -> kernel (mach-goldfish/audio.c) 
-> emulator (external/qemu/goldfish_audio.c -> QEMU audio sub-system 
-> system-specific audio  backend) -> system sound API



mount -o rw -t vfat /dev/block/mmcblk0 /sdcard


frameworks/base/include/media/MediaPlayerInterface.h
frameworks/base/media/libmediaplayerservice/
external/cidanaplayer


target Strip: libcidanaplayer (out/target/product/generic/obj/lib/libcidanaplayer.so)
external/elfcopy/elfcopy.c(1097): gelf_update_phdr(): invalid data
make: *** [out/target/product/generic/obj/lib/libcidanaplayer.so] Error 1
make: *** Deleting file `out/target/product/generic/obj/lib/libcidanaplayer.so'

grep: build/envsetup.sh:    export ANDROID_EABI_TOOLCHAIN=$prebuiltdir/toolchain/arm-eabi-4.2.1/bin
build/core/envsetup.mk:	ABP:=$(ABP):$(PWD)/prebuilt/$(HOST_PREBUILT_TAG)/toolchain/arm-eabi-4.2.1/bin
build/core/combo/linux-arm.mk:	prebuilt/$(HOST_PREBUILT_TAG)/toolchain/arm-eabi-4.2.1/bin/arm-eabi-

cp out/target/product/generic/symbols/system/lib/libcidanaplayer.so out/target/product/generic/obj/lib/libcidanaplayer.so




2009-7-17
-------------------------------------------------
dlopen RTLD_NOW|RTLD_GLOBAL

Makefile.rules
CPPFLAGS += -fno-rtti

-/home/gavinwang/myroid/external/alsa-lib/include/alsa/pcm.h:228:2: error: #error "Unknown endian"
vi /home/gavinwang/myroid/bionic/libc/include/sys/endian.h +265
vi /home/gavinwang/myroid/external/alsa-lib/include/alsa/pcm.h +229

//for compile use little endian
//#error "Unknown endian"
	/** Signed 16 bit CPU endian */
	SND_PCM_FORMAT_S16 = SND_PCM_FORMAT_S16_LE,
	/** Unsigned 16 bit CPU endian */
	SND_PCM_FORMAT_U16 = SND_PCM_FORMAT_U16_LE,
	/** Signed 24 bit CPU endian */
	SND_PCM_FORMAT_S24 = SND_PCM_FORMAT_S24_LE,
	/** Unsigned 24 bit CPU endian */
	SND_PCM_FORMAT_U24 = SND_PCM_FORMAT_U24_LE,
	/** Signed 32 bit CPU endian */
	SND_PCM_FORMAT_S32 = SND_PCM_FORMAT_S32_LE,
	/** Unsigned 32 bit CPU endian */
	SND_PCM_FORMAT_U32 = SND_PCM_FORMAT_U32_LE,
	/** Float 32 bit CPU endian */
	SND_PCM_FORMAT_FLOAT = SND_PCM_FORMAT_FLOAT_LE,
	/** Float 64 bit CPU endian */
	SND_PCM_FORMAT_FLOAT64 = SND_PCM_FORMAT_FLOAT64_LE,
	/** IEC-958 CPU Endian */
	SND_PCM_FORMAT_IEC958_SUBFRAME = SND_PCM_FORMAT_IEC958_SUBFRAME_LE


libutilities
	AndroidAudioDevice.h
	AndroidAudioDevice.cpp



-NO_ERROR
AndroidAudioDevice.h
#define _WIN32

ln -s out/target/product/eee_701/

mydroid$ vi vendor/asus/eee_701/BoardConfig.mk 
mydroid$ cat external/alsa-lib/Android.mk 
mydroid$ ./mkmk_android.sh libasound
out/target/product/eee_701/obj/STATIC_LIBRARIES/libasound_intermediates/libasound.a



cp sdk/cidana_playback_sdk.a ~/cidana_libs
cp demos/*.a ~/cidana_libs

cp /home/gavinwang/hostshare/_android_dellmini/andemo0625/ external/andemo -r
mkdir -p eee_701/obj/STATIC_LIBRARIES/libcidana_playback_sdk_intermediates
mkdir -p eee_701/obj/STATIC_LIBRARIES/libippcore_intermediates
mkdir -p eee_701/obj/STATIC_LIBRARIES/libippvcmerged_intermediates
mkdir -p eee_701/obj/STATIC_LIBRARIES/libXML_intermediates
cp ~/cidana_libs/cidana_playback_sdk.a eee_701/obj/STATIC_LIBRARIES/libcidana_playback_sdk_intermediates/libcidana_playback_sdk.a
cp ~/cidana_libs/libippcore.a eee_701/obj/STATIC_LIBRARIES/libippcore_intermediates
cp ~/cidana_libs/libippvcmerged.a eee_701/obj/STATIC_LIBRARIES/libippvcmerged_intermediates
cp ~/cidana_libs/LibXML.a eee_701/obj/STATIC_LIBRARIES/libXML_intermediates/libXML.a
./mkmk_android.sh andemo


make: *** No rule to make target `NOTICE-TARGET-STATIC_LIBRARIES-libcidana_playback_sdk', needed by `out/target/product/eee_701/system/bin/andemo'.  Stop.
move our libs to the tail
cp these libs one by one

cd eee_701/obj/STATIC_LIBRARIES/

mv libcidana_playback_sdk_intermediates libippcore_intermediates libippvcmerged_intermediates libXML_intermediates ~/imd


vi external/zlib/Android.mk
build static lib
./mkmk_android.sh libz
out/target/product/eee_701/obj/STATIC_LIBRARIES/libz_intermediates/libz.a


backup libaudio/libaudioflinger:orig

./mkmk_android.sh libaudio

target thumb C++: libaudiointerface <= frameworks/base/libs/audioflinger/AudioHardwareGeneric.cpp
target thumb C++: libaudiointerface <= frameworks/base/libs/audioflinger/AudioHardwareStub.cpp
target thumb C++: libaudiointerface <= frameworks/base/libs/audioflinger/AudioDumpInterface.cpp
target thumb C++: libaudiointerface <= frameworks/base/libs/audioflinger/AudioHardwareInterface.cpp
frameworks/base/libs/audioflinger/AudioHardwareGeneric.cpp: In member function 'virtual ssize_t android::AudioStreamInGeneric::read(void*, ssize_t)':
frameworks/base/libs/audioflinger/AudioHardwareGeneric.cpp:279: warning: format '%d' expects type 'int', but argument 5 has type 'ssize_t'
target StaticLib: libaudiointerface (out/target/product/eee_701/obj/STATIC_LIBRARIES/libaudiointerface_intermediates/libaudiointerface.a)
target SharedLib: libaudio (out/target/product/eee_701/obj/SHARED_LIBRARIES/libaudio_intermediates/LINKED/libaudio.so)
target Non-prelinked: libaudio (out/target/product/eee_701/symbols/system/lib/libaudio.so)
target Unstripped: libaudio (out/target/product/eee_701/obj/lib/libaudio.so)
Install: out/target/product/eee_701/system/lib/libaudio.so


./mkmk_android.sh libaudioflinger

target arm C++: libaudioflinger <= frameworks/base/libs/audioflinger/AudioMixer.cpp
target arm C++: libaudioflinger <= frameworks/base/libs/audioflinger/AudioResampler.cpp
target arm C++: libaudioflinger <= frameworks/base/libs/audioflinger/AudioResamplerSinc.cpp
target arm C++: libaudioflinger <= frameworks/base/libs/audioflinger/AudioResamplerCubic.cpp
frameworks/base/libs/audioflinger/AudioResamplerCubic.cpp:25:1: warning: "LOG_TAG" redefined
In file included from frameworks/base/libs/audioflinger/AudioResamplerCubic.cpp:20:
system/core/include/cutils/log.h:68:1: warning: this is the location of the previous definition
target thumb C++: libaudioflinger <= frameworks/base/libs/audioflinger/AudioFlinger.cpp
frameworks/base/libs/audioflinger/AudioMixer.cpp: In static member function 'static void android::AudioMixer::process__TwoTracks16BitsStereoNoResampling(android::AudioMixer::state_t*, void*)':
frameworks/base/libs/audioflinger/AudioMixer.cpp:834: warning: 'in0' may be used uninitialized in this function
frameworks/base/libs/audioflinger/AudioMixer.cpp:839: warning: 'in1' may be used uninitialized in this function
frameworks/base/libs/audioflinger/AudioFlinger.cpp: In member function 'void* android::AudioFlinger::MixerThread::TrackBase::getBuffer(uint32_t, uint32_t) const':
frameworks/base/libs/audioflinger/AudioFlinger.cpp:1717: warning: suggest parentheses around && within ||
target SharedLib: libaudioflinger (out/target/product/eee_701/obj/SHARED_LIBRARIES/libaudioflinger_intermediates/LINKED/libaudioflinger.so)
target Non-prelinked: libaudioflinger (out/target/product/eee_701/symbols/system/lib/libaudioflinger.so)
target Unstripped: libaudioflinger (out/target/product/eee_701/obj/lib/libaudioflinger.so)
Install: out/target/product/eee_701/system/lib/libaudioflinger.so

mkdir -p /data/backup /data/bin
adb push out/target/product/eee_701/obj/EXECUTABLES/andemo_intermediates/LINKED/andemo /data/bin
adb push ~/hostshare/stream/Test\ Mode2\ bitstream\ .mfs /data/bin/2.mfs


chmod 0777 andemo
./andemo 
	seg fault

use crash fixed one

windows.h
	EnterCriticalSection
	//assert


2009-7-16
-------------------------------------------------
intro android



2009-7-15
-------------------------------------------------
release st demo
set ADBHOST=192.168.0.90
adb kill-server
adb shell



2009-7-14
-------------------------------------------------

amixer cset numid=16 3
amixer cset numid=1 50
chmod 777 /dev/graphics/fb0

cp /home/cidana/hostshare/libaudio_from_cuilong/libaudio.so out/target/product/generic/obj/lib/libaudio.so
cp /home/cidana/hostshare/libaudio_from_cuilong/libaudio.so out/target/product/generic/symbols/system/lib/libaudio.so
cp /home/cidana/hostshare/libaudio_from_cuilong/libaudio.so out/target/product/generic/obj/SHARED_LIBRARIES/libaudio_intermediates/LINKED/libaudio.so
cp /home/cidana/hostshare/libaudio_from_cuilong/libaudio.so out/target/product/generic/system/lib/libaudio.so


rm \
out/target/product/generic/obj/lib/libaudio.so \
out/target/product/generic/symbols/system/lib/libaudio.so \
out/target/product/generic/obj/SHARED_LIBRARIES/libaudio_intermediates/LINKED/libaudio.so
out/target/product/generic/system/lib/libaudio.so



cp /home/cidana/hostshare/yuhua/libc.so generic/system/lib/libc.so
cp /home/cidana/hostshare/yuhua/libc.so generic/obj/SHARED_LIBRARIES/libc_intermediates/LINKED/libc.so
cp /home/cidana/hostshare/yuhua/libc.so generic/obj/lib/libc.so
cp /home/cidana/hostshare/yuhua/libc.so generic/symbols/system/lib/libc.so


find generic/ -name libc.so -print | xargs ls -l
find generic/ -name libaudio.so -print | xargs ls -l


cp /home/cidana/hostshare/yuhua/liblog.so generic/system/lib/liblog.so
cp /home/cidana/hostshare/yuhua/liblog.so generic/obj/SHARED_LIBRARIES/liblog_intermediates/LINKED/liblog.so
cp /home/cidana/hostshare/yuhua/liblog.so generic/obj/lib/liblog.so
cp /home/cidana/hostshare/yuhua/liblog.so generic/symbols/system/lib/liblog.so


2009-7-10
-------------------------------------------------
dell vm disk added
rebuild libxml for dellmini
update yuhua phone firmware

make libaudioflinger

Install: out/target/product/generic/system/lib/libpixelflinger.so
Install: out/target/product/generic/system/lib/libui.so
Install: out/target/product/generic/system/lib/libmedia.so
Install: out/target/product/generic/system/lib/libaudioflinger.so

./gdbserver_x86 192.168.0.90:2345 ./andemo

./gdbserver_x86 192.168.0.90:2345 /system/bin/andemo

target remote 192.168.0.90:2345 

gdb out/target/product/eee_701/obj/EXECUTABLES/andemo_intermediates/LINKED/andemo -tui
dir /home/cidana/hostshare/_android_dellmini/PlaybackSDK_android/SMIT.SDK/Embedded/embedded_sdk/release/TDMB_PMP_SDK/src
after set your break points, type conti to let target app run




gdbs 192.168.0.78:2345 
target remote 192.168.0.108:2345 
remove libaudio , can't bootup

still have crash problem



add cidana player

external/cidanaplayer/
	add mk
	add cpp
--> libcidanaplayer.so



framework/libmediaplayservice/
	add h
	modify mk
--> libmediaplayservice.so



2009-7-9
-------------------------------------------------
x2 coming

replace libaudio.so, libaudioflinger.so, and no sound

aumix can't open mixer

uselibaudio(la), write ok but no sound

amixer scontents
amixer set Master 100%



2009-7-8
-------------------------------------------------

echo "TARGET_ARCH=x86 TARGET_PRODUCT=eee_701 DISABLE_DEXPREOPT=true make -j2 installer_img" > amake.sh

mv vendor/asus/eee_701/Android.mk vendor/asus/eee_701/AndroidBoard.mk


make: *** No rule to make target `vendor/google/frameworks/maps/com.google.android.maps.xml', 
needed by `out/target/product/eee_701/system/etc/permissions/com.google.android.maps.xml'.  Stop.

eee_701.mk
$(call inherit-product, $(SRC_TARGET_DIR)/product/generic.mk)


Copy:  -> 
dirname: missing operand
Try `dirname --help' for more information.
mkdir: missing operand



adb install CI_CMMB_320.apk
mount -t ext2 /dev/block/mmcblk0p1 /sdcard
cp mfs --> /sdcard
chmod 777 /dev/graphics/fb0
play

adb logcat

config files

default.prop
#
# ADDITIONAL_DEFAULT_PROPERTIES
#
ro.secure=0
ro.allow.mock.location=1
ro.debuggable=1
persist.service.adb.enable=1
sudo grub-install --root-directory=/media/disk-1 --no-floppy /dev/sdb1
sudo grub-install --root-directory=/flash --no-floppy /dev/sdb1
sudo cp vmlinuz /flash/boot/
sudo cp grub/menu.lst /flash/boot/grub/



sudo cp -ra backup_andr_sd/* /media/disk-1
sudo rm -r /media/disk-1/boot/
sudo grub-install --root-directory=/media/disk-1 --no-floppy /dev/sdc1
sudo cp backup_andr_sd/boot/vmlinuz /media/disk-1/boot/
sudo cp backup_andr_sd/boot/grub/menu.lst /media/disk-1/boot/grub/
sudo vi /media/disk-1/boot/grub/menu.lst

2009-7-7
-------------------------------------------------
andemo rotate
sdk rotate
rotate 180 has problem




MediaPlayerInterface.h
enum player_type {
    PV_PLAYER = 1,
    SONIVOX_PLAYER = 2,
    VORBIS_PLAYER = 3
};

AudioSystem.h
    enum stream_type {
        DEFAULT         =-1,
        VOICE_CALL      = 0,
        SYSTEM          = 1,
        RING            = 2,
        MUSIC           = 3,
        ALARM           = 4,
        NOTIFICATION    = 5,
        BLUETOOTH_SCO   = 6,
        ENFORCED_AUDIBLE = 7, // Sounds that cannot be muted by user and must be routed to speaker
        NUM_STREAM_TYPES
    };


VorbisPlayer::render()



cmmb sdk build 
need build_cmmb for libxml headers
need codec dir too

Linking shared Library /mnt/hgfs/hostshare/_android_yuhua/PlaybackSDK_android/SMIT.SDK/Embedded/embedded_sdk/release/TDMB_PMP_SDK/build_linux_ubuntu_x86/sdk_linux/sdk/libcidana_playback_sdk.so...
/home/cidana/mydroid/prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/bin/../lib/gcc/arm-eabi/4.2.1/../../../../arm-eabi/bin/ld: crt0.o: No such file: No such file or directory

prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/crtn.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/crtbegin.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/thumb/crtn.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/thumb/crtbegin.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/thumb/interwork/crtn.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/thumb/interwork/crtbegin.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/thumb/interwork/crtend.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/thumb/interwork/crti.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/thumb/crtend.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/thumb/crti.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/interwork/crtn.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/interwork/crtbegin.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/interwork/crtend.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/interwork/crti.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/crtend.o
prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/lib/gcc/arm-eabi/4.2.1/crti.o


mydroid/prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/bin/arm-eabi-gcc -c -fno-builtin crt0.s -o crt0.o

/home/cidana/mydroid/prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/bin/../lib/gcc/arm-eabi/4.2.1/../../../../arm-eabi/bin/ld: 
/home/cidana/mydroid/prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/bin/../lib/gcc/arm-eabi/4.2.1/crt0.o: 
.preinit_array section is not allowed in DSO

delete .preinit_array section in crt0.s

ok


2009-7-6
-------------------------------------------------
Y:\mydroid\frameworks\base\libs\audioflinger\AudioHardwareInterface.cpp

there is only one file need to be modified

make libhardware_legacy


mount -o remount rw /system
mount -t ext2 /dev/block/mmcblk0p1 /data/mnt
umount /data/mnt

rm /system/lib/libhardware_legacy.so
rm /system/lib/libaudioflinger.so

cp /data/mnt/libhardware_legacy.so /system/lib/
cp /data/mnt/libaudioflinger.so /system/lib/
cp /data/mnt/mediaserver /system/bin

cp /data/backup/mediaserver /system/bin

/system/bin/mediaserver


bionic/linker/linker.c:621| ERROR: OOPS:    71 prelinked library 'libhardware_legacy.so' mapped at 0x40000000, not at 0xa9c00000
bionic/linker/linker.c:1517| ERROR:    71 could not load 'libhardware_legacy.so'
bionic/linker/linker.c:1577| ERROR: failed to link libaudioflinger.so
bionic/linker/linker.c:1517| ERROR:    71 could not load 'libaudioflinger.so'
bionic/linker/linker.c:1577| ERROR: failed to link /system/bin/mediaserver
bionic/linker/linker.c:1675| ERROR: CANNOT LINK EXECUTABLE '/system/bin/mediaser


cui long

hi, 
cmmb playback sdkdemo
android  mediaserverALSA 
dell minilibaudioflinger.soandroidstub
sdkALSAbuildlibaudioflinger.so 
mediaserver load 


bionic/linker/linker.c:621| ERROR: OOPS:    71 prelinked library 'libhardware_legacy.so' mapped at 0x40000000, not at 0xa9c00000
bionic/linker/linker.c:1517| ERROR:    71 could not load 'libhardware_legacy.so'
bionic/linker/linker.c:1577| ERROR: failed to link libaudioflinger.so
bionic/linker/linker.c:1517| ERROR:    71 could not load 'libaudioflinger.so'
bionic/linker/linker.c:1577| ERROR: failed to link /system/bin/mediaserver
bionic/linker/linker.c:1675| ERROR: CANNOT LINK EXECUTABLE '/system/bin/mediaser

mediaserver, libaudioflinger.so, libhardware_legacy.so 
bionic/linker/linker.c:1076| ERROR:  1322 cannot locate '(null)'...
bionic/linker/linker.c:1577| ERROR: failed to link libaudioflinger.so
bionic/linker/linker.c:1517| ERROR:  1322 could not load 'libaudioflinger.so'
bionic/linker/linker.c:1577| ERROR: failed to link /system/bin/mediaserver
bionic/linker/linker.c:1675| ERROR: CANNOT LINK EXECUTABLE '/system/bin/mediaserver'

buildlibaudioflinger.so, libhardware_legacy.so
cmmb demo


mydroid\frameworks\base\libs\audioflinger\AudioHardwareInterface.cpp

110diff



model number
yh_x2

firmware version
1.5

kernel version
2.6.25

build number
eng.yh.20090305.181251






Y:\mydroid\frameworks\base\cmds\servicemanager

main_mediaserver.cpp
AudioFlinger::instantiate()

AudioFlinger.cpp
AudioFlinger::AudioFlinger()


AudioHardwareInterface.cpp
AudioHardwareInterface::create()


AudioHardwareALSA.cpp
android::AudioHardwareInterface *createAudioHardware(void) {
	return new android::AudioHardwareALSA();
}


base/media/libmedia/audiosystem


AudioSystem.h



undefined reference to `__cxa_end_cleanup'
undefined reference to `__gxx_personality_v0'
OPTIMIZE                 = Y
DEBUG                    = N

2009-7-3
-------------------------------------------------
sdk init error , try time bomb



2009-7-1
-------------------------------------------------
ndk 

gphone andemo done
rotate done

gphone
porting done, add rotation feature
porting document done
command line demo done
support xi'an

mini
dell mini document update(make booting sdcard/deploy android application )
support taiwan

TI
archmind will need two weeks for preparing support us


contact yuhua for open root privilege on gphone or replace the firmware

we can modify the audio libs


2009-6-30
-------------------------------------------------
mydroid-1.5.tar


2009-6-29
-------------------------------------------------
make ARCH=arm CROSS_COMPILE=/usr/local/x-tools/arm-stm-linux-gnueabi/arm-stm-linux-gnueabi- evb2062_defconfig


2009-6-26
-------------------------------------------------
android doc
Makefile.rules: -fno-rtti moved from optimized flag to cppflag


system\core\init


021-23073376

TI 3505 EVM


3505 EVMworkandroid source treetool chain
sdrootfs image



1.SDip
2.wifi




2009-6-25
-------------------------------------------------
crash problem
it's alsadevice.cpp
in alsa->stop{   flush()  memset freed memory }


attr
VECTOR idx++


C++ compiling ../../../../src/Libwin32/linux/linuxrwqueue.cpp ...
C++ compiling ../../../../src/Libwin32/linux/linuxtimer.cpp ...

sync this? open 1 then open 2 crash in libc



PlaybackEngine.cpp

win32.cpp
	int mainthread_init(void){CLinuxThread_mainthread_init();}
	void mainthread_fini(void){CLinuxThread_mainthread_fini();}
winbase.h
	int mainthread_init(void);
	void mainthread_fini(void);

linuxsync2.cpp
	#include "linuxtimer.h"
	int CLinuxThread_mainthread_init(void)
	{
		CLinuxTimer_init();
		mainthread = new CLinuxThread;
		if(mainthread)
			return 0;
		else
			return -1;
	}

	void CLinuxThread_mainthread_fini(void)
	{
		CLinuxTimer_fini();
		if(mainthread)
		{
			delete mainthread;
			mainthread=NULL;
		}
	}

linuxsync2.h
	int CLinuxThread_mainthread_init(void);
	void CLinuxThread_mainthread_fini(void);



2009-6-24
-------------------------------------------------
codinate 118,35,684,452


118,35,566,417


CRASH
libwin32/linux/win32.cpp, 
GlobalMemoryStatus?
USE_VECTOR


AUDIO
libaudiofinger.so
	frameworks/base/libs/audioflinger

libaudio.so
	hardware/alsa_sound

VIDEO
libplayer/videorenderlinux.cpp
libutility/graphiccontext.cpp
ExternalDependency/imageprocess


no sound?
check if opensound/alsa config is correct



2009-6-22
-------------------------------------------------
st_demo_20090622



2009-6-19
-------------------------------------------------
decoder cpu usage


mknod /dev/fb0 c 29 0

mkdir /dev/input
mknod /dev/input/event0 c 13 64

mkdir -p /dev/snd
mknod /dev/snd/controlC0 c 116 0
mknod /dev/snd/pcmC0D0p c 116 16
mknod /dev/snd/pcmC0D0c c 116 24


mount /dev/mmc0p1 /mnt && cd /mnt
mount /dev/mmc1p1 /mnt && cd /mnt

mount /dev/mmc1p1 /mnt && cd /mnt/st_demo_20091027/bin/
./cidana_sample -l playlist.txt

cd / && umount /mnt

fbset 480 272 480 272 24

sudo umount /media/disk/


2009-6-18
-------------------------------------------------


AudioInfo.samplesperframe	2048
t.wma	4096
48kpro	6144


ASF_DMX
WMA_ADEC

builds/libwmapro
hostshare/libasfpro

2009-6-17
-------------------------------------------------
CPlaybackEngine::GetStatistics()


1.win32.cpp
2.remove noresize code
3.add imageprocess



ST

\\Fileserver\RD\Engineer\ThirdParty\ST\STCodec

alsa-lib
./configure --host=/usr/local/x-tools/arm-stm-linux-gnueabi/bin/arm-stm-linux-gnueabi- \
--prefix=/usr --without-libdl --enable-static

.a --> src/.libs


2009-6-12
-------------------------------------------------
utils/Error.h

hardware/libhardware_legacy/

\libutility

Makefile - android hardware include 

andemo Makefile add libaudio



vendor/asus/eee_701/BoardConfig.mk

export ALSA_CONFIG_PATH=/system/usr/share/alsa

snd_pcm_nonblock
setHardwareResample

default sample rate 44100 --> 48000

samba

2009-6-11
-------------------------------------------------

root     2076  1     808   368   c026de2d 8000f696 S /system/bin/sh
root     2077  1     3352  188   ffffffff 08051ccc S /sbin/adbd
system   2079  1     852   312   c0292807 8010fa46 S /system/bin/servicemanager
root     2081  1     912   428   c01713cf 8010fbdc S /system/bin/vold
root     2083  1     300876 12588 c01713cf 8010fbdc S zygote
media    2084  1     20720 5540  ffffffff 8020fa46 S /system/bin/mediaserver
root     2086  1     868   344   c0391b98 8010f696 S /system/bin/installd
system   2094  2083  533260 29388 ffffffff 8010fa46 S system_server
radio    2128  2083  451752 15252 ffffffff 80110d9e S com.android.phone
app_2    2133  2083  464672 25004 ffffffff 80110d9e S android.process.acore
app_10   2154  2083  448020 13336 ffffffff 80110d9e S com.android.mms
app_0    2172  2083  446276 15464 ffffffff 80110d9e S android.process.media
app_4    2185  2083  444176 16036 ffffffff 80110d9e S com.android.calendar
app_9    2200  2083  440612 13112 ffffffff 80110d9e S com.android.alarmclock
root     2213  2077  808   392   c0129ebb 80010ac3 S /system/bin/sh

Main_mediaserver.cpp (frameworks\base\media\mediaserver):    AudioFlinger::instantiate();
System_init.cpp (frameworks\base\cmds\system_server\library):        AudioFlinger::instantiate();

vi frameworks/base/media/mediaserver/main_mediaserver.cpp \
frameworks/base/cmds/system_server/library/system_init.cpp

out/target/product/eee_701/system/lib/libsystem_server.so
out/target/product/eee_701/system/bin/mediaserver


libsystem_server
mediaserver


//create a stub hw to rob real device from android
AudioHardwareInterface.cpp
	create
        hw = new AudioHardwareStub();


2009-6-10
-------------------------------------------------
init.rc not with permission of 0644 will cause boot error

aumix
./configure \
  --without-ncurses \
  --without-gpm \
  --without-gtk \
  --disable-gtktest \
  --without-gtk1 \
  --disable-gtk1test \
  --disable-nls

alsa-util
./configure \
	--disable-nls \
	--disable-largefile


-------------------------------------------------
~/hostshare/gfxSDL/build/linux_x86$ cat /proc/asound/devices 
  0: [ 0]   : control
  1:        : sequencer
  8: [ 0- 0]: raw midi
 16: [ 0- 0]: digital audio playback
 17: [ 0- 1]: digital audio playback
 24: [ 0- 0]: digital audio capture
 33:        : timer
~/hostshare/gfxSDL/build/linux_x86$ ls -l /dev/snd/
total 0
crw-rw----+ 1 root audio 116,  0 2009-06-09 16:14 controlC0
crw-rw----+ 1 root audio 116,  8 2009-06-09 16:14 midiC0D0
crw-rw----+ 1 root audio 116, 24 2009-06-10 11:40 pcmC0D0c
crw-rw----+ 1 root audio 116, 16 2009-06-10 11:40 pcmC0D0p
crw-rw----+ 1 root audio 116, 17 2009-06-09 16:14 pcmC0D1p
crw-rw----+ 1 root audio 116,  1 2009-06-09 16:14 seq
crw-rw----+ 1 root audio 116, 33 2009-06-09 16:14 timer


-------------------------------------------------
# cat devices
cat devices
  2:        : timer
  3: [ 0- 4]: digital audio capture
  4: [ 0- 0]: digital audio playback
  5: [ 0- 0]: digital audio capture
  6: [ 0]   : control

# ls -l /dev/snd/
crwxrwxrwx root     audio     14,   0 2009-06-10 05:45 mixer
crwxrwxrwx root     audio    116,   6 2009-06-10 05:45 controlC0
crw------- root     root      14,   4 2009-06-10 05:45 audio
crw------- root     root      14,   3 2009-06-10 05:45 dsp
crwxrwxrwx root     audio    116,   5 2009-06-10 05:45 pcmC0D0c
crwxrwxrwx root     audio    116,   4 2009-06-10 05:45 pcmC0D0p
crw------- root     audio    116,   3 2009-06-10 05:45 pcmC0D4c
crwxrwxrwx root     audio    116,   2 2009-06-10 05:45 timer

# ls /sys/class/sound -l
timer
pcmC0D4c
pcmC0D0p
pcmC0D0c
dsp
audio
controlC0
mixer


~/myroid$ du -sh *
11M	bionic
2.2M	bootable
6.0M	build
81M	dalvik
38M	development
0	eee_701
621M	external
120M	frameworks
920K	hardware
436M	kernel
8.0K	libc.txt
4.0K	Makefile
4.0K	mkmk_android.sh
6.0G	out
33M	packages
404M	prebuilt
16M	system
2.6M	vendor

2009-6-9
-------------------------------------------------

-alsa app version problem
export ALSA_CONFIG_PATH=/system/usr/share/alsa


target:
/system/etc/asound.conf
/system/usr/share/alsa/*


host:
/usr/share/alsa/*

#ifdef _BIG_ENDIAN
	who defined this ?

AlsaDevice.cpp
BitStreamBase.cpp
DemuxCMMB.cpp
OpenSoundDevice.cpp

INCLUDE THESE TWO THAT SHOULD BE ENOUGH
bionic/kernel/common
bionic/kernel/arch-x86



1. how to compile the playback sdk
2. how to add a native command line app to android
2. quick fix routine (modify/compile/run/debug)
2. bionic/libc/docs/OVERVIEW.txt
3. problems which we still have (TODOs)
	* no sound
	* stop segment faults





arch-arm/include/endian.h:#define _BYTE_ORDER _BIG_ENDIAN
arch-arm/include/endian.h:#define _BYTE_ORDER _LITTLE_ENDIAN
arch-arm/include/machine/_types.h:#define _BYTE_ORDER _BIG_ENDIAN
arch-arm/include/machine/_types.h:#define _BYTE_ORDER _LITTLE_ENDIAN
arch-x86/include/endian.h:#ifndef _I386_ENDIAN_H_
arch-x86/include/endian.h:#define _I386_ENDIAN_H_
arch-x86/include/endian.h:#define _BYTE_ORDER _LITTLE_ENDIAN
arch-x86/include/endian.h:#endif /* _I386_ENDIAN_H_ */
bionic/ldexp.c:#if BYTE_ORDER == BIG_ENDIAN
bionic/ldexp.c:#if BYTE_ORDER == LITTLE_ENDIAN
bionic/sha1.c:#if BYTE_ORDER == LITTLE_ENDIAN
bionic/md5.c:#if defined(WORDS_BIGENDIAN)
bionic/md5.c:#if defined(WORDS_BIGENDIAN)
include/endian.h:#ifndef _ENDIAN_H_
include/endian.h:#define _ENDIAN_H_
include/endian.h:#endif /* _ENDIAN_H_ */
include/sys/endian.h:#ifndef _SYS_ENDIAN_H_
include/sys/endian.h:#define _SYS_ENDIAN_H_
include/sys/endian.h:#define _LITTLE_ENDIAN	1234
include/sys/endian.h:#define _BIG_ENDIAN	4321
include/sys/endian.h:#define _PDP_ENDIAN	3412
include/sys/endian.h:#define LITTLE_ENDIAN	_LITTLE_ENDIAN
include/sys/endian.h:#define BIG_ENDIAN	_BIG_ENDIAN
include/sys/endian.h:#define PDP_ENDIAN	_PDP_ENDIAN
include/sys/endian.h:#if _BYTE_ORDER == _LITTLE_ENDIAN
include/sys/endian.h:#define __LITTLE_ENDIAN_BITFIELD
include/sys/endian.h:#if _BYTE_ORDER == _BIG_ENDIAN
include/sys/endian.h:#define __BIG_ENDIAN_BITFIELD
include/sys/endian.h:#ifndef  __LITTLE_ENDIAN
include/sys/endian.h:#define  __LITTLE_ENDIAN    _LITTLE_ENDIAN
include/sys/endian.h:#ifndef  __BIG_ENDIAN
include/sys/endian.h:#define  __BIG_ENDIAN       _BIG_ENDIAN
include/sys/endian.h:#endif /* _SYS_ENDIAN_H_ */
include/netinet/ip.h:#if BYTE_ORDER == LITTLE_ENDIAN
include/netinet/ip.h:#if BYTE_ORDER == BIG_ENDIAN
include/netinet/ip.h:#if _BYTE_ORDER == _LITTLE_ENDIAN
include/netinet/ip.h:#if _BYTE_ORDER == _BIG_ENDIAN
include/netinet/ip.h:#if defined(__LITTLE_ENDIAN_BITFIELD)
include/netinet/ip.h:#elif defined (__BIG_ENDIAN_BITFIELD)
kernel/tools/defaults.py:    "__CHECK_ENDIAN__": kCppUndefinedMacro,
kernel/common/linux/mtd/cfi_endian.h:#define CFI_HOST_ENDIAN
kernel/common/linux/mtd/cfi_endian.h:#ifdef CFI_LITTLE_ENDIAN
kernel/common/linux/mtd/cfi_endian.h:#elif defined (CFI_BIG_ENDIAN)
kernel/common/linux/mtd/cfi_endian.h:#elif defined (CFI_HOST_ENDIAN)
kernel/common/linux/mtd/map.h:#ifdef __LITTLE_ENDIAN
kernel/common/linux/ip.h:#ifdef __LITTLE_ENDIAN_BITFIELD
kernel/common/linux/ip.h:#elif defined (__BIG_ENDIAN_BITFIELD)
kernel/common/linux/aio_abi.h:#ifdef __LITTLE_ENDIAN
kernel/common/linux/aio_abi.h:#elif defined(__BIG_ENDIAN)
kernel/common/linux/tcp.h:#ifdef __LITTLE_ENDIAN_BITFIELD
kernel/common/linux/tcp.h:#elif defined(__BIG_ENDIAN_BITFIELD)
kernel/common/linux/patchkey.h:#define __BYTE_ORDER __LITTLE_ENDIAN
kernel/common/linux/patchkey.h:#if __BYTE_ORDER == __BIG_ENDIAN
kernel/common/linux/patchkey.h:#elif __BYTE_ORDER == __LITTLE_ENDIAN
kernel/common/linux/soundcard.h:#define __BYTE_ORDER __LITTLE_ENDIAN
kernel/common/linux/soundcard.h:#if __BYTE_ORDER == __BIG_ENDIAN
kernel/common/linux/soundcard.h:#elif __BYTE_ORDER == __LITTLE_ENDIAN
kernel/common/linux/ktime.h:#ifdef __BIG_ENDIAN
kernel/common/linux/byteorder/big_endian.h:#ifndef _LINUX_BYTEORDER_BIG_ENDIAN_H
kernel/common/linux/byteorder/big_endian.h:#define _LINUX_BYTEORDER_BIG_ENDIAN_H
kernel/common/linux/byteorder/big_endian.h:#ifndef __BIG_ENDIAN
kernel/common/linux/byteorder/big_endian.h:#define __BIG_ENDIAN 4321
kernel/common/linux/byteorder/big_endian.h:#ifndef __BIG_ENDIAN_BITFIELD
kernel/common/linux/byteorder/big_endian.h:#define __BIG_ENDIAN_BITFIELD
kernel/common/linux/byteorder/little_endian.h:#ifndef _LINUX_BYTEORDER_LITTLE_ENDIAN_H
kernel/common/linux/byteorder/little_endian.h:#define _LINUX_BYTEORDER_LITTLE_ENDIAN_H
kernel/common/linux/byteorder/little_endian.h:#ifndef __LITTLE_ENDIAN
kernel/common/linux/byteorder/little_endian.h:#define __LITTLE_ENDIAN 1234
kernel/common/linux/byteorder/little_endian.h:#ifndef __LITTLE_ENDIAN_BITFIELD
kernel/common/linux/byteorder/little_endian.h:#define __LITTLE_ENDIAN_BITFIELD
kernel/common/linux/patchkey.h~:#define __BYTE_ORDER __LITTLE_ENDIAN
kernel/common/linux/patchkey.h~:#if __BYTE_ORDER == __BIG_ENDIAN
kernel/common/linux/patchkey.h~:#elif __BYTE_ORDER == __LITTLE_ENDIAN
kernel/common/linux/dccp.h:#ifdef __LITTLE_ENDIAN_BITFIELD
kernel/common/linux/dccp.h:#elif defined(__BIG_ENDIAN_BITFIELD)
kernel/common/linux/dccp.h:#ifdef __LITTLE_ENDIAN_BITFIELD
kernel/common/linux/dccp.h:#elif defined(__BIG_ENDIAN_BITFIELD)
kernel/common/linux/raid/md_p.h:#ifdef __BIG_ENDIAN
kernel/common/linux/if_hippi.h:#ifdef __BIG_ENDIAN_BITFIELD
kernel/common/linux/if_hippi.h:#elif defined(__LITTLE_ENDIAN_BITFIELD)
kernel/common/linux/if_hippi.h:#ifdef __BIG_ENDIAN_BITFIELD
kernel/common/linux/if_hippi.h:#elif defined(__LITTLE_ENDIAN_BITFIELD)
kernel/common/linux/cdrom.h:#ifdef __BIG_ENDIAN_BITFIELD
kernel/common/linux/cdrom.h:#elif defined(__LITTLE_ENDIAN_BITFIELD)
kernel/common/linux/cdrom.h:#ifdef __BIG_ENDIAN_BITFIELD
kernel/common/linux/cdrom.h:#elif defined(__LITTLE_ENDIAN_BITFIELD)
kernel/common/linux/cdrom.h:#ifdef __BIG_ENDIAN_BITFIELD
kernel/common/linux/cdrom.h:#elif defined(__LITTLE_ENDIAN_BITFIELD)
kernel/common/linux/cdrom.h:#ifdef __BIG_ENDIAN_BITFIELD
kernel/common/linux/cdrom.h:#elif defined(__LITTLE_ENDIAN_BITFIELD)
kernel/common/linux/cdrom.h:#ifdef __BIG_ENDIAN_BITFIELD
kernel/common/linux/cdrom.h:#elif defined(__LITTLE_ENDIAN_BITFIELD)
kernel/common/linux/cdrom.h:#ifdef __BIG_ENDIAN_BITFIELD
kernel/common/linux/cdrom.h:#elif defined(__LITTLE_ENDIAN_BITFIELD)
kernel/common/linux/cdrom.h:#ifdef __BIG_ENDIAN_BITFIELD
kernel/common/linux/cdrom.h:#elif defined(__LITTLE_ENDIAN_BITFIELD)
kernel/common/linux/cdrom.h:#ifdef __BIG_ENDIAN_BITFIELD
kernel/common/linux/cdrom.h:#elif defined(__LITTLE_ENDIAN_BITFIELD)
kernel/common/linux/cdrom.h:#ifdef __BIG_ENDIAN_BITFIELD
kernel/common/linux/cdrom.h:#elif defined(__LITTLE_ENDIAN_BITFIELD)
kernel/common/linux/prctl.h:#define PR_GET_ENDIAN 19
kernel/common/linux/prctl.h:#define PR_SET_ENDIAN 20
kernel/common/linux/prctl.h:#define PR_ENDIAN_BIG 0
kernel/common/linux/prctl.h:#define PR_ENDIAN_LITTLE 1  
kernel/common/linux/prctl.h:#define PR_ENDIAN_PPC_LITTLE 2  
kernel/common/linux/soundcard.h~:#define __BYTE_ORDER __LITTLE_ENDIAN
kernel/common/linux/soundcard.h~:#if __BYTE_ORDER == __BIG_ENDIAN
kernel/common/linux/soundcard.h~:#elif __BYTE_ORDER == __LITTLE_ENDIAN
kernel/common/asm-generic/bitops/le.h:#ifdef __LITTLE_ENDIAN
kernel/common/asm-generic/bitops/le.h:#elif defined(__BIG_ENDIAN)
private/arpa_nameser_compat.h:#define	LITTLE_ENDIAN	1234	/* least-significant byte first (vax, pc) */
private/arpa_nameser_compat.h:#define	BIG_ENDIAN	4321	/* most-significant byte first (IBM, net) */
private/arpa_nameser_compat.h:#define	PDP_ENDIAN	3412	/* LSB first in word, MSW first in long (pdp)*/
private/arpa_nameser_compat.h:#define BYTE_ORDER	LITTLE_ENDIAN
private/arpa_nameser_compat.h:#define BYTE_ORDER	BIG_ENDIAN
private/arpa_nameser_compat.h:    (BYTE_ORDER != BIG_ENDIAN && BYTE_ORDER != LITTLE_ENDIAN && \
private/arpa_nameser_compat.h:    BYTE_ORDER != PDP_ENDIAN)
private/arpa_nameser_compat.h:#if BYTE_ORDER == BIG_ENDIAN
private/arpa_nameser_compat.h:#if BYTE_ORDER == LITTLE_ENDIAN || BYTE_ORDER == PDP_ENDIAN
stdlib/strtod.c: * #define IEEE_LITTLE_ENDIAN for IEEE-arithmetic machines where the least
stdlib/strtod.c: * #define IEEE_BIG_ENDIAN for IEEE-arithmetic machines where the most
stdlib/strtod.c:#if BYTE_ORDER == BIG_ENDIAN
stdlib/strtod.c:#define IEEE_BIG_ENDIAN
stdlib/strtod.c:#define IEEE_LITTLE_ENDIAN
stdlib/strtod.c:#define IEEE_BIG_ENDIAN
stdlib/strtod.c:#if defined(IEEE_LITTLE_ENDIAN) + defined(IEEE_BIG_ENDIAN) + defined(VAX) + \
stdlib/strtod.c:Exactly one of IEEE_LITTLE_ENDIAN IEEE_BIG_ENDIAN, VAX, or
stdlib/strtod.c:#ifdef IEEE_LITTLE_ENDIAN
stdlib/strtod.c:#if defined(IEEE_LITTLE_ENDIAN) + defined(VAX) + defined(__arm__)
stdlib/strtod.c:#if defined(IEEE_LITTLE_ENDIAN) + defined(IEEE_BIG_ENDIAN)



2009-6-8
-------------------------------------------------
cmmb_command 
	screen width, height
2009-6-4
-------------------------------------------------
crash maybe caused by ivitime?

c800
fc00
	static int n=0;
	if(n<3)
	{
		printf("[CCMMBDemux]%d Skip %d Bytes of Padding Stuff!! \n", n++, nPaddingLen);
	}


2009-6-3
-------------------------------------------------
andemo
	libcidana_playback_sdk libippcore libippvcmerged libXML


sdk_lib/libplayer/Makefile:CPPFLAGS += -DUSE_SDL
sdk_lib/libutility/Makefile:CPPFLAGS += -DUSE_SDL
sdk_lib/libutility/Makefile:	$(DIR_OBJ)/GraphicsContextSDL.o \


sdk_lib/libplayer/Makefile:CFLAGS += -D_VIDEO_ONLY
sdk_lib/libplayer/Makefile:CPPFLAGS += -D_VIDEO_ONLY
	yuv2rgb_c.o

yuv2rgb_c.h
yuv2rgb_c.c
VideoRenderLinux.cpp
	SCREEN WIDTH
GraphicsContext.h
GraphicsContext.cpp
	SCREEN WIDTH, DEVICE_NAME
main.cpp

OpenSoundDevice.cpp
	DEVICE_NAME


AACpluslib

sdk_lib/libcmmbdemux/Makefile:INCLUDEDIRS += -I$(EXTERNAL_LIB_DIR)/zlib
sdk_src/Makefile:	$(EXTERNAL_LIB_DIR)/zlib/libz.a \

uncompress31


grep -E "(SDL|VIDEO_ONLY)" * -r


out/target/product/eee_701/obj/STATIC_LIBRARIES/libXML_intermediates/libXML.a(parserInternals.o): In function `xmlCheckVersion':
../../../src/LibXML/parserInternals.c:81: undefined reference to `stderr'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libXML_intermediates/libXML.a(tree.o): In function `xmlBufferDump':
../../../src/LibXML/tree.c:6831: undefined reference to `stdout'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libXML_intermediates/libXML.a(xmlIO.o): In function `__xmlIOErr':
../../../src/LibXML/xmlIO.c:265: undefined reference to `__errno_location'
../../../src/LibXML/xmlIO.c:267: undefined reference to `__errno_location'
../../../src/LibXML/xmlIO.c:270: undefined reference to `__errno_location'
../../../src/LibXML/xmlIO.c:273: undefined reference to `__errno_location'
../../../src/LibXML/xmlIO.c:276: undefined reference to `__errno_location'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libXML_intermediates/libXML.a(xmlIO.o):../../../src/LibXML/xmlIO.c:279: more undefined references to `__errno_location' follow
out/target/product/eee_701/obj/STATIC_LIBRARIES/libXML_intermediates/libXML.a(xmlIO.o): In function `xmlCheckFilename':
../../../src/LibXML/xmlIO.c:738: undefined reference to `stat64'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libXML_intermediates/libXML.a(xmlIO.o): In function `xmlFileOpen_real':
../../../src/LibXML/xmlIO.c:843: undefined reference to `stdin'
../../../src/LibXML/xmlIO.c:877: undefined reference to `fopen64'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libXML_intermediates/libXML.a(xmlIO.o): In function `xmlFileOpenW':
../../../src/LibXML/xmlIO.c:925: undefined reference to `stdout'
../../../src/LibXML/xmlIO.c:950: undefined reference to `fopen64'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libXML_intermediates/libXML.a(xmlIO.o): In function `xmlFileClose':
../../../src/LibXML/xmlIO.c:1020: undefined reference to `stdout'
../../../src/LibXML/xmlIO.c:1020: undefined reference to `stderr'
../../../src/LibXML/xmlIO.c:1026: undefined reference to `stdin'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libXML_intermediates/libXML.a(xmlmemory.o): In function `xmlMemDisplay':
../../../src/LibXML/xmlmemory.c:652: undefined reference to `fopen64'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libXML_intermediates/libXML.a(catalog.o): In function `xmlLoadFileContent':
../../../src/LibXML/catalog.c:973: undefined reference to `stat64'
../../../src/LibXML/catalog.c:978: undefined reference to `open64'
out/target/product/eee_701/obj/STATIC_LIBRARIES/libXML_intermediates/libXML.a(error.o): In function `xmlGenericErrorDefaultFunc':
../../../src/LibXML/error.c:75: undefined reference to `stderr'
collect2: ld returned 1 exit status
make: *** [out/target/product/eee_701/obj/EXECUTABLES/andemo_intermediates/LINKED/andemo] Error 1
~/myroid$ cp /home/gavinwang/SDL-1.2.13/Makefile /home/gavinwang/hostshare




libxml.h	64 -> 32

2009-6-2
-------------------------------------------------
1. libutility makefile -> framebuffer
2. libplayer makefile -> debuginfo
3. config DEBUG -> Y

http://www.fs-driver.org/download.html

[DemuxCMMB] CMMB Demux Opened.
[CCMMBDemux] input 102400 bytes into demux buffer!
[DemuxOne] CMMB object not found, skip 102400 bytes
[DemuxOne] process 102400 this time, total processed 102400 bytes, 0 bytes in bu
ffer
[PlaybackEngine] Demux Open Success.
[VideoDecoderH264] H264 Decoder Opened.
[PlaybackEngine] Video Decoder Open Success.
[VideoRender] Video Render Opened.
[PlaybackEngine] Video Render Open Success.
[AudioDecoderAAC] AAC Decoder Opened.
[PlaybackEngine] Audio Decoder Open Success.
[AudioRender] Audio Render Opened.
[PlaybackEngine] Audio Render Open Success.
**********CI Mobile Player*********


[CCMMBDemux] input 51200 bytes into demux buffer!
[DemuxOne] CMMB object not found, skip 51200 bytes
[DemuxOne] process 51200 this time, total processed 4096000 bytes, 0 bytes in bu
ffer

2009-6-1
-------------------------------------------------
__dso_handle: undefined

you can't define a static object from a class, like

static ClassA obja;


Binary file /home/gavinwang/myroid/prebuilt/linux-x86/toolchain/i686-unknown-linux-gnu-4.2.1/lib/gcc/i686-unknown-linux-gnu/4.2.1/crtbegin.o matches
Binary file /home/gavinwang/myroid/prebuilt/linux-x86/toolchain/i686-unknown-linux-gnu-4.2.1/lib/gcc/i686-unknown-linux-gnu/4.2.1/crtbeginS.o matches
Binary file /home/gavinwang/myroid/prebuilt/linux-x86/toolchain/i686-unknown-linux-gnu-4.2.1/lib/gcc/i686-unknown-linux-gnu/4.2.1/crtbeginT.o matches
Binary file /home/gavinwang/myroid/prebuilt/linux-x86/toolchain/i686-unknown-linux-gnu-4.2.1/lib/libgcc_s.so.1 matches
Binary file /home/gavinwang/myroid/prebuilt/linux-x86/toolchain/i686-unknown-linux-gnu-4.2.1/lib/libgcc_s.so matches



ALSA lib external/alsa-lib/src/dlmisc.c:126:(snd_dlsym_verify) 
unable to verify version for symbol snd_config_hook_load


snd_htimestamp_t

2009-5-31
-------------------------------------------------
sdk_lib/libplayer/Makefile:CPPFLAGS += -D_CMMB_SDK

adb shell
adb kill-server

#include <stdlib.h>
//#include <string.h>



/home/gavinwang/myroid/prebuilt/linux-x86/toolchain/i686-unknown-linux-gnu-4.2.1/bin/i686-unknown-linux-gnu-g++

SLIBPATH=/home/gavinwang/myroid/out/target/product/eee_701/static_libs

/home/gavinwang/myroid/prebuilt/linux-x86/toolchain/i686-unknown-linux-gnu-4.2.1/bin/i686-unknown-linux-gnu-g++ -o abc main.o -L/home/gavinwang/myroid/out/target/product/eee_701/static_libs

g++ -o abc main.cpp ../sdk/libcidana_playback_sdk.so -lasound -L. -lXML ./libipp*


1
	-I${ANPATH}/bionic/libc/include/ \

 machine/_types.h: No such file or directory
	-I${ANPATH}/bionic/libc/arch-x86/include \

 asm/page.h: No such file or directory
	-I${ANPATH}/bionic/libc/kernel/arch-x86 \

linux/compiler.h: No such file or directory
	-I${ANPATH}/bionic/libc/kernel/common \

error: missing binary operator before token "("
	-I${ANPATH}/bionic/libm/include \

/usr/include/alsa/global.h:137: error: redefinition of struct timeval
	-I${ANPATH}/external/alsa-lib/include

/usr/lib/gcc/i486-linux-gnu/4.3.2/include/stddef.h:214: error: duplicate unsigned
/usr/lib/gcc/i486-linux-gnu/4.3.2/include/stddef.h:214: error: two or more data types in declaration specifier
bionic/libc/kernel/common/linux

/home/gavinwang/myroid/external/alsa-lib/include/alsa/global.h:137: error: redefinition of struct timeval
#define _POSIX_C_SOURCE

#define __BYTE_ORDER __LITTLE_ENDIAN

                 from ../../../../src/LibUtility/AlsaDevice.cpp:7:
/home/gavinwang/myroid/bionic/libc/kernel/common/linux/patchkey.h:27:2: error: #error "could not determine byte order"
In file included from ../../../../src/LibUtility/AlsaDevice.cpp:7:
/home/gavinwang/myroid/bionic/libc/kernel/common/linux/soundcard.h:152:2: error: #error "could not determine byte order"
In file included from /home/gavinwang/myroid/external/alsa-lib/include/alsa/asoundlib.h:49,
                 from ../../../../src/LibUtility/AlsaDevice.h:5,
                 from ../../../../src/LibUtility/AlsaDevice.cpp:13:
/home/gavinwang/myroid/external/alsa-lib/include/alsa/pcm.h:228:2: error: #error "Unknown endian"

find . -name *.a -exec mv '{}' static_libs \;

ANPATH=/home/gavinwang/myroid
INCLUDEDIRS += -I$(TOP)/include -I. \
bionic/libc/include/ \
bionic/libc/arch-x86/include \
bionic/libc/kernel/arch-x86 \
bionic/libc/kernel/common \
bionic/libm/include \
external/alsa-lib/include \


__si_class_type_info
__vmi_class_type_info
-fno-rtti


2009-5-26
-------------------------------------------------
delete console=0 in /boot/grub/menu.lst to access console

mkdir -p out/target/product/eee_701/obj/STATIC_LIBRARIES/libSDL_intermediates
mkdir -p out/target/product/eee_701/obj/STATIC_LIBRARIES/libSDLmain_intermediates

cp libSDL.a /home/gavinwang/myroid/out/target/product/eee_701/obj/STATIC_LIBRARIES/libSDL_intermediates/
cp out/lib/libSDLmain.a /home/gavinwang/myroid/out/target/product/eee_701/obj/STATIC_LIBRARIES/libSDLmain_intermediates/

./configure --prefix=/home/gavinwang/sdl-1.2.12-android-20080919/out  --disable-shared --disable-rpath \
--disable-diskaudio --disable-video-directfb --disable-video-svga \
--disable-video-fbcon --disable-video-aalib --disable-cdrom --disable-joystick \
--disable-timer --disable-file --disable-nas --disable-arts --disable-pulseaudio \
--disable-video-x11 --disable-esd --disable-threads --disable-audio




--disable-libc


1. androidipip192.168.1.100
2 . windowsetADBHOST192.168.1.100
3. adb shellandroid
adb shell exitadbadb kill-server

192.168.0.90



../../../../src/LibUtility/GraphicsContext.cpp: In function IGraphicsContext* CreateGraphicsContext():
../../../../src/LibUtility/GraphicsContext.cpp:377: error: cannot allocate an object of abstract type CGraphicsContext
../../../../src/LibUtility/GraphicsContext.h:7: note:   because the following virtual functions are pure within CGraphicsContext:
../../../../src/LibPlayer/Playercore.h:426: note: 	virtual HRESULT IGraphicsContext::BeginDraw(void**, bool)
../../../../src/LibPlayer/Playercore.h:427: note: 	virtual HRESULT IGraphicsContext::BeginDraw(void**, void**, void**, int*, RECT*, RECT*, int)
../../../../src/LibPlayer/Playercore.h:429: note: 	virtual HRESULT IGraphicsContext::EndDraw(bool)
../../../../src/LibPlayer/Playercore.h:432: note: 	virtual HRESULT IGraphicsContext::SetViewport(RECT*, RECT*)

../../../../src/LibPlayer/Playercore.h:438: note: 	virtual HRESULT IGraphicsContext::VideoWndChanged(void*)
../../../../src/LibPlayer/Playercore.h:439: note: 	virtual HRESULT IGraphicsContext::SetVideoAspectRatio(long int)
../../../../src/LibPlayer/Playercore.h:440: note: 	virtual HRESULT IGraphicsContext::ShowVideo(bool)
../../../../src/LibPlayer/Playercore.h:441: note: 	virtual HRESULT IGraphicsContext::SetVideoProperty(VIDEOPROPERTY_ITEM)
../../../../src/LibPlayer/Playercore.h:442: note: 	virtual HRESULT IGraphicsContext::GetVideoProperty(VIDEOPROPERTY_ITEM*)


	STDMETHODIMP NonDelegatingQueryInterface(REFIID riid, void* *ppvObj);
	STDMETHODIMP QuerySupported(REFGUID guidPropSet, unsigned long dwPropID, unsigned long *pTypeSupport);
	STDMETHODIMP Get(REFGUID guidPropSet, unsigned long dwPropID, void* pInstanceData, unsigned long cbInstanceData, void* pPropData, unsigned long cbPropData, unsigned long *pcbReturned);
	STDMETHODIMP Set(REFGUID guidPropSet, unsigned long dwPropID, void* pInstanceData, unsigned long cbInstanceData, void* pPropData, unsigned long cbPropData);
	STDMETHODIMP Open(GFX_OPEN_OPTIONS *pOptions, unsigned long dwSize);
	STDMETHODIMP Close();
	STDMETHODIMP BeginDraw(void ** pFrameBuffer);
	STDMETHODIMP EndDraw();
	STDMETHODIMP GetDisplayProperties();
	STDMETHODIMP GetDefaultKeys(int iOptions);
	STDMETHODIMP SetFocus(BOOL bFocusOn);
	STDMETHODIMP SetViewport(RECT *rtView );
	STDMETHODIMP GetGuiKey( unsigned long dwIn, unsigned long * pOut );
	STDMETHODIMP GetGraphicsProperties( GraphicsProperties * pGraphicsProperties );


2009-5-25

libsdl-gfx1.2-4
sudo apt-get remove  libsdl-image1.2 libsdl-image1.2-dev \
libsdl1.2-dev libsdl1.2debian libsdl1.2debian-alsa

sudo apt-get install libsdl1.2-dev libsdl1.2debian


valgrind

2009-5-22

undefined symbol: __stack_chk_fail_local
define a char array in cpp function will cause this ugly error.

integrate sdl with qt4
shm

2009-5-21
-------------------------------------------------
OSCL:operation system compatibility library
PVMF:multimedia framework


testoverlay
testoverlay2


2009-5-20
-------------------------------------------------
make bootable sd
ciplayer source code?
document
where is playbackengine lib


1. source code "~/myroid/external/"makefileexternalAndroid.mk;
2. "~/myroid/"./mkmk_android.sh + makefileLOCAL_MODULE./mkmk_android.sh liballin_media_jni;
3. "./mkmk_android.sh clean-" clean2 step


t_sinpro
t_sinlib
libtestbuild/libyyy: cause rebuild host libs(libc,m,stdc++,..)

target SharedLib: libm (out/target/product/generic/obj/SHARED_LIBRARIES/libm_intermediates/LINKED/libm.so)
target Prelink: libm (out/target/product/generic/symbols/system/lib/libm.so)
target Strip: libm (out/target/product/generic/obj/lib/libm.so)
target SharedLib: libtestbuild (out/target/product/generic/obj/SHARED_LIBRARIES/libtestbuild_intermediates/LINKED/libtestbuild.so)
/home/gavinwang/myroid/prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/bin/../lib/gcc/arm-eabi/4.2.1/../../../../arm-eabi/bin/ld: BFD 2.17 assertion fail ../../../toolchain/android-toolchain/binutils-2.17/bfd/elf32-arm.c:2428
/home/gavinwang/myroid/prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/bin/../lib/gcc/arm-eabi/4.2.1/../../../../arm-eabi/bin/ld: BFD 2.17 assertion fail ../../../toolchain/android-toolchain/binutils-2.17/bfd/elf32-arm.c:2428
/home/gavinwang/myroid/prebuilt/linux-x86/toolchain/arm-eabi-4.2.1/bin/../lib/gcc/arm-eabi/4.2.1/../../../../arm-eabi/bin/ld: BFD 2.17 assertion fail ../../../toolchain/android-toolchain/binutils-2.17/bfd/elf32-arm.c:2428
target Prelink: libtestbuild (out/target/product/generic/symbols/system/lib/libtestbuild.so)
build/tools/apriori/prelinkmap.c(137): library 'libtestbuild.so' not in prelink map
make: *** [out/target/product/generic/symbols/system/lib/libtestbuild.so] Error 1




prepare these stuff first
* a sd card 1G or more
* machine with linux installed ubuntu prefered
* sd card rootfs packed in backup_andr_sd.tgz
* android demos with cmmb playback capbility in CI_Player.rar

steps you should follow
1. partitation this sd card -> one primary partitation
2. format this sd card -> ext2
3. extract stuff in backup_andr_sd.tgz to someplace
4. cp these files to sd card
5. remove the /boot directory in sd card
6. invoke this commmand (if your sd card is sdb1)
	sudo grub-install --root-directory=/media/sdb1 --no-floppy /dev/sdb1
7. cp backup_andr_sd/boot/vmlinuz to sdcard/boot/
8. cp backup_andr_sd/boot/grub/menu.lst to sdcard/boot/grub
9. now you have a bootable android sd card
10. then follow the readme.txt in demo package CI_Player.rar




make bootable sd card:
1.cp backup to sd card
2.rm /boot
3.sudo grub-install --root-directory=/media/flash --no-floppy /dev/sdb1
4.cp backup/boot/vmlinuz backup/boot/grub/menu.lst to sd card

git clone git://android.git.kernel.org/platform/external/opencore.git


    cd <opencore>/build_config/opencore_dynamic
    source setup.sh <opencore>
    make -j

tools_v2/build/make/g++.mk:FLAG_COMPILE_WARNINGS_AS_ERRORS := -Werror
~/opencore/build_config/opencore_dynamic/build/bin/linux
export LD_LIBRARY_PATH+=

2009-5-19
-------------------------------------------------
rename D:\Qt\2009.01\qt\translations1 to avoid ugly translation

android, eclipse on ubuntu804

1.eclipse.org/eclipse-rcp
2.adt

android create avd --target 1 --name myavd

android create project \
    --package com.android.helloandroid \
    --activity HelloAndroid \ 
    --target 1 \
    --path <path-for-your-project>/HelloAndroid \
    --mode activity

mkdiskimage -4 /dev/sdz 0 64 32
mkdiskimage -4 /dev/sdb 0 128 32
mkdiskimage -F -4 /dev/sdz 0 255 63


fdisk /dev/sdb
mkfs.ext3 -b 4096 /dev/sdb1

the `firmware' stage, 
the `bootloader' stage, 
the `kernel' stage, and 
the `init' stage.


vmware-vdiskmanager -r d:\vm\android1\Ubuntu.vmdk -t 0 d:\a.vmdk


2009-5-15
-------------------------------------------------
* read kernel documents(fbcon, console)



%
editplus collection good



-------------------------------------------------
Autologin is a tool that lets you bypass the login screens on a unix system.
It needs to be installed and configured by root (it is definitely not a cracking tool ;) ).
Possible uses include providing a simple end-user system as well as creating a one-purpose 
(e.g. web browsing) station that returns to where it's supposed to be after a reboot or power outage without any intervention.

New more clean solution

Edit /etc/inittab and add --autologin root to all the mingetty lines of the inittab, so your inittab would look something like this:

1:2345:respawn:/sbin/mingetty --autologin root tty1
2:2345:respawn:/sbin/mingetty --autologin root tty2
3:2345:respawn:/sbin/mingetty --autologin root tty3
4:2345:respawn:/sbin/mingetty --autologin root tty4
5:2345:respawn:/sbin/mingetty --autologin root tty5
6:2345:respawn:/sbin/mingetty --autologin root tty6

Reboot the system and your done.
The system autologins into the root account.
-----------------+-------------------------------------




Color depth      | 640x480  800x600  1024x768 1280x1024
-----------------+-------------------------------------
256        (8bit)|  769      771       773      775
32000     (15bit)|  784      787       790      793
65000     (16bit)|  785      788       791      794
16.7 Mill.(24bit)|  786      789       792      795



mp3id3 v2tagutf-16


milli
micro
nano
pico
femto
atto



53128007069B9ZH

16v4l2 error.

idx_type=0
jolin, idx_type=0

AVI_ParseHeader
n = frame number ?


===================================================



./ci_sample_shared: symbol lookup error: /mfoneroot/lib/libci_playback_sdk.so: undefined symbol: _Z2DPPKcz
make clean; make


D:\hostshare\Release_Branch_For_Access_NEO_Playback\Embedded\embedded_sdk\release\TDMB_PMP_SDK\
build\linux_playback_sdk_Access_NEO\sdk_lib\libwin32\Makefile

-DACCESS_DRM


11:23 2009-4-23
camera




60
47~49
57

43	55
45	57


===================================================
16:53 2009-4-22
<E***>(mgui):qbus_call favorite->videoserver timeout




timeout


===================================================
/disk/card.1/Video

a	11
b	232
c	533
d	807
e	30


avi
h264


3gp
mp4




out of memory




newell.chen

bug
4bug4  



===================================================

NEO-ARM-V1.6.0-20090417


11M,30M,232M,533Mavi


1.avivideo
2.6
3.->->->avi
4.avi200Mavi100M

===================================================
bug


NEO-ARM-V1.6.0-20090417








===================================================
18:56 2009-4-21
1.6comaudioserver
2.aviavihotel california
232Mfreeze
3.558M
freeze



dynamic library load


All about link


*create a static library
cc -c source to *.o
ar rcs -o libxxx.a *.o

*create a dynamic library
cc -c -fPIC source to *.o
cc -shared -Wl,-soname,libxxx.so.1 -o libxxx.so.1.0.1 *.o

*link against static library
cc -static -o appname *.c -lxxx

*link against dynamic library
cc -o appname *.c -lxxx



1680x1050
===================================================
\\fileserver\RD\ThirdParty\Novarobo\Access_ToolChain

lrz - download file from device
srz - send file to device

in: pcm
out: amr

killall audioserver
/mfoneroot/lib
/mnt/cidana


haier neo
mode 1:
mode 2:=call + vol down + power

1.buffer256, AudioEncoderAMR.cpp:21, 
2.dump pcm, pcm,rec_sample_shared invalid input
3.audio record thread
-BaseAudioEncoder.cpp:47 


3
killall audioserver




amr, 20ms per frame, 8k sample per second, 160sample per frame, 50frames per second
IUV means interlance



Tv = totalFrames/fps
Ta = totalFrames*MSperFrame


CI_Recorder_Initialize
-CreateRecorderEngine

CRecorderEngine::Open
-CreateAudioEncoder
--CreateAMREncoder



===================================================
cidana$888
http://cidana.com/controlpanel
http://svn-server:81/svn
http://jira
http://jira.sh.cidana.com
http://bamboo:8085
http://bamboo2:8085
chengwei.shi@cidana.com
pop3	130.94.234.18
===================================================
http://dist.trolltech.com/developer/download/qt-win-eval-4.5.0-vs2005.exe

Name: physaris shi
Company name: none
License Key: BGKX-RM5-R4M-2CX-VA6N-FT987-6E55


===================================================
maxthon2

sougou input method

xplorer2
FFFEFFFEF925C60101FE0DFEFF0AAF14FFFEFFFE14491EFEFF
FEFFFEFFFE1E0C28FEFFFEFFFEFFFE28CC32FEFFFEFFFEFFFE
3205FFFEFFFEFFFEFFFE00FE01FE02FE03FE04FE05FE06FE07
FE08FEFFFEFFFEFFFEFFFEFFFEFFFEFFFEFFFEFFFEFFFEFFFE

winrar

office 2003

foxit reader

flashget

===================================================
vs 2005
	-visual assist
	-patch

source insight

VMware Workstation 6.5.0.118166
D0NF9-2RH6N-N0PDT-4WC5L


fedora 10
enable root logon x, /etc/pam.d/gdm: root, quiet





physaris1.2345@blogger.com

-------------------------------------------------
si - hotkey
alt + ]		jump match{}
alt + L		jump to symbol window

ctrl + o	jump to file list window



Ethernet adapter Local Area Connection:

        Connection-specific DNS Suffix  . : cidana.com
        IP Address. . . . . . . . . . . . : 192.168.0.58
        Subnet Mask . . . . . . . . . . . : 255.255.255.0
        Default Gateway . . . . . . . . . : 192.168.0.2

eth2      Link encap:Ethernet  HWaddr 00:0c:29:7b:14:83  
          inet addr:192.168.112.128  Bcast:192.168.112.255  Mask:255.255.255.0
          inet6 addr: fe80::20c:29ff:fe7b:1483/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:192064 errors:0 dropped:0 overruns:0 frame:0
          TX packets:108093 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:221063474 (210.8 MB)  TX bytes:5977107 (5.7 MB)
          Interrupt:16 Base address:0x2024 

wireless
cidanawlan
